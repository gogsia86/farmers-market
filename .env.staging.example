# üåæ Farmers Market Platform - Staging Environment Configuration
# Copy this file to .env.staging and fill in the actual values
# Last Updated: January 2025

# ==========================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ==========================================
DATABASE_URL="postgresql://user:password@staging-db.farmersmarket.com:5432/farmersmarket_staging"
DIRECT_URL="postgresql://user:password@staging-db.farmersmarket.com:5432/farmersmarket_staging"

# ==========================================
# üîê AUTHENTICATION (NextAuth v5)
# ==========================================
NEXTAUTH_URL="https://staging.farmersmarket.com"
NEXTAUTH_SECRET="generate-a-secure-random-string-minimum-32-characters-long"

# OAuth Providers (if used)
GOOGLE_CLIENT_ID="your-google-oauth-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-oauth-client-secret"

GITHUB_CLIENT_ID="your-github-oauth-client-id"
GITHUB_CLIENT_SECRET="your-github-oauth-client-secret"

# ==========================================
# üí≥ PAYMENT INTEGRATION (TEST MODE)
# ==========================================

# Stripe (Test Mode)
STRIPE_SECRET_KEY="sk_test_51XXXXX_staging_test_key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_51XXXXX_staging_public_key"
STRIPE_WEBHOOK_SECRET="whsec_staging_webhook_secret_key"

# PayPal (Sandbox)
PAYPAL_CLIENT_ID="sandbox-paypal-client-id"
PAYPAL_CLIENT_SECRET="sandbox-paypal-client-secret"
PAYPAL_MODE="sandbox"

# ==========================================
# ‚òÅÔ∏è AWS S3 STORAGE
# ==========================================
AWS_ACCESS_KEY_ID="AKIA_STAGING_ACCESS_KEY"
AWS_SECRET_ACCESS_KEY="staging-secret-access-key"
AWS_REGION="us-west-2"
AWS_BUCKET_NAME="farmersmarket-staging-uploads"

# CloudFront (optional)
AWS_CLOUDFRONT_DOMAIN="d1234567890.cloudfront.net"

# ==========================================
# üìß EMAIL SERVICE (Resend/SendGrid)
# ==========================================

# Resend
RESEND_API_KEY="re_staging_key_XXXXXXXXXX"
EMAIL_FROM="noreply@staging.farmersmarket.com"
EMAIL_REPLY_TO="support@staging.farmersmarket.com"

# SendGrid (alternative)
# SENDGRID_API_KEY="SG.staging.XXXXXXXXXX"

# ==========================================
# üñºÔ∏è IMAGE UPLOAD (Cloudinary)
# ==========================================
CLOUDINARY_CLOUD_NAME="farmersmarket-staging"
CLOUDINARY_API_KEY="123456789012345"
CLOUDINARY_API_SECRET="staging-cloudinary-secret-key"
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME="farmersmarket-staging"

# ==========================================
# üîç SEARCH & GEOCODING
# ==========================================

# Google Maps API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY="AIzaSyXXXXXX_staging_maps_key"

# Algolia Search (optional)
ALGOLIA_APP_ID="staging-app-id"
ALGOLIA_API_KEY="staging-admin-api-key"
NEXT_PUBLIC_ALGOLIA_SEARCH_KEY="staging-search-only-key"

# ==========================================
# üìä MONITORING & ANALYTICS
# ==========================================

# Sentry Error Tracking
SENTRY_DSN="https://staging-key@o123456.ingest.sentry.io/7890123"
NEXT_PUBLIC_SENTRY_DSN="https://staging-key@o123456.ingest.sentry.io/7890123"
SENTRY_ORG="farmersmarket"
SENTRY_PROJECT="staging"
SENTRY_AUTH_TOKEN="staging-sentry-auth-token"
SENTRY_ENVIRONMENT="staging"

# Vercel Analytics
NEXT_PUBLIC_VERCEL_ANALYTICS_ID="staging-analytics-id"

# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID="G-STAGING123456"

# ==========================================
# üî≠ OPENTELEMETRY & TRACING
# ==========================================
OTEL_EXPORTER_OTLP_ENDPOINT="https://otel-collector-staging.farmersmarket.com"
OTEL_SERVICE_NAME="farmersmarket-staging"
OTEL_EXPORTER_OTLP_HEADERS="x-api-key=staging-otel-api-key"

# Azure Application Insights (if used)
AZURE_APP_INSIGHTS_CONNECTION_STRING="InstrumentationKey=staging-key;IngestionEndpoint=https://westus2-1.in.applicationinsights.azure.com/"

# ==========================================
# ü§ñ AI SERVICES
# ==========================================

# OpenAI
OPENAI_API_KEY="sk-staging-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
OPENAI_ORGANIZATION_ID="org-staging123456"

# Anthropic Claude
ANTHROPIC_API_KEY="sk-ant-staging-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

# Azure OpenAI
AZURE_OPENAI_API_KEY="staging-azure-openai-key"
AZURE_OPENAI_ENDPOINT="https://staging-farmersmarket.openai.azure.com/"
AZURE_OPENAI_DEPLOYMENT_NAME="gpt-4-staging"

# ==========================================
# üîî NOTIFICATIONS
# ==========================================

# Twilio SMS (optional)
TWILIO_ACCOUNT_SID="AC_staging_account_sid"
TWILIO_AUTH_TOKEN="staging-twilio-auth-token"
TWILIO_PHONE_NUMBER="+15551234567"

# Firebase Cloud Messaging (Push Notifications)
FIREBASE_PROJECT_ID="farmersmarket-staging"
FIREBASE_CLIENT_EMAIL="staging@farmersmarket-staging.iam.gserviceaccount.com"
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nSTAGING_KEY\n-----END PRIVATE KEY-----\n"
NEXT_PUBLIC_FIREBASE_API_KEY="AIzaSyXXXXXX_staging_firebase_key"
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN="farmersmarket-staging.firebaseapp.com"

# ==========================================
# üèóÔ∏è APPLICATION SETTINGS
# ==========================================
NODE_ENV="staging"
NEXT_PUBLIC_APP_URL="https://staging.farmersmarket.com"
NEXT_PUBLIC_API_URL="https://staging.farmersmarket.com/api"

# Port (for local testing)
PORT=3001

# ==========================================
# üéØ FEATURE FLAGS
# ==========================================
NEXT_PUBLIC_ENABLE_PAYMENT="true"
NEXT_PUBLIC_ENABLE_REVIEWS="true"
NEXT_PUBLIC_ENABLE_NOTIFICATIONS="true"
NEXT_PUBLIC_ENABLE_AI_RECOMMENDATIONS="true"
NEXT_PUBLIC_ENABLE_REAL_TIME_TRACKING="true"
NEXT_PUBLIC_ENABLE_MOBILE_APP="true"

# Debug Features (staging only)
NEXT_PUBLIC_DEBUG_MODE="true"
NEXT_PUBLIC_SHOW_DEV_TOOLS="true"

# ==========================================
# üîí SECURITY
# ==========================================

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_WINDOW_MS="60000"

# CORS Origins
ALLOWED_ORIGINS="https://staging.farmersmarket.com,https://staging-admin.farmersmarket.com"

# Session Configuration
SESSION_MAX_AGE="604800" # 7 days in seconds
SESSION_UPDATE_AGE="86400" # 1 day in seconds

# ==========================================
# üì± MOBILE APP CONFIGURATION
# ==========================================
NEXT_PUBLIC_MOBILE_APP_SCHEME="farmersmarket-staging"
NEXT_PUBLIC_IOS_APP_ID="com.farmersmarket.staging"
NEXT_PUBLIC_ANDROID_PACKAGE_NAME="com.farmersmarket.staging"

# ==========================================
# üåê INTERNATIONALIZATION
# ==========================================
NEXT_PUBLIC_DEFAULT_LOCALE="en"
NEXT_PUBLIC_SUPPORTED_LOCALES="en,es,fr"

# ==========================================
# üì¶ CACHING & REDIS
# ==========================================
REDIS_URL="redis://staging-redis.farmersmarket.com:6379"
REDIS_PASSWORD="staging-redis-password"
REDIS_TLS="true"

# Cache TTL (in seconds)
CACHE_TTL_SHORT="300"    # 5 minutes
CACHE_TTL_MEDIUM="1800"  # 30 minutes
CACHE_TTL_LONG="3600"    # 1 hour

# ==========================================
# üîß BUILD & DEPLOYMENT
# ==========================================

# Vercel Configuration
VERCEL_ENV="staging"
VERCEL_URL="staging.farmersmarket.com"
VERCEL_GIT_COMMIT_REF="main"

# Build Optimization
NEXT_TELEMETRY_DISABLED="1"
ANALYZE_BUNDLE="false"

# ==========================================
# üß™ TESTING
# ==========================================
TEST_DATABASE_URL="postgresql://user:password@staging-test-db.farmersmarket.com:5432/farmersmarket_test"
SKIP_INTEGRATION_TESTS="false"

# E2E Testing
E2E_BASE_URL="https://staging.farmersmarket.com"
E2E_TEST_USER_EMAIL="test.customer@staging.farmersmarket.com"
E2E_TEST_USER_PASSWORD="StagingTestPass123!"

# ==========================================
# üìù LOGGING
# ==========================================
LOG_LEVEL="info"
LOG_FORMAT="json"
LOG_OUTPUT="stdout"

# ==========================================
# üåæ AGRICULTURAL-SPECIFIC SETTINGS
# ==========================================

# USDA API (for agricultural data)
USDA_API_KEY="staging-usda-api-key"

# Weather API (for farm conditions)
WEATHER_API_KEY="staging-weather-api-key"
WEATHER_API_PROVIDER="openweathermap"

# Geolocation Services
GEOLOCATION_API_KEY="staging-geolocation-key"

# ==========================================
# üíº BUSINESS LOGIC CONFIGURATION
# ==========================================

# Commission Rates (%)
PLATFORM_COMMISSION_RATE="10"
PAYMENT_PROCESSING_FEE="2.9"

# Order Settings
ORDER_CANCELLATION_WINDOW_HOURS="24"
ORDER_AUTO_COMPLETE_DAYS="7"

# Shipping
FREE_SHIPPING_THRESHOLD="50.00"
DEFAULT_SHIPPING_COST="5.99"

# ==========================================
# üé® CUSTOMIZATION
# ==========================================
NEXT_PUBLIC_THEME_PRIMARY_COLOR="#22c55e"
NEXT_PUBLIC_THEME_SECONDARY_COLOR="#059669"
NEXT_PUBLIC_BRAND_NAME="Farmers Market Staging"

# ==========================================
# üìû SUPPORT & CONTACT
# ==========================================
NEXT_PUBLIC_SUPPORT_EMAIL="support@staging.farmersmarket.com"
NEXT_PUBLIC_SUPPORT_PHONE="+1-555-FARM-HELP"

# ==========================================
# üîê SECRETS ROTATION SCHEDULE
# ==========================================
# NEXTAUTH_SECRET: Rotate every 90 days
# DATABASE_URL: Update on security audit
# API_KEYS: Rotate every 180 days
# STRIPE_SECRET_KEY: Use test mode only
# AWS_SECRET_ACCESS_KEY: Rotate every 90 days
#
# Last Secrets Rotation: YYYY-MM-DD
# Next Scheduled Rotation: YYYY-MM-DD
# ==========================================

# ==========================================
# üìã NOTES
# ==========================================
# 1. NEVER commit this file with real values
# 2. Use Vercel environment variables for production secrets
# 3. Test all integrations in staging before production
# 4. Keep test mode enabled for payment providers
# 5. Monitor staging environment closely
# 6. Update this file when adding new integrations
# 7. Ensure all team members have access to secure credential storage
# ==========================================

# ==========================================
# ‚úÖ STAGING DEPLOYMENT CHECKLIST
# ==========================================
# [ ] All required variables filled
# [ ] Database connection tested
# [ ] Payment providers in test mode
# [ ] Email service configured
# [ ] Monitoring tools connected
# [ ] Feature flags set appropriately
# [ ] Domain DNS configured
# [ ] SSL certificate active
# [ ] Error tracking operational
# [ ] Backup strategy in place
# ==========================================
