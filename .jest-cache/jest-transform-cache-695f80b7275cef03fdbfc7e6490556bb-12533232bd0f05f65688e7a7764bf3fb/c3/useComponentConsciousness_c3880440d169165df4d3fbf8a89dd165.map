{"file":"M:\\Repo\\Farmers Market Platform web and app\\src\\hooks\\useComponentConsciousness.ts","mappings":"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","names":[],"sources":["M:\\Repo\\Farmers Market Platform web and app\\src\\hooks\\useComponentConsciousness.ts"],"sourcesContent":["/**\n * üß† DIVINE PATTERN: Component Consciousness Tracking\n * üìö Reference: 01_DIVINE_CORE_PRINCIPLES.instructions.md\n * üåæ Domain: Agricultural Component Monitoring\n * ‚ö° Performance: Quantum Performance Measurement\n */\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\nexport interface ComponentContext {\n  componentName: string;\n  variant?: string;\n  size?: string;\n  [key: string]: unknown;\n}\n\nexport interface PerformanceMeasurement {\n  operationName: string;\n  startTime: number;\n  success: () => void;\n  failure: (error: Error | unknown) => void;\n}\n\nexport interface ComponentConsciousness {\n  startMeasurement: (operationName: string) => PerformanceMeasurement;\n  trackEvent: (eventName: string, metadata?: Record<string, unknown>) => void;\n  trackInteraction: (\n    eventName: string,\n    metadata?: Record<string, unknown>\n  ) => void;\n  captureError: (errorName: string, error: unknown) => void;\n  getMetrics: () => ComponentMetrics;\n}\n\nexport interface ComponentMetrics {\n  componentName: string;\n  renderCount: number;\n  lastRenderTime: number;\n  averageRenderTime: number;\n  errorCount: number;\n  eventCount: number;\n}\n\n/**\n * Divine Performance Tracker Interface\n * Global window interface for performance monitoring\n */\nexport interface DivinePerformanceMetric {\n  component: string;\n  operation: string;\n  duration: number;\n  success: boolean;\n  error?: string;\n  timestamp: number;\n}\n\nexport interface DivinePerformanceTracker {\n  recordMetric: (metric: DivinePerformanceMetric) => void;\n  getMetrics: () => DivinePerformanceMetric[];\n  getComponentMetrics: (componentName: string) => DivinePerformanceMetric[];\n  clearMetrics: () => void;\n}\n\n/**\n * Divine Analytics Tracker Interface\n * Global window interface for analytics tracking\n */\nexport interface DivineAnalyticsEvent {\n  component: string;\n  event: string;\n  metadata?: Record<string, unknown>;\n  context?: Record<string, unknown>;\n  timestamp: number;\n}\n\nexport interface DivineAnalyticsTracker {\n  track: (event: DivineAnalyticsEvent) => void;\n}\n\n/**\n * Extended Window and Global Interface\n */\ndeclare global {\n  interface Window {\n    __DIVINE_PERFORMANCE__?: DivinePerformanceTracker;\n    __DIVINE_ANALYTICS__?: DivineAnalyticsTracker;\n  }\n\n  // eslint-disable-next-line no-var\n  var __DIVINE_PERFORMANCE__: DivinePerformanceTracker | undefined;\n  // eslint-disable-next-line no-var\n  var __DIVINE_ANALYTICS__: DivineAnalyticsTracker | undefined;\n}\n\n/**\n * DIVINE HOOK: useComponentConsciousness\n *\n * Provides component-level consciousness tracking for performance,\n * errors, and user interactions. Follows agricultural quantum patterns.\n *\n * @example\n * ```tsx\n * const consciousness = useComponentConsciousness('FarmCard', { variant: 'agricultural' });\n *\n * const handleClick = async (e) => {\n *   const measurement = consciousness.startMeasurement('click');\n *   try {\n *     await onClick?.(e);\n *     measurement.success();\n *   } catch (error) {\n *     measurement.failure(error);\n *   }\n * };\n * ```\n */\nexport function useComponentConsciousness(\n  componentName: string,\n  context?: Record<string, unknown>\n): ComponentConsciousness {\n  // Metrics storage\n  const metricsRef = useRef<ComponentMetrics>({\n    componentName,\n    renderCount: 0,\n    lastRenderTime: 0,\n    averageRenderTime: 0,\n    errorCount: 0,\n    eventCount: 0,\n  });\n\n  const renderTimesRef = useRef<number[]>([]);\n  const renderStartRef = useRef<number>(0);\n\n  // Track render start\n  useEffect(() => {\n    renderStartRef.current = performance.now();\n  });\n\n  // Track render end\n  useEffect(() => {\n    const renderTime = performance.now() - renderStartRef.current;\n\n    metricsRef.current.renderCount += 1;\n    metricsRef.current.lastRenderTime = renderTime;\n\n    renderTimesRef.current.push(renderTime);\n\n    // Keep only last 100 render times for average calculation\n    if (renderTimesRef.current.length > 100) {\n      renderTimesRef.current.shift();\n    }\n\n    // Calculate average render time\n    metricsRef.current.averageRenderTime =\n      renderTimesRef.current.reduce((sum, time) => sum + time, 0) /\n      renderTimesRef.current.length;\n\n    // Log slow renders (development only)\n    if (process.env.NODE_ENV === \"development\" && renderTime > 16) {\n      console.warn(\n        `üêå Slow render detected in ${componentName}:`,\n        `${renderTime.toFixed(2)}ms`,\n        context\n      );\n    }\n  });\n\n  /**\n   * Start performance measurement for an operation\n   */\n  const measurements = useRef(new Map<string, PerformanceMeasurement>());\n  const errors = useRef<Error[]>([]);\n\n  const startMeasurement = useCallback(\n    (operationName: string) => {\n      const startTime = performance.now();\n\n      return {\n        operationName,\n        startTime,\n        success: () => {\n          const duration = performance.now() - startTime;\n\n          // Store internally\n          measurements.current.set(operationName, {\n            name: operationName,\n            duration,\n            success: true,\n            timestamp: new Date(),\n          });\n\n          // Record in global tracker if available\n          if (globalThis.__DIVINE_PERFORMANCE__) {\n            globalThis.__DIVINE_PERFORMANCE__.recordMetric({\n              component: componentName,\n              operation: operationName,\n              duration,\n              success: true,\n              timestamp: Date.now(),\n            });\n          }\n        },\n        failure: (error: unknown) => {\n          const duration = performance.now() - startTime;\n          const err = error instanceof Error ? error : new Error(String(error));\n          errors.current.push(err);\n\n          // Increment error count\n          metricsRef.current.errorCount += 1;\n\n          const errorMessage = err.message;\n\n          // Store internally\n          measurements.current.set(operationName, {\n            name: operationName,\n            duration,\n            success: false,\n            timestamp: new Date(),\n            error: err,\n          });\n\n          // Record in global tracker if available\n          if (globalThis.__DIVINE_PERFORMANCE__) {\n            globalThis.__DIVINE_PERFORMANCE__.recordMetric({\n              component: componentName,\n              operation: operationName,\n              duration,\n              success: false,\n              error: errorMessage,\n              timestamp: Date.now(),\n            });\n          }\n        },\n      };\n    },\n    [componentName]\n  ); /**\n   * Track custom events (clicks, interactions, etc.)\n   */\n  const trackEvent = useCallback(\n    (eventName: string, metadata?: Record<string, unknown>) => {\n      metricsRef.current.eventCount += 1;\n\n      if (process.env.NODE_ENV === \"development\") {\n        console.debug(`üìä ${componentName}.${eventName}`, metadata);\n      }\n\n      // Track in analytics (if available)\n      if (typeof window !== \"undefined\" && window.__DIVINE_ANALYTICS__) {\n        window.__DIVINE_ANALYTICS__.track({\n          component: componentName,\n          event: eventName,\n          metadata,\n          context,\n          timestamp: Date.now(),\n        });\n      }\n    },\n    [componentName, context]\n  );\n\n  /**\n   * Track user interactions (alias for trackEvent for consistency)\n   */\n  const trackInteraction = useCallback(\n    (eventName: string, metadata?: Record<string, unknown>) => {\n      trackEvent(eventName, metadata);\n    },\n    [trackEvent]\n  );\n\n  /**\n   * Capture and report errors\n   */\n  const captureError = useCallback(\n    (errorName: string, error: unknown) => {\n      metricsRef.current.errorCount += 1;\n\n      let errorMessage: string;\n      if (error instanceof Error) {\n        errorMessage = error.message;\n      } else if (typeof error === \"string\") {\n        errorMessage = error;\n      } else {\n        errorMessage = String(error);\n      }\n\n      console.error(`‚ùå ${componentName}.${errorName}:`, error);\n\n      // Track error in monitoring (if available)\n      if (globalThis.__DIVINE_PERFORMANCE__) {\n        globalThis.__DIVINE_PERFORMANCE__.recordMetric({\n          component: componentName,\n          operation: errorName,\n          duration: 0,\n          success: false,\n          error: errorMessage,\n          timestamp: Date.now(),\n        });\n      }\n    },\n    [componentName]\n  );\n\n  /**\n   * Get current component metrics\n   */\n  const getMetrics = useCallback((): ComponentMetrics => {\n    return { ...metricsRef.current };\n  }, []);\n\n  return {\n    startMeasurement,\n    trackEvent,\n    trackInteraction,\n    captureError,\n    getMetrics,\n  };\n}\n\n/**\n * DIVINE UTILITY: Create global performance tracking system\n *\n * Initialize this in your root layout or _app.tsx to enable\n * global performance tracking across all components.\n */\nexport function initializeDivinePerformanceTracking() {\n  if (globalThis.window === undefined) return;\n\n  const metrics: DivinePerformanceMetric[] = [];\n\n  globalThis.__DIVINE_PERFORMANCE__ = {\n    recordMetric: (metric: DivinePerformanceMetric) => {\n      metrics.push(metric);\n\n      // Keep only last 1000 metrics\n      if (metrics.length > 1000) {\n        metrics.shift();\n      }\n    },\n    getMetrics: () => metrics,\n    getComponentMetrics: (componentName: string) =>\n      metrics.filter((m) => m.component === componentName),\n    clearMetrics: () => {\n      metrics.length = 0;\n    },\n  };\n\n  globalThis.__DIVINE_ANALYTICS__ = {\n    track: (event: DivineAnalyticsEvent) => {\n      // Integration point for analytics services\n      console.debug(\"üìä Analytics event:\", event);\n    },\n  };\n\n  console.log(\"‚ú® Divine Performance Tracking initialized\");\n}\n"],"version":3}