c08a338d8f8a07d35f7abc93473e7661
"use strict";
/**
 * ðŸŒ¾ AGRICULTURAL CACHE TEST SUITE
 * Comprehensive tests for agricultural-aware caching
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock the cache module
jest.mock("../index", () => ({
    cache: {
        set: jest.fn(),
        get: jest.fn(),
        del: jest.fn(),
        delPattern: jest.fn(),
    },
    CacheKeys: {
        farm: (id) => `farm:${id}`,
        product: (id) => `product:${id}`,
        seasonalData: (season) => `seasonal:${season}`,
    },
}));
const agricultural_cache_1 = require("../agricultural-cache");
const cacheModule = __importStar(require("../index"));
(0, globals_1.describe)("ðŸŒ¾ Agricultural Cache - Seasonal Awareness", () => {
    (0, globals_1.beforeEach)(() => {
        jest.clearAllMocks();
    });
    (0, globals_1.describe)("ðŸ¡ Farm Caching", () => {
        (0, globals_1.it)("should cache farm data", async () => {
            const farmData = { id: "farm-1", name: "Green Valley Farm" };
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", farmData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("farm:farm-1", farmData);
        });
        (0, globals_1.it)("should get cached farm data", async () => {
            const farmData = { id: "farm-1", name: "Green Valley Farm" };
            jest.mocked(cacheModule.cache.get).mockResolvedValue(farmData);
            const result = await agricultural_cache_1.AgriculturalCache.getFarm("farm-1");
            (0, globals_1.expect)(result).toEqual(farmData);
            (0, globals_1.expect)(cacheModule.cache.get).toHaveBeenCalledWith("farm:farm-1");
        });
        (0, globals_1.it)("should return null for cache miss", async () => {
            jest.mocked(cacheModule.cache.get).mockResolvedValue(null);
            const result = await agricultural_cache_1.AgriculturalCache.getFarm("nonexistent");
            (0, globals_1.expect)(result).toBeNull();
        });
        (0, globals_1.it)("should invalidate farm cache", async () => {
            await agricultural_cache_1.AgriculturalCache.invalidateFarm("farm-1");
            (0, globals_1.expect)(cacheModule.cache.del).toHaveBeenCalledWith("farm:farm-1");
            (0, globals_1.expect)(cacheModule.cache.delPattern).toHaveBeenCalledWith("farms:list:*");
        });
        (0, globals_1.it)("should cache multiple farms", async () => {
            const farms = [
                { id: "farm-1", name: "Farm 1" },
                { id: "farm-2", name: "Farm 2" },
                { id: "farm-3", name: "Farm 3" },
            ];
            for (const farm of farms) {
                await agricultural_cache_1.AgriculturalCache.cacheFarm(farm.id, farm);
            }
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledTimes(3);
        });
    });
    (0, globals_1.describe)("ðŸ›’ Product Caching", () => {
        (0, globals_1.it)("should cache product data", async () => {
            const productData = { id: "prod-1", name: "Organic Tomatoes" };
            await agricultural_cache_1.AgriculturalCache.cacheProduct("prod-1", productData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("product:prod-1", productData);
        });
        (0, globals_1.it)("should get cached product data", async () => {
            const productData = { id: "prod-1", name: "Organic Tomatoes" };
            jest.mocked(cacheModule.cache.get).mockResolvedValue(productData);
            const result = await agricultural_cache_1.AgriculturalCache.getProduct("prod-1");
            (0, globals_1.expect)(result).toEqual(productData);
            (0, globals_1.expect)(cacheModule.cache.get).toHaveBeenCalledWith("product:prod-1");
        });
        (0, globals_1.it)("should return null for product cache miss", async () => {
            jest.mocked(cacheModule.cache.get).mockResolvedValue(null);
            const result = await agricultural_cache_1.AgriculturalCache.getProduct("nonexistent");
            (0, globals_1.expect)(result).toBeNull();
        });
        (0, globals_1.it)("should invalidate product cache and related lists", async () => {
            await agricultural_cache_1.AgriculturalCache.invalidateProduct("prod-1", "farm-1");
            (0, globals_1.expect)(cacheModule.cache.del).toHaveBeenCalledWith("product:prod-1");
            (0, globals_1.expect)(cacheModule.cache.delPattern).toHaveBeenCalledWith("products:farm-1:*");
            (0, globals_1.expect)(cacheModule.cache.delPattern).toHaveBeenCalledWith("farms:list:*");
        });
        (0, globals_1.it)("should cache multiple products", async () => {
            const products = [
                { id: "prod-1", name: "Product 1" },
                { id: "prod-2", name: "Product 2" },
                { id: "prod-3", name: "Product 3" },
            ];
            for (const product of products) {
                await agricultural_cache_1.AgriculturalCache.cacheProduct(product.id, product);
            }
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledTimes(3);
        });
    });
    (0, globals_1.describe)("ðŸŒ¸ Seasonal Caching", () => {
        (0, globals_1.it)("should cache SPRING data with correct TTL", async () => {
            const springData = { season: "SPRING", crops: ["lettuce", "peas"] };
            await agricultural_cache_1.AgriculturalCache.cacheSeasonalData("SPRING", springData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("seasonal:SPRING", springData, 3600);
        });
        (0, globals_1.it)("should cache SUMMER data with correct TTL", async () => {
            const summerData = { season: "SUMMER", crops: ["tomatoes", "corn"] };
            await agricultural_cache_1.AgriculturalCache.cacheSeasonalData("SUMMER", summerData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("seasonal:SUMMER", summerData, 7200);
        });
        (0, globals_1.it)("should cache FALL data with correct TTL", async () => {
            const fallData = { season: "FALL", crops: ["pumpkins", "squash"] };
            await agricultural_cache_1.AgriculturalCache.cacheSeasonalData("FALL", fallData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("seasonal:FALL", fallData, 1800);
        });
        (0, globals_1.it)("should cache WINTER data with correct TTL", async () => {
            const winterData = { season: "WINTER", crops: ["kale", "cabbage"] };
            await agricultural_cache_1.AgriculturalCache.cacheSeasonalData("WINTER", winterData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("seasonal:WINTER", winterData, 14400);
        });
        (0, globals_1.it)("should get cached seasonal data", async () => {
            const seasonalData = { season: "SPRING", data: "test" };
            jest.mocked(cacheModule.cache.get).mockResolvedValue(seasonalData);
            const result = await agricultural_cache_1.AgriculturalCache.getSeasonalData("SPRING");
            (0, globals_1.expect)(result).toEqual(seasonalData);
            (0, globals_1.expect)(cacheModule.cache.get).toHaveBeenCalledWith("seasonal:SPRING");
        });
        (0, globals_1.it)("should return null for seasonal cache miss", async () => {
            jest.mocked(cacheModule.cache.get).mockResolvedValue(null);
            const result = await agricultural_cache_1.AgriculturalCache.getSeasonalData("SUMMER");
            (0, globals_1.expect)(result).toBeNull();
        });
        (0, globals_1.it)("should cache all seasons", async () => {
            const seasons = [
                "SPRING",
                "SUMMER",
                "FALL",
                "WINTER",
            ];
            for (const season of seasons) {
                await agricultural_cache_1.AgriculturalCache.cacheSeasonalData(season, { season });
            }
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledTimes(4);
        });
    });
    (0, globals_1.describe)("ðŸ”„ Integration Scenarios", () => {
        (0, globals_1.it)("should handle complete farm workflow", async () => {
            const farmData = { id: "farm-1", name: "Test Farm" };
            // Cache
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", farmData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalled();
            // Get
            jest.mocked(cacheModule.cache.get).mockResolvedValue(farmData);
            const result = await agricultural_cache_1.AgriculturalCache.getFarm("farm-1");
            (0, globals_1.expect)(result).toEqual(farmData);
            // Invalidate
            await agricultural_cache_1.AgriculturalCache.invalidateFarm("farm-1");
            (0, globals_1.expect)(cacheModule.cache.del).toHaveBeenCalled();
        });
        (0, globals_1.it)("should handle complete product workflow", async () => {
            const productData = {
                id: "prod-1",
                name: "Test Product",
                farmId: "farm-1",
            };
            // Cache
            await agricultural_cache_1.AgriculturalCache.cacheProduct("prod-1", productData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalled();
            // Get
            jest.mocked(cacheModule.cache.get).mockResolvedValue(productData);
            const result = await agricultural_cache_1.AgriculturalCache.getProduct("prod-1");
            (0, globals_1.expect)(result).toEqual(productData);
            // Invalidate
            await agricultural_cache_1.AgriculturalCache.invalidateProduct("prod-1", "farm-1");
            (0, globals_1.expect)(cacheModule.cache.del).toHaveBeenCalled();
            (0, globals_1.expect)(cacheModule.cache.delPattern).toHaveBeenCalledTimes(2);
        });
        (0, globals_1.it)("should cache farm with products", async () => {
            const farmData = { id: "farm-1", name: "Farm" };
            const products = [
                { id: "prod-1", name: "Product 1" },
                { id: "prod-2", name: "Product 2" },
            ];
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", farmData);
            for (const product of products) {
                await agricultural_cache_1.AgriculturalCache.cacheProduct(product.id, product);
            }
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledTimes(3);
        });
        (0, globals_1.it)("should cache seasonal data for all seasons", async () => {
            const seasons = [
                "SPRING",
                "SUMMER",
                "FALL",
                "WINTER",
            ];
            for (const season of seasons) {
                await agricultural_cache_1.AgriculturalCache.cacheSeasonalData(season, { data: season });
            }
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledTimes(4);
        });
    });
    (0, globals_1.describe)("ðŸŽ¯ Edge Cases", () => {
        (0, globals_1.it)("should handle empty farm data", async () => {
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", {});
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("farm:farm-1", {});
        });
        (0, globals_1.it)("should handle empty product data", async () => {
            await agricultural_cache_1.AgriculturalCache.cacheProduct("prod-1", {});
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("product:prod-1", {});
        });
        (0, globals_1.it)("should handle null returns gracefully", async () => {
            jest.mocked(cacheModule.cache.get).mockResolvedValue(null);
            const farmResult = await agricultural_cache_1.AgriculturalCache.getFarm("missing");
            const productResult = await agricultural_cache_1.AgriculturalCache.getProduct("missing");
            const seasonResult = await agricultural_cache_1.AgriculturalCache.getSeasonalData("SPRING");
            (0, globals_1.expect)(farmResult).toBeNull();
            (0, globals_1.expect)(productResult).toBeNull();
            (0, globals_1.expect)(seasonResult).toBeNull();
        });
        (0, globals_1.it)("should handle complex nested data", async () => {
            const complexData = {
                id: "farm-1",
                nested: {
                    deep: {
                        value: "test",
                        array: [1, 2, 3],
                    },
                },
            };
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", complexData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("farm:farm-1", complexData);
        });
        (0, globals_1.it)("should handle arrays", async () => {
            const arrayData = [1, 2, 3, 4, 5];
            await agricultural_cache_1.AgriculturalCache.cacheFarm("farm-1", arrayData);
            (0, globals_1.expect)(cacheModule.cache.set).toHaveBeenCalledWith("farm:farm-1", arrayData);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcY2FjaGVcXF9fdGVzdHNfX1xcYWdyaWN1bHR1cmFsLWNhY2hlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCwyQ0FBaUU7QUFJakUsd0JBQXdCO0FBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDM0IsS0FBSyxFQUFFO1FBQ0wsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZCxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNkLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDdEI7SUFDRCxTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsQ0FBQyxFQUFVLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFO1FBQ2xDLE9BQU8sRUFBRSxDQUFDLEVBQVUsRUFBRSxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUU7UUFDeEMsWUFBWSxFQUFFLENBQUMsTUFBYyxFQUFFLEVBQUUsQ0FBQyxZQUFZLE1BQU0sRUFBRTtLQUN2RDtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBaEJKLDhEQUEwRDtBQUMxRCxzREFBd0M7QUFpQnhDLElBQUEsa0JBQVEsRUFBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7SUFDMUQsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsSUFBQSxZQUFFLEVBQUMsd0JBQXdCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdEMsTUFBTSxRQUFRLEdBQUcsRUFBRSxFQUFFLEVB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QUFTLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZELElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUNoRCxhQUFhLEVBQ2IsU0FBUyxDQUNWLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcY2FjaGVcXF9fdGVzdHNfX1xcYWdyaWN1bHR1cmFsLWNhY2hlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDwn4y+IEFHUklDVUxUVVJBTCBDQUNIRSBURVNUIFNVSVRFXG4gKiBDb21wcmVoZW5zaXZlIHRlc3RzIGZvciBhZ3JpY3VsdHVyYWwtYXdhcmUgY2FjaGluZ1xuICovXG5cbmltcG9ydCB7IGJlZm9yZUVhY2gsIGRlc2NyaWJlLCBleHBlY3QsIGl0IH0gZnJvbSBcIkBqZXN0L2dsb2JhbHNcIjtcbmltcG9ydCB7IEFncmljdWx0dXJhbENhY2hlIH0gZnJvbSBcIi4uL2FncmljdWx0dXJhbC1jYWNoZVwiO1xuaW1wb3J0ICogYXMgY2FjaGVNb2R1bGUgZnJvbSBcIi4uL2luZGV4XCI7XG5cbi8vIE1vY2sgdGhlIGNhY2hlIG1vZHVsZVxuamVzdC5tb2NrKFwiLi4vaW5kZXhcIiwgKCkgPT4gKHtcbiAgY2FjaGU6IHtcbiAgICBzZXQ6IGplc3QuZm4oKSxcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICBkZWw6IGplc3QuZm4oKSxcbiAgICBkZWxQYXR0ZXJuOiBqZXN0LmZuKCksXG4gIH0sXG4gIENhY2hlS2V5czoge1xuICAgIGZhcm06IChpZDogc3RyaW5nKSA9PiBgZmFybToke2lkfWAsXG4gICAgcHJvZHVjdDogKGlkOiBzdHJpbmcpID0+IGBwcm9kdWN0OiR7aWR9YCxcbiAgICBzZWFzb25hbERhdGE6IChzZWFzb246IHN0cmluZykgPT4gYHNlYXNvbmFsOiR7c2Vhc29ufWAsXG4gIH0sXG59KSk7XG5cbmRlc2NyaWJlKFwi8J+MviBBZ3JpY3VsdHVyYWwgQ2FjaGUgLSBTZWFzb25hbCBBd2FyZW5lc3NcIiwgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLwn4+hIEZhcm0gQ2FjaGluZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgY2FjaGUgZmFybSBkYXRhXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZhcm1EYXRhID0geyBpZDogXCJmYXJtLTFcIiwgbmFtZTogXCJHcmVlbiBWYWxsZXkgRmFybVwiIH07XG5cbiAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlRmFybShcImZhcm0tMVwiLCBmYXJtRGF0YSk7XG5cbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBcImZhcm06ZmFybS0xXCIsXG4gICAgICAgIGZhcm1EYXRhXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZ2V0IGNhY2hlZCBmYXJtIGRhdGFcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmFybURhdGEgPSB7IGlkOiBcImZhcm0tMVwiLCBuYW1lOiBcIkdyZWVuIFZhbGxleSBGYXJtXCIgfTtcbiAgICAgIGplc3QubW9ja2VkKGNhY2hlTW9kdWxlLmNhY2hlLmdldCkubW9ja1Jlc29sdmVkVmFsdWUoZmFybURhdGEpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5nZXRGYXJtKFwiZmFybS0xXCIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGZhcm1EYXRhKTtcbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiZmFybTpmYXJtLTFcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZXR1cm4gbnVsbCBmb3IgY2FjaGUgbWlzc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5nZXRGYXJtKFwibm9uZXhpc3RlbnRcIik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBpbnZhbGlkYXRlIGZhcm0gY2FjaGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuaW52YWxpZGF0ZUZhcm0oXCJmYXJtLTFcIik7XG5cbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5kZWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiZmFybTpmYXJtLTFcIik7XG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuZGVsUGF0dGVybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJmYXJtczpsaXN0OipcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBtdWx0aXBsZSBmYXJtc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmYXJtcyA9IFtcbiAgICAgICAgeyBpZDogXCJmYXJtLTFcIiwgbmFtZTogXCJGYXJtIDFcIiB9LFxuICAgICAgICB7IGlkOiBcImZhcm0tMlwiLCBuYW1lOiBcIkZhcm0gMlwiIH0sXG4gICAgICAgIHsgaWQ6IFwiZmFybS0zXCIsIG5hbWU6IFwiRmFybSAzXCIgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZmFybSBvZiBmYXJtcykge1xuICAgICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZUZhcm0oZmFybS5pZCwgZmFybSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLwn5uSIFByb2R1Y3QgQ2FjaGluZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgY2FjaGUgcHJvZHVjdCBkYXRhXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3REYXRhID0geyBpZDogXCJwcm9kLTFcIiwgbmFtZTogXCJPcmdhbmljIFRvbWF0b2VzXCIgfTtcblxuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuY2FjaGVQcm9kdWN0KFwicHJvZC0xXCIsIHByb2R1Y3REYXRhKTtcblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwicHJvZHVjdDpwcm9kLTFcIixcbiAgICAgICAgcHJvZHVjdERhdGFcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBnZXQgY2FjaGVkIHByb2R1Y3QgZGF0YVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHsgaWQ6IFwicHJvZC0xXCIsIG5hbWU6IFwiT3JnYW5pYyBUb21hdG9lc1wiIH07XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKHByb2R1Y3REYXRhKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuZ2V0UHJvZHVjdChcInByb2QtMVwiKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChwcm9kdWN0RGF0YSk7XG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcInByb2R1Y3Q6cHJvZC0xXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIG51bGwgZm9yIHByb2R1Y3QgY2FjaGUgbWlzc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5nZXRQcm9kdWN0KFwibm9uZXhpc3RlbnRcIik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBpbnZhbGlkYXRlIHByb2R1Y3QgY2FjaGUgYW5kIHJlbGF0ZWQgbGlzdHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuaW52YWxpZGF0ZVByb2R1Y3QoXCJwcm9kLTFcIiwgXCJmYXJtLTFcIik7XG5cbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5kZWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwicHJvZHVjdDpwcm9kLTFcIik7XG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuZGVsUGF0dGVybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwicHJvZHVjdHM6ZmFybS0xOipcIlxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5kZWxQYXR0ZXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcImZhcm1zOmxpc3Q6KlwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGNhY2hlIG11bHRpcGxlIHByb2R1Y3RzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3RzID0gW1xuICAgICAgICB7IGlkOiBcInByb2QtMVwiLCBuYW1lOiBcIlByb2R1Y3QgMVwiIH0sXG4gICAgICAgIHsgaWQ6IFwicHJvZC0yXCIsIG5hbWU6IFwiUHJvZHVjdCAyXCIgfSxcbiAgICAgICAgeyBpZDogXCJwcm9kLTNcIiwgbmFtZTogXCJQcm9kdWN0IDNcIiB9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBwcm9kdWN0IG9mIHByb2R1Y3RzKSB7XG4gICAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlUHJvZHVjdChwcm9kdWN0LmlkLCBwcm9kdWN0KTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIvCfjLggU2Vhc29uYWwgQ2FjaGluZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgY2FjaGUgU1BSSU5HIGRhdGEgd2l0aCBjb3JyZWN0IFRUTFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzcHJpbmdEYXRhID0geyBzZWFzb246IFwiU1BSSU5HXCIsIGNyb3BzOiBbXCJsZXR0dWNlXCIsIFwicGVhc1wiXSB9O1xuXG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZVNlYXNvbmFsRGF0YShcIlNQUklOR1wiLCBzcHJpbmdEYXRhKTtcblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwic2Vhc29uYWw6U1BSSU5HXCIsXG4gICAgICAgIHNwcmluZ0RhdGEsXG4gICAgICAgIDM2MDBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBTVU1NRVIgZGF0YSB3aXRoIGNvcnJlY3QgVFRMXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN1bW1lckRhdGEgPSB7IHNlYXNvbjogXCJTVU1NRVJcIiwgY3JvcHM6IFtcInRvbWF0b2VzXCIsIFwiY29yblwiXSB9O1xuXG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZVNlYXNvbmFsRGF0YShcIlNVTU1FUlwiLCBzdW1tZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwic2Vhc29uYWw6U1VNTUVSXCIsXG4gICAgICAgIHN1bW1lckRhdGEsXG4gICAgICAgIDcyMDBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBGQUxMIGRhdGEgd2l0aCBjb3JyZWN0IFRUTFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmYWxsRGF0YSA9IHsgc2Vhc29uOiBcIkZBTExcIiwgY3JvcHM6IFtcInB1bXBraW5zXCIsIFwic3F1YXNoXCJdIH07XG5cbiAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlU2Vhc29uYWxEYXRhKFwiRkFMTFwiLCBmYWxsRGF0YSk7XG5cbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBcInNlYXNvbmFsOkZBTExcIixcbiAgICAgICAgZmFsbERhdGEsXG4gICAgICAgIDE4MDBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBXSU5URVIgZGF0YSB3aXRoIGNvcnJlY3QgVFRMXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdpbnRlckRhdGEgPSB7IHNlYXNvbjogXCJXSU5URVJcIiwgY3JvcHM6IFtcImthbGVcIiwgXCJjYWJiYWdlXCJdIH07XG5cbiAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlU2Vhc29uYWxEYXRhKFwiV0lOVEVSXCIsIHdpbnRlckRhdGEpO1xuXG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgXCJzZWFzb25hbDpXSU5URVJcIixcbiAgICAgICAgd2ludGVyRGF0YSxcbiAgICAgICAgMTQ0MDBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBnZXQgY2FjaGVkIHNlYXNvbmFsIGRhdGFcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vhc29uYWxEYXRhID0geyBzZWFzb246IFwiU1BSSU5HXCIsIGRhdGE6IFwidGVzdFwiIH07XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKHNlYXNvbmFsRGF0YSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmdldFNlYXNvbmFsRGF0YShcIlNQUklOR1wiKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChzZWFzb25hbERhdGEpO1xuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJzZWFzb25hbDpTUFJJTkdcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZXR1cm4gbnVsbCBmb3Igc2Vhc29uYWwgY2FjaGUgbWlzc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5nZXRTZWFzb25hbERhdGEoXCJTVU1NRVJcIik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBhbGwgc2Vhc29uc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZWFzb25zOiBBcnJheTxcIlNQUklOR1wiIHwgXCJTVU1NRVJcIiB8IFwiRkFMTFwiIHwgXCJXSU5URVJcIj4gPSBbXG4gICAgICAgIFwiU1BSSU5HXCIsXG4gICAgICAgIFwiU1VNTUVSXCIsXG4gICAgICAgIFwiRkFMTFwiLFxuICAgICAgICBcIldJTlRFUlwiLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBzZWFzb24gb2Ygc2Vhc29ucykge1xuICAgICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZVNlYXNvbmFsRGF0YShzZWFzb24sIHsgc2Vhc29uIH0pO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwi8J+UhCBJbnRlZ3JhdGlvbiBTY2VuYXJpb3NcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBmYXJtIHdvcmtmbG93XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZhcm1EYXRhID0geyBpZDogXCJmYXJtLTFcIiwgbmFtZTogXCJUZXN0IEZhcm1cIiB9O1xuXG4gICAgICAvLyBDYWNoZVxuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuY2FjaGVGYXJtKFwiZmFybS0xXCIsIGZhcm1EYXRhKTtcbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcblxuICAgICAgLy8gR2V0XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKGZhcm1EYXRhKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmdldEZhcm0oXCJmYXJtLTFcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGZhcm1EYXRhKTtcblxuICAgICAgLy8gSW52YWxpZGF0ZVxuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuaW52YWxpZGF0ZUZhcm0oXCJmYXJtLTFcIik7XG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuZGVsKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgY29tcGxldGUgcHJvZHVjdCB3b3JrZmxvd1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHtcbiAgICAgICAgaWQ6IFwicHJvZC0xXCIsXG4gICAgICAgIG5hbWU6IFwiVGVzdCBQcm9kdWN0XCIsXG4gICAgICAgIGZhcm1JZDogXCJmYXJtLTFcIixcbiAgICAgIH07XG5cbiAgICAgIC8vIENhY2hlXG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZVByb2R1Y3QoXCJwcm9kLTFcIiwgcHJvZHVjdERhdGEpO1xuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuXG4gICAgICAvLyBHZXRcbiAgICAgIGplc3QubW9ja2VkKGNhY2hlTW9kdWxlLmNhY2hlLmdldCkubW9ja1Jlc29sdmVkVmFsdWUocHJvZHVjdERhdGEpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuZ2V0UHJvZHVjdChcInByb2QtMVwiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwocHJvZHVjdERhdGEpO1xuXG4gICAgICAvLyBJbnZhbGlkYXRlXG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5pbnZhbGlkYXRlUHJvZHVjdChcInByb2QtMVwiLCBcImZhcm0tMVwiKTtcbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5kZWwpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjYWNoZU1vZHVsZS5jYWNoZS5kZWxQYXR0ZXJuKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjYWNoZSBmYXJtIHdpdGggcHJvZHVjdHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmFybURhdGEgPSB7IGlkOiBcImZhcm0tMVwiLCBuYW1lOiBcIkZhcm1cIiB9O1xuICAgICAgY29uc3QgcHJvZHVjdHMgPSBbXG4gICAgICAgIHsgaWQ6IFwicHJvZC0xXCIsIG5hbWU6IFwiUHJvZHVjdCAxXCIgfSxcbiAgICAgICAgeyBpZDogXCJwcm9kLTJcIiwgbmFtZTogXCJQcm9kdWN0IDJcIiB9LFxuICAgICAgXTtcblxuICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuY2FjaGVGYXJtKFwiZmFybS0xXCIsIGZhcm1EYXRhKTtcblxuICAgICAgZm9yIChjb25zdCBwcm9kdWN0IG9mIHByb2R1Y3RzKSB7XG4gICAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlUHJvZHVjdChwcm9kdWN0LmlkLCBwcm9kdWN0KTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgY2FjaGUgc2Vhc29uYWwgZGF0YSBmb3IgYWxsIHNlYXNvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vhc29uczogQXJyYXk8XCJTUFJJTkdcIiB8IFwiU1VNTUVSXCIgfCBcIkZBTExcIiB8IFwiV0lOVEVSXCI+ID0gW1xuICAgICAgICBcIlNQUklOR1wiLFxuICAgICAgICBcIlNVTU1FUlwiLFxuICAgICAgICBcIkZBTExcIixcbiAgICAgICAgXCJXSU5URVJcIixcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3Qgc2Vhc29uIG9mIHNlYXNvbnMpIHtcbiAgICAgICAgYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuY2FjaGVTZWFzb25hbERhdGEoc2Vhc29uLCB7IGRhdGE6IHNlYXNvbiB9KTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIvCfjq8gRWRnZSBDYXNlc1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIGVtcHR5IGZhcm0gZGF0YVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZUZhcm0oXCJmYXJtLTFcIiwge30pO1xuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJmYXJtOmZhcm0tMVwiLCB7fSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgZW1wdHkgcHJvZHVjdCBkYXRhXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlUHJvZHVjdChcInByb2QtMVwiLCB7fSk7XG4gICAgICBleHBlY3QoY2FjaGVNb2R1bGUuY2FjaGUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcInByb2R1Y3Q6cHJvZC0xXCIsIHt9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBudWxsIHJldHVybnMgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChjYWNoZU1vZHVsZS5jYWNoZS5nZXQpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCBmYXJtUmVzdWx0ID0gYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuZ2V0RmFybShcIm1pc3NpbmdcIik7XG4gICAgICBjb25zdCBwcm9kdWN0UmVzdWx0ID0gYXdhaXQgQWdyaWN1bHR1cmFsQ2FjaGUuZ2V0UHJvZHVjdChcIm1pc3NpbmdcIik7XG4gICAgICBjb25zdCBzZWFzb25SZXN1bHQgPSBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5nZXRTZWFzb25hbERhdGEoXCJTUFJJTkdcIik7XG5cbiAgICAgIGV4cGVjdChmYXJtUmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHByb2R1Y3RSZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3Qoc2Vhc29uUmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIGNvbXBsZXggbmVzdGVkIGRhdGFcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGxleERhdGEgPSB7XG4gICAgICAgIGlkOiBcImZhcm0tMVwiLFxuICAgICAgICBuZXN0ZWQ6IHtcbiAgICAgICAgICBkZWVwOiB7XG4gICAgICAgICAgICB2YWx1ZTogXCJ0ZXN0XCIsXG4gICAgICAgICAgICBhcnJheTogWzEsIDIsIDNdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBBZ3JpY3VsdHVyYWxDYWNoZS5jYWNoZUZhcm0oXCJmYXJtLTFcIiwgY29tcGxleERhdGEpO1xuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwiZmFybTpmYXJtLTFcIixcbiAgICAgICAgY29tcGxleERhdGFcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgYXJyYXlzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFycmF5RGF0YSA9IFsxLCAyLCAzLCA0LCA1XTtcbiAgICAgIGF3YWl0IEFncmljdWx0dXJhbENhY2hlLmNhY2hlRmFybShcImZhcm0tMVwiLCBhcnJheURhdGEpO1xuICAgICAgZXhwZWN0KGNhY2hlTW9kdWxlLmNhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwiZmFybTpmYXJtLTFcIixcbiAgICAgICAgYXJyYXlEYXRhXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXHJcbiJdLCJ2ZXJzaW9uIjozfQ==