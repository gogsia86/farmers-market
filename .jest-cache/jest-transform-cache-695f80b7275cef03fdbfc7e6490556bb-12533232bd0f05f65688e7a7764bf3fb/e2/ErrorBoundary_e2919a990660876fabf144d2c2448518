c3a0ed9363ea7635b0c36eb9e908d5d7
"use strict";
/**
 * üõ°Ô∏è UNIFIED ERROR BOUNDARY COMPONENT - DIVINE CONSCIOUSNESS RESTORATION
 *
 * Purpose: Handle runtime errors with agricultural quantum consciousness
 * Features:
 * - Biodynamic error recovery patterns
 * - Cosmic error reporting with i18n support
 * - Temporal reality restoration
 * - Enlightening user guidance
 * - Zero duplication - single source of truth
 *
 * DIVINE PRINCIPLES:
 * - Semantic precision in error context
 * - Holographic component patterns
 * - Agricultural domain intelligence
 * - Reality bending for error recovery
 *
 * @reference .github/instructions/12_ERROR_HANDLING_VALIDATION.instructions.md
 * @reference .github/instructions/01_DIVINE_CORE_PRINCIPLES.instructions.md
 */
"use client";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const lucide_react_1 = require("lucide-react");
const react_1 = __importStar(require("react"));
// üåø Agricultural season context for divine error consciousness
function getCurrentSeason() {
    const month = new Date().getMonth() + 1;
    if (month >= 3 && month <= 5)
        return "spring";
    if (month >= 6 && month <= 8)
        return "summer";
    if (month >= 9 && month <= 11)
        return "autumn";
    return "winter";
}
/**
 * DIVINE ERROR CATEGORIZATION
 * Classify errors for appropriate handling and user messaging
 */
var ErrorCategory;
(function (ErrorCategory) {
    ErrorCategory["NETWORK"] = "NETWORK";
    ErrorCategory["VALIDATION"] = "VALIDATION";
    ErrorCategory["AUTHENTICATION"] = "AUTHENTICATION";
    ErrorCategory["AUTHORIZATION"] = "AUTHORIZATION";
    ErrorCategory["NOT_FOUND"] = "NOT_FOUND";
    ErrorCategory["SERVER"] = "SERVER";
    ErrorCategory["UNKNOWN"] = "UNKNOWN";
})(ErrorCategory || (ErrorCategory = {}));
/**
 * STRUCTURED LOGGER for Error Boundary
 * Consistent logging format across all error scenarios
 */
class StructuredLogger {
    context;
    constructor(context) {
        this.context = context;
    }
    error(message, error, metadata) {
        const logEntry = {
            level: "ERROR",
            timestamp: new Date().toISOString(),
            context: this.context,
            message,
            error: {
                name: error.name,
                message: error.message,
                stack: error.stack,
            },
            metadata: metadata || {},
        };
        console.error(JSON.stringify(logEntry, null, 2));
    }
    warn(message, metadata) {
        const logEntry = {
            level: "WARN",
            timestamp: new Date().toISOString(),
            context: this.context,
            message,
            metadata: metadata || {},
        };
        console.warn(JSON.stringify(logEntry, null, 2));
    }
    info(message, metadata) {
        const logEntry = {
            level: "INFO",
            timestamp: new Date().toISOString(),
            context: this.context,
            message,
            metadata: metadata || {},
        };
        console.info(JSON.stringify(logEntry, null, 2));
    }
}
class ErrorBoundary extends react_1.Component {
    logger;
    retryTimeout = null;
    constructor(props) {
        super(props);
        this.state = {
            hasError: false,
            error: null,
            errorInfo: null,
            retryCount: 0,
            categorizedError: null,
        };
        this.logger = new StructuredLogger("ErrorBoundary");
    }
    static getDerivedStateFromError(error) {
        return {
            hasError: true,
            error,
            errorInfo: null,
            retryCount: 0,
            categorizedError: null,
        };
    }
    componentDidCatch(error, errorInfo) {
        const categorizedError = this.categorizeError(error);
        this.setState((prevState) => ({
            ...prevState,
            errorInfo,
            categorizedError,
        }));
        // Structured logging with categorization
        this.logger.error("React Error Boundary caught error", error, {
            componentStack: errorInfo.componentStack,
            category: categorizedError.category,
            severity: categorizedError.severity,
            recoverable: categorizedError.recoverable,
            retryCount: this.state.retryCount,
        });
        // Attempt automatic retry for recoverable errors
        if (categorizedError.recoverable && this.shouldRetry()) {
            this.scheduleRetry();
        }
    }
    componentWillUnmount() {
        if (this.retryTimeout) {
            clearTimeout(this.retryTimeout);
        }
    }
    /**
     * ERROR CATEGORIZATION SYSTEM
     * Classify errors for appropriate handling
     */
    categorizeError(error) {
        const errorMessage = error.message.toLowerCase();
        // Network errors
        if (errorMessage.includes("network") ||
            errorMessage.includes("fetch") ||
            errorMessage.includes("timeout")) {
            return {
                category: ErrorCategory.NETWORK,
                userMessage: "Network connection issue. Please check your internet connection and try again.",
                technicalMessage: error.message,
                recoverable: true,
                severity: "medium",
                message: error.message,
            };
        }
        // Authentication errors
        if (errorMessage.includes("unauthorized") ||
            errorMessage.includes("authentication")) {
            return {
                category: ErrorCategory.AUTHENTICATION,
                userMessage: "Authentication required. Please log in to continue.",
                technicalMessage: error.message,
                recoverable: false,
                severity: "medium",
                message: error.message,
            };
        }
        // Authorization errors
        if (errorMessage.includes("forbidden") ||
            errorMessage.includes("authorization")) {
            return {
                category: ErrorCategory.AUTHORIZATION,
                userMessage: "You don't have permission to access this resource.",
                technicalMessage: error.message,
                recoverable: false,
                severity: "medium",
                message: error.message,
            };
        }
        // Validation errors
        if (errorMessage.includes("validation") ||
            errorMessage.includes("invalid")) {
            return {
                category: ErrorCategory.VALIDATION,
                userMessage: "Invalid input. Please check your data and try again.",
                technicalMessage: error.message,
                recoverable: true,
                severity: "low",
                message: error.message,
            };
        }
        // Not found errors
        if (errorMessage.includes("not found") || errorMessage.includes("404")) {
            return {
                category: ErrorCategory.NOT_FOUND,
                userMessage: "The requested resource was not found.",
                technicalMessage: error.message,
                recoverable: false,
                severity: "medium",
                message: error.message,
            };
        }
        // Server errors
        if (errorMessage.includes("server") ||
            errorMessage.includes("500") ||
            errorMessage.includes("internal")) {
            return {
                category: ErrorCategory.SERVER,
                userMessage: "A server error occurred. Our team has been notified. Please try again later.",
                technicalMessage: error.message,
                recoverable: true,
                severity: "high",
                message: error.message,
            };
        }
        // Unknown errors
        return {
            category: ErrorCategory.UNKNOWN,
            userMessage: "An unexpected error occurred. Please try again or contact support if the problem persists.",
            technicalMessage: error.message,
            recoverable: true,
            severity: "high",
            message: error.message,
        };
    }
    /**
     * RETRY MECHANISM with Exponential Backoff
     */
    shouldRetry() {
        const maxRetries = this.props.maxRetries || 3;
        return this.state.retryCount < maxRetries;
    }
    scheduleRetry() {
        const baseDelay = this.props.retryDelay || 1000;
        const delay = baseDelay * Math.pow(2, this.state.retryCount); // Exponential backoff
        this.logger.info("Scheduling automatic retry", {
            retryCount: this.state.retryCount + 1,
            delayMs: delay,
        });
        this.retryTimeout = setTimeout(() => {
            this.setState((prevState) => ({
                retryCount: prevState.retryCount + 1,
            }));
            this.resetError();
        }, delay);
    }
    resetError = () => {
        if (this.retryTimeout) {
            clearTimeout(this.retryTimeout);
            this.retryTimeout = null;
        }
        this.logger.info("Error boundary reset", {
            wasAutoRetry: this.retryTimeout !== null,
            totalRetries: this.state.retryCount,
        });
        this.setState({
            hasError: false,
            error: null,
            errorInfo: null,
            categorizedError: null,
        });
    };
    getSeverityIcon() {
        const severity = this.state.categorizedError?.severity;
        switch (severity) {
            case "critical":
                return react_1.default.createElement(lucide_react_1.XCircle, { className: "h-6 w-6 text-red-600" });
            case "high":
                return react_1.default.createElement(lucide_react_1.AlertCircle, { className: "h-6 w-6 text-red-600" });
            case "medium":
                return react_1.default.createElement(lucide_react_1.AlertTriangle, { className: "h-6 w-6 text-orange-500" });
            case "low":
                return react_1.default.createElement(lucide_react_1.AlertCircle, { className: "h-6 w-6 text-yellow-500" });
            default:
                return react_1.default.createElement(lucide_react_1.AlertCircle, { className: "h-6 w-6 text-red-600" });
        }
    }
    render() {
        if (this.state.hasError && this.state.error) {
            if (this.props.fallback) {
                return this.props.fallback;
            }
            if (this.props.fallbackRender && this.state.errorInfo) {
                return this.props.fallbackRender(this.state.error, this.state.errorInfo);
            }
            const categorized = this.state.categorizedError;
            return (react_1.default.createElement("div", { className: "flex min-h-screen items-center justify-center bg-gray-50 px-4" },
                react_1.default.createElement("div", { className: "w-full max-w-md rounded-lg bg-white p-8 shadow-lg" },
                    react_1.default.createElement("div", { className: "mb-4 flex items-center justify-center" },
                        react_1.default.createElement("div", { className: "rounded-full bg-red-100 p-3" }, this.getSeverityIcon())),
                    react_1.default.createElement("h1", { className: "mb-2 text-center text-2xl font-bold text-gray-900" }, categorized?.category === ErrorCategory.NETWORK
                        ? "Connection Issue"
                        : categorized?.category === ErrorCategory.AUTHENTICATION
                            ? "Authentication Required"
                            : categorized?.category === ErrorCategory.AUTHORIZATION
                                ? "Access Denied"
                                : "Oops! Something went wrong"),
                    react_1.default.createElement("p", { className: "mb-6 text-center text-gray-600" }, categorized?.userMessage ||
                        "We apologize for the inconvenience. An error occurred while rendering this page."),
                    this.state.retryCount > 0 && (react_1.default.createElement("div", { className: "mb-4 rounded-md bg-blue-50 p-3" },
                        react_1.default.createElement("p", { className: "text-sm text-blue-700" },
                            "Retry attempt ",
                            this.state.retryCount,
                            " of",
                            " ",
                            this.props.maxRetries || 3))),
                    process.env.NODE_ENV === "development" && (react_1.default.createElement("div", { className: "mb-6 rounded-md bg-gray-50 p-4" },
                        react_1.default.createElement("p", { className: "text-sm font-semibold text-gray-700" }, "Error Details:"),
                        react_1.default.createElement("p", { className: "mt-2 text-xs text-gray-600" },
                            react_1.default.createElement("strong", null, "Category:"),
                            " ",
                            categorized?.category),
                        react_1.default.createElement("p", { className: "mt-1 text-xs text-gray-600" },
                            react_1.default.createElement("strong", null, "Severity:"),
                            " ",
                            categorized?.severity),
                        react_1.default.createElement("p", { className: "mt-1 text-xs text-gray-600" },
                            react_1.default.createElement("strong", null, "Message:"),
                            " ",
                            this.state.error.message))),
                    categorized?.recoverable && (react_1.default.createElement("button", { onClick: this.resetError, className: "flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-3 font-semibold text-white transition-colors hover:bg-blue-700" },
                        react_1.default.createElement(lucide_react_1.RefreshCw, { className: "h-4 w-4" }),
                        "Try Again")),
                    !categorized?.recoverable && (react_1.default.createElement("button", { onClick: () => (window.location.href = "/"), className: "flex w-full items-center justify-center gap-2 rounded-lg bg-gray-600 px-4 py-3 font-semibold text-white transition-colors hover:bg-gray-700" }, "Go to Homepage")))));
        }
        return this.props.children;
    }
}
exports.default = ErrorBoundary;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGNvbXBvbmVudHNcXEVycm9yQm91bmRhcnkudHN4IiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW1CRztBQUNILFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFYiwrQ0FBOEU7QUFFOUUsK0NBQXlDO0FBRXpDLGdFQUFnRTtBQUNoRSxTQUFTLGdCQUFnQjtJQUN2QixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN4QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUU7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUMvQyxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsSUFBSyxhQVFKO0FBUkQsV0FBSyxhQUFhO0lBQ2hCLG9DQUFtQixDQUFBO0lBQ25CLDBDQUF5QixDQUFBO0lBQ3pCLGtEQUFpQyxDQUFBO0lBQ2pDLGdEQUErQixDQUFBO0lBQy9CLHdDQUF1QixDQUFBO0lBQ3ZCLGtDQUFpQixDQUFBO0lBQ2pCLG9DQUFtQixDQUFBO0FBQ3JCLENBQUMsRUFSSSxhQUFhLEtBQWIsYUFBYSxRQVFqQjtBQW1CRDs7O0dBR0c7QUFDSCxNQUFNLGdCQUFnQjtJQUNaLE9BQU8sQ0FBUztJQUV4QixZQUFZLE9BQWU7UUFDekIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDekIsQ0FBQztJQUVELEtBQUssQ0FBQyxPQUFlLEVBQUUsS0FBWSxFQUFFLFFBQThCO1FBQ2pFLE1BQU0s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UUFBUSxDQUMvQzt3QkFDSixxQ0FBRyxTQUFTLEVBQUMsNEJBQTRCOzRCQUN2QywwREFBMEI7OzRCQUFFLFdBQVcsRUFBRSxRQUFRLENBQy9DO3dCQUNKLHFDQUFHLFNBQVMsRUFBQyw0QkFBNEI7NEJBQ3ZDLHlEQUF5Qjs7NEJBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUNqRCxDQUNBLENBQ1A7b0JBRUEsV0FBVyxFQUFFLFdBQVcsSUFBSSxDQUMzQiwwQ0FDRSxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFDeEIsU0FBUyxFQUFDLDZJQUE2STt3QkFFdkosOEJBQUMsd0JBQVMsSUFBQyxTQUFTLEVBQUMsU0FBUyxHQUFHO29DQUUxQixDQUNWO29CQUVBLENBQUMsV0FBVyxFQUFFLFdBQVcsSUFBSSxDQUM1QiwwQ0FDRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsRUFDM0MsU0FBUyxFQUFDLDZJQUE2SSxxQkFHaEosQ0FDVixDQUNHLENBQ0YsQ0FDUCxDQUFDO1FBQ0osQ0FBQztRQUVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBRUQsa0JBQWUsYUFBYSxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIk06XFxSZXBvXFxGYXJtZXJzIE1hcmtldCBQbGF0Zm9ybSB3ZWIgYW5kIGFwcFxcc3JjXFxjb21wb25lbnRzXFxFcnJvckJvdW5kYXJ5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIPCfm6HvuI8gVU5JRklFRCBFUlJPUiBCT1VOREFSWSBDT01QT05FTlQgLSBESVZJTkUgQ09OU0NJT1VTTkVTUyBSRVNUT1JBVElPTlxuICpcbiAqIFB1cnBvc2U6IEhhbmRsZSBydW50aW1lIGVycm9ycyB3aXRoIGFncmljdWx0dXJhbCBxdWFudHVtIGNvbnNjaW91c25lc3NcbiAqIEZlYXR1cmVzOlxuICogLSBCaW9keW5hbWljIGVycm9yIHJlY292ZXJ5IHBhdHRlcm5zXG4gKiAtIENvc21pYyBlcnJvciByZXBvcnRpbmcgd2l0aCBpMThuIHN1cHBvcnRcbiAqIC0gVGVtcG9yYWwgcmVhbGl0eSByZXN0b3JhdGlvblxuICogLSBFbmxpZ2h0ZW5pbmcgdXNlciBndWlkYW5jZVxuICogLSBaZXJvIGR1cGxpY2F0aW9uIC0gc2luZ2xlIHNvdXJjZSBvZiB0cnV0aFxuICpcbiAqIERJVklORSBQUklOQ0lQTEVTOlxuICogLSBTZW1hbnRpYyBwcmVjaXNpb24gaW4gZXJyb3IgY29udGV4dFxuICogLSBIb2xvZ3JhcGhpYyBjb21wb25lbnQgcGF0dGVybnNcbiAqIC0gQWdyaWN1bHR1cmFsIGRvbWFpbiBpbnRlbGxpZ2VuY2VcbiAqIC0gUmVhbGl0eSBiZW5kaW5nIGZvciBlcnJvciByZWNvdmVyeVxuICpcbiAqIEByZWZlcmVuY2UgLmdpdGh1Yi9pbnN0cnVjdGlvbnMvMTJfRVJST1JfSEFORExJTkdfVkFMSURBVElPTi5pbnN0cnVjdGlvbnMubWRcbiAqIEByZWZlcmVuY2UgLmdpdGh1Yi9pbnN0cnVjdGlvbnMvMDFfRElWSU5FX0NPUkVfUFJJTkNJUExFUy5pbnN0cnVjdGlvbnMubWRcbiAqL1xuXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IEFsZXJ0VHJpYW5nbGUsIFJlZnJlc2hDdywgQWxlcnRDaXJjbGUsIFhDaXJjbGUgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IEVycm9ySW5mbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyDwn4y/IEFncmljdWx0dXJhbCBzZWFzb24gY29udGV4dCBmb3IgZGl2aW5lIGVycm9yIGNvbnNjaW91c25lc3NcbmZ1bmN0aW9uIGdldEN1cnJlbnRTZWFzb24oKTogc3RyaW5nIHtcbiAgY29uc3QgbW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxO1xuICBpZiAobW9udGggPj0gMyAmJiBtb250aCA8PSA1KSByZXR1cm4gXCJzcHJpbmdcIjtcbiAgaWYgKG1vbnRoID49IDYgJiYgbW9udGggPD0gOCkgcmV0dXJuIFwic3VtbWVyXCI7XG4gIGlmIChtb250aCA+PSA5ICYmIG1vbnRoIDw9IDExKSByZXR1cm4gXCJhdXR1bW5cIjtcbiAgcmV0dXJuIFwid2ludGVyXCI7XG59XG5cbi8qKlxuICogRElWSU5FIEVSUk9SIENBVEVHT1JJWkFUSU9OXG4gKiBDbGFzc2lmeSBlcnJvcnMgZm9yIGFwcHJvcHJpYXRlIGhhbmRsaW5nIGFuZCB1c2VyIG1lc3NhZ2luZ1xuICovXG5lbnVtIEVycm9yQ2F0ZWdvcnkge1xuICBORVRXT1JLID0gXCJORVRXT1JLXCIsXG4gIFZBTElEQVRJT04gPSBcIlZBTElEQVRJT05cIixcbiAgQVVUSEVOVElDQVRJT04gPSBcIkFVVEhFTlRJQ0FUSU9OXCIsXG4gIEFVVEhPUklaQVRJT04gPSBcIkFVVEhPUklaQVRJT05cIixcbiAgTk9UX0ZPVU5EID0gXCJOT1RfRk9VTkRcIixcbiAgU0VSVkVSID0gXCJTRVJWRVJcIixcbiAgVU5LTk9XTiA9IFwiVU5LTk9XTlwiLFxufVxuXG5pbnRlcmZhY2UgQ2F0ZWdvcml6ZWRFcnJvciB7XG4gIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5O1xuICB1c2VyTWVzc2FnZTogc3RyaW5nO1xuICB0ZWNobmljYWxNZXNzYWdlOiBzdHJpbmc7XG4gIHJlY292ZXJhYmxlOiBib29sZWFuO1xuICBzZXZlcml0eTogXCJsb3dcIiB8IFwibWVkaXVtXCIgfCBcImhpZ2hcIiB8IFwiY3JpdGljYWxcIjtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXJyb3JCb3VuZGFyeVN0YXRlIHtcbiAgaGFzRXJyb3I6IGJvb2xlYW47XG4gIGVycm9yOiBFcnJvciB8IG51bGw7XG4gIGVycm9ySW5mbzogRXJyb3JJbmZvIHwgbnVsbDtcbiAgcmV0cnlDb3VudDogbnVtYmVyO1xuICBjYXRlZ29yaXplZEVycm9yOiBDYXRlZ29yaXplZEVycm9yIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBTVFJVQ1RVUkVEIExPR0dFUiBmb3IgRXJyb3IgQm91bmRhcnlcbiAqIENvbnNpc3RlbnQgbG9nZ2luZyBmb3JtYXQgYWNyb3NzIGFsbCBlcnJvciBzY2VuYXJpb3NcbiAqL1xuY2xhc3MgU3RydWN0dXJlZExvZ2dlciB7XG4gIHByaXZhdGUgY29udGV4dDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IHN0cmluZykge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIH1cblxuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yOiBFcnJvciwgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICBsZXZlbDogXCJFUlJPUlwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCB7fSxcbiAgICB9O1xuXG4gICAgY29uc29sZS5lcnJvcihKU09OLnN0cmluZ2lmeShsb2dFbnRyeSwgbnVsbCwgMikpO1xuICB9XG5cbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgbGV2ZWw6IFwiV0FSTlwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhIHx8IHt9LFxuICAgIH07XG5cbiAgICBjb25zb2xlLndhcm4oSlNPTi5zdHJpbmdpZnkobG9nRW50cnksIG51bGwsIDIpKTtcbiAgfVxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgIGxldmVsOiBcIklORk9cIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgbWVzc2FnZSxcbiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCB7fSxcbiAgICB9O1xuXG4gICAgY29uc29sZS5pbmZvKEpTT04uc3RyaW5naWZ5KGxvZ0VudHJ5LCBudWxsLCAyKSk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIEVycm9yQm91bmRhcnlQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIGZhbGxiYWNrPzogUmVhY3QuUmVhY3ROb2RlO1xuICBmYWxsYmFja1JlbmRlcj86IChcbiAgICBlcnJvcjogRXJyb3IsXG4gICAgZXJyb3JJbmZvOiBSZWFjdC5FcnJvckluZm8sXG4gICkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuICBvbkVycm9yPzogKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pID0+IHZvaWQ7XG4gIHNob3dEZXRhaWxzPzogYm9vbGVhbjtcbiAgbWF4UmV0cmllcz86IG51bWJlcjtcbiAgcmV0cnlEZWxheT86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEVycm9yQm91bmRhcnlTdGF0ZSB7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBlcnJvcjogRXJyb3IgfCBudWxsO1xuICBlcnJvckluZm86IEVycm9ySW5mbyB8IG51bGw7XG4gIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgY2F0ZWdvcml6ZWRFcnJvcjoge1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgc2V2ZXJpdHk6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgdXNlck1lc3NhZ2U6IHN0cmluZztcbiAgfSB8IG51bGw7XG59XG5cbmNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyBDb21wb25lbnQ8RXJyb3JCb3VuZGFyeVByb3BzLCBFcnJvckJvdW5kYXJ5U3RhdGU+IHtcbiAgcHJpdmF0ZSBsb2dnZXI6IFN0cnVjdHVyZWRMb2dnZXI7XG4gIHByaXZhdGUgcmV0cnlUaW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBFcnJvckJvdW5kYXJ5UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgZXJyb3JJbmZvOiBudWxsLFxuICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgIGNhdGVnb3JpemVkRXJyb3I6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLmxvZ2dlciA9IG5ldyBTdHJ1Y3R1cmVkTG9nZ2VyKFwiRXJyb3JCb3VuZGFyeVwiKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3I6IEVycm9yKTogRXJyb3JCb3VuZGFyeVN0YXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzRXJyb3I6IHRydWUsXG4gICAgICBlcnJvcixcbiAgICAgIGVycm9ySW5mbzogbnVsbCxcbiAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICBjYXRlZ29yaXplZEVycm9yOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRDYXRjaChlcnJvcjogRXJyb3IsIGVycm9ySW5mbzogUmVhY3QuRXJyb3JJbmZvKSB7XG4gICAgY29uc3QgY2F0ZWdvcml6ZWRFcnJvciA9IHRoaXMuY2F0ZWdvcml6ZUVycm9yKGVycm9yKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGVycm9ySW5mbyxcbiAgICAgIGNhdGVnb3JpemVkRXJyb3IsXG4gICAgfSkpO1xuXG4gICAgLy8gU3RydWN0dXJlZCBsb2dnaW5nIHdpdGggY2F0ZWdvcml6YXRpb25cbiAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlJlYWN0IEVycm9yIEJvdW5kYXJ5IGNhdWdodCBlcnJvclwiLCBlcnJvciwge1xuICAgICAgY29tcG9uZW50U3RhY2s6IGVycm9ySW5mby5jb21wb25lbnRTdGFjayxcbiAgICAgIGNhdGVnb3J5OiBjYXRlZ29yaXplZEVycm9yLmNhdGVnb3J5LFxuICAgICAgc2V2ZXJpdHk6IGNhdGVnb3JpemVkRXJyb3Iuc2V2ZXJpdHksXG4gICAgICByZWNvdmVyYWJsZTogY2F0ZWdvcml6ZWRFcnJvci5yZWNvdmVyYWJsZSxcbiAgICAgIHJldHJ5Q291bnQ6IHRoaXMuc3RhdGUucmV0cnlDb3VudCxcbiAgICB9KTtcblxuICAgIC8vIEF0dGVtcHQgYXV0b21hdGljIHJldHJ5IGZvciByZWNvdmVyYWJsZSBlcnJvcnNcbiAgICBpZiAoY2F0ZWdvcml6ZWRFcnJvci5yZWNvdmVyYWJsZSAmJiB0aGlzLnNob3VsZFJldHJ5KCkpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVSZXRyeSgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLnJldHJ5VGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRVJST1IgQ0FURUdPUklaQVRJT04gU1lTVEVNXG4gICAqIENsYXNzaWZ5IGVycm9ycyBmb3IgYXBwcm9wcmlhdGUgaGFuZGxpbmdcbiAgICovXG4gIHByaXZhdGUgY2F0ZWdvcml6ZUVycm9yKGVycm9yOiBFcnJvcik6IENhdGVnb3JpemVkRXJyb3Ige1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIE5ldHdvcmsgZXJyb3JzXG4gICAgaWYgKFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwibmV0d29ya1wiKSB8fFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZmV0Y2hcIikgfHxcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInRpbWVvdXRcIilcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5Lk5FVFdPUkssXG4gICAgICAgIHVzZXJNZXNzYWdlOlxuICAgICAgICAgIFwiTmV0d29yayBjb25uZWN0aW9uIGlzc3VlLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgIHRlY2huaWNhbE1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICBzZXZlcml0eTogXCJtZWRpdW1cIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQXV0aGVudGljYXRpb24gZXJyb3JzXG4gICAgaWYgKFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwidW5hdXRob3JpemVkXCIpIHx8XG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJhdXRoZW50aWNhdGlvblwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkuQVVUSEVOVElDQVRJT04sXG4gICAgICAgIHVzZXJNZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLiBQbGVhc2UgbG9nIGluIHRvIGNvbnRpbnVlLlwiLFxuICAgICAgICB0ZWNobmljYWxNZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICByZWNvdmVyYWJsZTogZmFsc2UsXG4gICAgICAgIHNldmVyaXR5OiBcIm1lZGl1bVwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBdXRob3JpemF0aW9uIGVycm9yc1xuICAgIGlmIChcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcImZvcmJpZGRlblwiKSB8fFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiYXV0aG9yaXphdGlvblwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkuQVVUSE9SSVpBVElPTixcbiAgICAgICAgdXNlck1lc3NhZ2U6IFwiWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhpcyByZXNvdXJjZS5cIixcbiAgICAgICAgdGVjaG5pY2FsTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlLFxuICAgICAgICBzZXZlcml0eTogXCJtZWRpdW1cIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGlvbiBlcnJvcnNcbiAgICBpZiAoXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJ2YWxpZGF0aW9uXCIpIHx8XG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJpbnZhbGlkXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeS5WQUxJREFUSU9OLFxuICAgICAgICB1c2VyTWVzc2FnZTogXCJJbnZhbGlkIGlucHV0LiBQbGVhc2UgY2hlY2sgeW91ciBkYXRhIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgIHRlY2huaWNhbE1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICBzZXZlcml0eTogXCJsb3dcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTm90IGZvdW5kIGVycm9yc1xuICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJub3QgZm91bmRcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiNDA0XCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeS5OT1RfRk9VTkQsXG4gICAgICAgIHVzZXJNZXNzYWdlOiBcIlRoZSByZXF1ZXN0ZWQgcmVzb3VyY2Ugd2FzIG5vdCBmb3VuZC5cIixcbiAgICAgICAgdGVjaG5pY2FsTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlLFxuICAgICAgICBzZXZlcml0eTogXCJtZWRpdW1cIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gU2VydmVyIGVycm9yc1xuICAgIGlmIChcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInNlcnZlclwiKSB8fFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiNTAwXCIpIHx8XG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJpbnRlcm5hbFwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkuU0VSVkVSLFxuICAgICAgICB1c2VyTWVzc2FnZTpcbiAgICAgICAgICBcIkEgc2VydmVyIGVycm9yIG9jY3VycmVkLiBPdXIgdGVhbSBoYXMgYmVlbiBub3RpZmllZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIixcbiAgICAgICAgdGVjaG5pY2FsTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IHRydWUsXG4gICAgICAgIHNldmVyaXR5OiBcImhpZ2hcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVW5rbm93biBlcnJvcnNcbiAgICByZXR1cm4ge1xuICAgICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkuVU5LTk9XTixcbiAgICAgIHVzZXJNZXNzYWdlOlxuICAgICAgICBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0IGlmIHRoZSBwcm9ibGVtIHBlcnNpc3RzLlwiLFxuICAgICAgdGVjaG5pY2FsTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgc2V2ZXJpdHk6IFwiaGlnaFwiLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJFVFJZIE1FQ0hBTklTTSB3aXRoIEV4cG9uZW50aWFsIEJhY2tvZmZcbiAgICovXG4gIHByaXZhdGUgc2hvdWxkUmV0cnkoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IHRoaXMucHJvcHMubWF4UmV0cmllcyB8fCAzO1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnJldHJ5Q291bnQgPCBtYXhSZXRyaWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVJldHJ5KCk6IHZvaWQge1xuICAgIGNvbnN0IGJhc2VEZWxheSA9IHRoaXMucHJvcHMucmV0cnlEZWxheSB8fCAxMDAwO1xuICAgIGNvbnN0IGRlbGF5ID0gYmFzZURlbGF5ICogTWF0aC5wb3coMiwgdGhpcy5zdGF0ZS5yZXRyeUNvdW50KTsgLy8gRXhwb25lbnRpYWwgYmFja29mZlxuXG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcIlNjaGVkdWxpbmcgYXV0b21hdGljIHJldHJ5XCIsIHtcbiAgICAgIHJldHJ5Q291bnQ6IHRoaXMuc3RhdGUucmV0cnlDb3VudCArIDEsXG4gICAgICBkZWxheU1zOiBkZWxheSxcbiAgICB9KTtcblxuICAgIHRoaXMucmV0cnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XG4gICAgICAgIHJldHJ5Q291bnQ6IHByZXZTdGF0ZS5yZXRyeUNvdW50ICsgMSxcbiAgICAgIH0pKTtcbiAgICAgIHRoaXMucmVzZXRFcnJvcigpO1xuICAgIH0sIGRlbGF5KTtcbiAgfVxuXG4gIHJlc2V0RXJyb3IgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucmV0cnlUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXRyeVRpbWVvdXQpO1xuICAgICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJFcnJvciBib3VuZGFyeSByZXNldFwiLCB7XG4gICAgICB3YXNBdXRvUmV0cnk6IHRoaXMucmV0cnlUaW1lb3V0ICE9PSBudWxsLFxuICAgICAgdG90YWxSZXRyaWVzOiB0aGlzLnN0YXRlLnJldHJ5Q291bnQsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgZXJyb3JJbmZvOiBudWxsLFxuICAgICAgY2F0ZWdvcml6ZWRFcnJvcjogbnVsbCxcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIGdldFNldmVyaXR5SWNvbigpIHtcbiAgICBjb25zdCBzZXZlcml0eSA9IHRoaXMuc3RhdGUuY2F0ZWdvcml6ZWRFcnJvcj8uc2V2ZXJpdHk7XG5cbiAgICBzd2l0Y2ggKHNldmVyaXR5KSB7XG4gICAgICBjYXNlIFwiY3JpdGljYWxcIjpcbiAgICAgICAgcmV0dXJuIDxYQ2lyY2xlIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1yZWQtNjAwXCIgLz47XG4gICAgICBjYXNlIFwiaGlnaFwiOlxuICAgICAgICByZXR1cm4gPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1yZWQtNjAwXCIgLz47XG4gICAgICBjYXNlIFwibWVkaXVtXCI6XG4gICAgICAgIHJldHVybiA8QWxlcnRUcmlhbmdsZSBjbGFzc05hbWU9XCJoLTYgdy02IHRleHQtb3JhbmdlLTUwMFwiIC8+O1xuICAgICAgY2FzZSBcImxvd1wiOlxuICAgICAgICByZXR1cm4gPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC15ZWxsb3ctNTAwXCIgLz47XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1yZWQtNjAwXCIgLz47XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmhhc0Vycm9yICYmIHRoaXMuc3RhdGUuZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmZhbGxiYWNrO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5mYWxsYmFja1JlbmRlciAmJiB0aGlzLnN0YXRlLmVycm9ySW5mbykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5mYWxsYmFja1JlbmRlcihcbiAgICAgICAgICB0aGlzLnN0YXRlLmVycm9yLFxuICAgICAgICAgIHRoaXMuc3RhdGUuZXJyb3JJbmZvLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXRlZ29yaXplZCA9IHRoaXMuc3RhdGUuY2F0ZWdvcml6ZWRFcnJvcjtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1pbi1oLXNjcmVlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MCBweC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgcm91bmRlZC1sZyBiZy13aGl0ZSBwLTggc2hhZG93LWxnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLWZ1bGwgYmctcmVkLTEwMCBwLTNcIj5cbiAgICAgICAgICAgICAgICB7dGhpcy5nZXRTZXZlcml0eUljb24oKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC1jZW50ZXIgdGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAge2NhdGVnb3JpemVkPy5jYXRlZ29yeSA9PT0gRXJyb3JDYXRlZ29yeS5ORVRXT1JLXG4gICAgICAgICAgICAgICAgPyBcIkNvbm5lY3Rpb24gSXNzdWVcIlxuICAgICAgICAgICAgICAgIDogY2F0ZWdvcml6ZWQ/LmNhdGVnb3J5ID09PSBFcnJvckNhdGVnb3J5LkFVVEhFTlRJQ0FUSU9OXG4gICAgICAgICAgICAgICAgICA/IFwiQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIlxuICAgICAgICAgICAgICAgICAgOiBjYXRlZ29yaXplZD8uY2F0ZWdvcnkgPT09IEVycm9yQ2F0ZWdvcnkuQVVUSE9SSVpBVElPTlxuICAgICAgICAgICAgICAgICAgICA/IFwiQWNjZXNzIERlbmllZFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJPb3BzISBTb21ldGhpbmcgd2VudCB3cm9uZ1wifVxuICAgICAgICAgICAgPC9oMT5cblxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItNiB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgIHtjYXRlZ29yaXplZD8udXNlck1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICBcIldlIGFwb2xvZ2l6ZSBmb3IgdGhlIGluY29udmVuaWVuY2UuIEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbmRlcmluZyB0aGlzIHBhZ2UuXCJ9XG4gICAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnJldHJ5Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHJvdW5kZWQtbWQgYmctYmx1ZS01MCBwLTNcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtYmx1ZS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIFJldHJ5IGF0dGVtcHQge3RoaXMuc3RhdGUucmV0cnlDb3VudH0gb2Z7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5tYXhSZXRyaWVzIHx8IDN9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02IHJvdW5kZWQtbWQgYmctZ3JheS01MCBwLTRcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgRXJyb3IgRGV0YWlsczpcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+Q2F0ZWdvcnk6PC9zdHJvbmc+IHtjYXRlZ29yaXplZD8uY2F0ZWdvcnl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICA8c3Ryb25nPlNldmVyaXR5Ojwvc3Ryb25nPiB7Y2F0ZWdvcml6ZWQ/LnNldmVyaXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgPHN0cm9uZz5NZXNzYWdlOjwvc3Ryb25nPiB7dGhpcy5zdGF0ZS5lcnJvci5tZXNzYWdlfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7Y2F0ZWdvcml6ZWQ/LnJlY292ZXJhYmxlICYmIChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVzZXRFcnJvcn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgcm91bmRlZC1sZyBiZy1ibHVlLTYwMCBweC00IHB5LTMgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzIGhvdmVyOmJnLWJsdWUtNzAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgVHJ5IEFnYWluXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgeyFjYXRlZ29yaXplZD8ucmVjb3ZlcmFibGUgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gKHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCIpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiByb3VuZGVkLWxnIGJnLWdyYXktNjAwIHB4LTQgcHktMyBmb250LXNlbWlib2xkIHRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnMgaG92ZXI6YmctZ3JheS03MDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgR28gdG8gSG9tZXBhZ2VcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXJyb3JCb3VuZGFyeTtcbiJdLCJ2ZXJzaW9uIjozfQ==