{"file":"M:\\Repo\\Farmers Market Platform web and app\\src\\__tests__\\services\\order.service.test.ts","mappings":"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","names":[],"sources":["M:\\Repo\\Farmers Market Platform web and app\\src\\__tests__\\services\\order.service.test.ts"],"sourcesContent":["// src/__tests__/services/order.service.test.ts\n\nimport { database } from \"@/lib/database\";\nimport type { CreateOrderInput } from \"@/lib/services/order.service\";\nimport { OrderService } from \"@/lib/services/order.service\";\nimport { afterEach, beforeEach, describe, expect, it } from \"@jest/globals\";\n\n// Mock database\njest.mock(\"@/lib/database\", () => ({\n  database: {\n    order: {\n      create: jest.fn(),\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      update: jest.fn(),\n    },\n  },\n}));\n\ndescribe(\"OrderService - Divine Order Management\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"createOrder\", () => {\n    it(\"creates order with items\", async () => {\n      const mockInput: CreateOrderInput = {\n        userId: \"user-123\",\n        farmId: \"farm-456\",\n        items: [\n          { productId: \"prod-1\", quantity: 2, price: 10 },\n          { productId: \"prod-2\", quantity: 1, price: 20 },\n        ],\n        shippingAddress: {\n          street: \"123 Main St\",\n          city: \"Portland\",\n          state: \"OR\",\n          zipCode: \"97201\",\n        },\n        paymentMethod: \"CREDIT_CARD\",\n      };\n\n      const mockResult = {\n        id: \"order-1\",\n        orderNumber: \"ORD-123\",\n        items: [],\n        farm: { id: \"farm-456\", name: \"Test Farm\" },\n        user: { id: \"user-123\", name: \"Test User\", email: \"test@test.com\" },\n      };\n\n      (database.order.create as any).mockResolvedValue(mockResult);\n\n      const result = await OrderService.createOrder(mockInput);\n\n      expect(result).toEqual(mockResult);\n      expect(database.order.create).toHaveBeenCalled();\n    });\n  });\n\n  describe(\"getOrderById\", () => {\n    it(\"retrieves order by ID\", async () => {\n      const mockOrder = {\n        id: \"order-123\",\n        items: [],\n        farm: { id: \"farm-1\", name: \"Farm\" },\n        user: { id: \"user-1\", name: \"User\", email: \"user@test.com\" },\n      };\n\n      (database.order.findUnique as any).mockResolvedValue(mockOrder);\n\n      const result = await OrderService.getOrderById(\"order-123\");\n\n      expect(result).toEqual(mockOrder);\n    });\n\n    it(\"returns null for non-existent order\", async () => {\n      (database.order.findUnique as any).mockResolvedValue(null);\n\n      const result = await OrderService.getOrderById(\"nonexistent\");\n\n      expect(result).toBeNull();\n    });\n  });\n\n  describe(\"updateOrderStatus\", () => {\n    it(\"updates order status\", async () => {\n      const mockOrder = { id: \"order-1\", status: \"CONFIRMED\" };\n\n      (database.order.update as any).mockResolvedValue(mockOrder);\n\n      const result = await OrderService.updateOrderStatus(\n        \"order-1\",\n        \"CONFIRMED\"\n      );\n\n      expect(result.status).toBe(\"CONFIRMED\");\n    });\n  });\n\n  describe(\"getUserOrders\", () => {\n    it(\"retrieves all orders for user\", async () => {\n      const mockOrders = [\n        {\n          id: \"order-1\",\n          items: [],\n          farm: { id: \"f1\", name: \"F1\" },\n          user: { id: \"u1\", name: \"U1\", email: \"u1@test.com\" },\n        },\n        {\n          id: \"order-2\",\n          items: [],\n          farm: { id: \"f2\", name: \"F2\" },\n          user: { id: \"u1\", name: \"U1\", email: \"u1@test.com\" },\n        },\n      ];\n\n      (database.order.findMany as any).mockResolvedValue(mockOrders);\n\n      const result = await OrderService.getUserOrders(\"user-1\");\n\n      expect(result).toEqual(mockOrders);\n    });\n  });\n\n  describe(\"getFarmOrders\", () => {\n    it(\"retrieves all orders for farm\", async () => {\n      const mockOrders = [\n        {\n          id: \"order-1\",\n          items: [],\n          farm: { id: \"f1\", name: \"F1\" },\n          user: { id: \"u1\", name: \"U1\", email: \"u1@test.com\" },\n        },\n      ];\n\n      (database.order.findMany as any).mockResolvedValue(mockOrders);\n\n      const result = await OrderService.getFarmOrders(\"farm-1\");\n\n      expect(result).toEqual(mockOrders);\n    });\n  });\n});\n\r\n"],"version":3}