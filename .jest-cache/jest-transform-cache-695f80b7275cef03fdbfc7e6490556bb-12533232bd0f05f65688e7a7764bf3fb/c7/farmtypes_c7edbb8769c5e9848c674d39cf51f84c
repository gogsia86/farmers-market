9840cf56f70fd32854d89bfcf3e35191
"use strict";
/**
 * QUANTUM FARM TYPE DEFINITIONS
 * Divine type system for agricultural consciousness
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.isQuantumFarm = exports.isFarmId = void 0;
exports.generateFarmSlug = generateFarmSlug;
exports.manifestQuantumFarm = manifestQuantumFarm;
// ============================================================================
// TYPE GUARDS
// ============================================================================
const isFarmId = (value) => {
    return typeof value === "string" && value.length > 0;
};
exports.isFarmId = isFarmId;
const isQuantumFarm = (value) => {
    if (!value || typeof value !== "object")
        return false;
    const farm = value;
    return (farm.identity?.id !== undefined &&
        farm.identity?.name !== undefined &&
        farm.consciousness !== undefined &&
        farm.location !== undefined);
};
exports.isQuantumFarm = isQuantumFarm;
// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================
/**
 * Generate a unique farm slug from name and city
 * Format: farm-name-city (e.g., "green-valley-farm-portland")
 */
function generateFarmSlug(name, city) {
    const slugBase = name
        .toLowerCase()
        .trim()
        .replaceAll(/[^\w\s-]/g, "") // Remove special chars
        .replaceAll(/\s+/g, "-") // Replace spaces with hyphens
        .replaceAll(/-+/g, "-"); // Remove duplicate hyphens
    const citySlug = city
        ? `-${city
            .toLowerCase()
            .trim()
            .replaceAll(/[^\w\s-]/g, "")
            .replaceAll(/\s+/g, "-")}`
        : "";
    return `${slugBase}${citySlug}`;
}
/**
 * Manifest a quantum farm entity from database farm record
 * Transforms Prisma farm data into QuantumFarm structure
 */
function manifestQuantumFarm(farm) {
    return {
        identity: {
            id: farm.id,
            name: farm.name,
            slug: farm.slug,
            ownerId: farm.ownerId,
        },
        consciousness: {
            state: "GROWING",
            currentSeason: getCurrentSeason(),
            activeCrops: [],
            soilHealth: 75,
            biodiversityIndex: 70,
            sustainabilityScore: 80,
        },
        location: {
            latitude: Number(farm.latitude) || 0,
            longitude: Number(farm.longitude) || 0,
            address: farm.address,
            city: farm.city,
            state: farm.state,
            zipCode: farm.zipCode,
            country: farm.country || "US",
        },
        temporal: {
            established: farm.createdAt,
            currentSeason: getCurrentSeason(),
        },
        business: {
            description: farm.description || "",
            story: farm.story || "",
            businessName: farm.businessName || farm.name,
            yearEstablished: farm.yearEstablished || new Date().getFullYear(),
            farmSize: farm.farmSize || 0,
        },
        contact: {
            email: farm.email || "",
            phone: farm.phone || "",
            website: farm.website,
        },
        practices: {
            farmingMethods: farm.farmingPractices || [],
            certifications: farm.certifications || [],
            productCategories: farm.productCategories || [],
        },
        delivery: {
            pickupEnabled: true,
            deliveryEnabled: true,
            deliveryRadius: farm.deliveryRadius || 0,
        },
        visual: {
            logo: farm.logoUrl,
            coverImage: farm.coverImageUrl,
            photos: farm.images || [],
        },
        metrics: {
            totalProducts: farm._count?.products || 0,
            totalOrders: 0,
            avgRating: 0,
            totalReviews: 0,
        },
        status: {
            farmStatus: farm.status,
            verificationStatus: farm.verificationStatus,
            stripeOnboarded: farm.stripeOnboarded || false,
            payoutsEnabled: farm.payoutsEnabled || false,
        },
    };
}
/**
 * Get current season based on date
 */
function getCurrentSeason() {
    const month = new Date().getMonth();
    if (month >= 2 && month <= 4)
        return "SPRING";
    if (month >= 5 && month <= 7)
        return "SUMMER";
    if (month >= 8 && month <= 10)
        return "FALL";
    return "WINTER";
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXHR5cGVzXFxmYXJtLnR5cGVzLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQXNPSCw0Q0FpQkM7QUFNRCxrREFxRUM7QUF6SEQsK0VBQStFO0FBQy9FLGNBQWM7QUFDZCwrRUFBK0U7QUFFeEUsTUFBTSxRQUFRLEdBQUcsQ0FBQyxLQUFhLEVBQW1CLEVBQUU7SUFDekQsT0FBTyxPQUFPLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDdkQsQ0FBQyxDQUFDO0FBRlcsUUFBQSxRQUFRLFlBRW5CO0FBRUssTUFBTSxhQUFhLEdBQUcsQ0FBQyxLQUFjLEVBQXdCLEVBQUU7SUFDcEUsSUFBSSxDQUFDLEtBQUssSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFFdEQsTUFBTSxJQUFJLEdBQUcsS0FBb0IsQ0FBQztJQUVsQyxPQUFPLENBQ0wsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssU0FBUztRQUMvQixJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksS0FBSyxTQUFTO1FBQ2pDLElBQUksQ0FBQyxhQUFhLEtBQUssU0FBUztRQUNoQyxJQUFJLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FDNUIsQ0FBQztBQUNKLENBQUMsQ0FBQztBQVhXLFFBQUEsYUFBYSxpQkFXeEI7QUFFRiwrRUFBK0U7QUFDL0Usb0JBQW9CO0FBQ3BCLCtFQUErRTtBQUUvRTs7O0dBR0c7QUFDSCxTQUFnQixnQkFBZ0IsQ0FBQyxJQUFZLEVBQUUsSUFBYTtJQUMxRCxNQUFNLFFBQVEsR0FBRyxJQUFJO1NBQ2xCLFdBQVcsRUFBRTtTQUNiLElBQUksRUFBRTtTQUNOLFVBQVUsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUMsdUJBQXVCO1NBQ25ELFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsOEJBQThCO1NB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LGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsSUFBSSxDQUFDO1lBQ3pDLFdBQVcsRUFBRSxDQUFDO1lBQ2QsU0FBUyxFQUFFLENBQUM7WUFDWixZQUFZLEVBQUUsQ0FBQztTQUNoQjtRQUNELE1BQU0sRUFBRTtZQUNOLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBb0I7WUFDckMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGtCQUF3QztZQUNqRSxlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWUsSUFBSSxLQUFLO1lBQzlDLGNBQWMsRUFBRSxJQUFJLENBQUMsY0FBYyxJQUFJLEtBQUs7U0FDN0M7S0FDRixDQUFDO0FBQ0osQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxnQkFBZ0I7SUFDdkIsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNwQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUU7UUFBRSxPQUFPLE1BQU0sQ0FBQztJQUM3QyxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIk06XFxSZXBvXFxGYXJtZXJzIE1hcmtldCBQbGF0Zm9ybSB3ZWIgYW5kIGFwcFxcc3JjXFx0eXBlc1xcZmFybS50eXBlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFFVQU5UVU0gRkFSTSBUWVBFIERFRklOSVRJT05TXG4gKiBEaXZpbmUgdHlwZSBzeXN0ZW0gZm9yIGFncmljdWx0dXJhbCBjb25zY2lvdXNuZXNzXG4gKi9cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09SRSBGQVJNIFRZUEVTIFdJVEggQUdSSUNVTFRVUkFMIENPTlNDSU9VU05FU1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgU2Vhc29uID0gXCJTUFJJTkdcIiB8IFwiU1VNTUVSXCIgfCBcIkZBTExcIiB8IFwiV0lOVEVSXCI7XG5leHBvcnQgdHlwZSBGYXJtU3RhdGUgPSBcIkdST1dJTkdcIiB8IFwiSEFSVkVTVElOR1wiIHwgXCJSRUdFTkVSQVRJTkdcIiB8IFwiUkVTVElOR1wiO1xuZXhwb3J0IHR5cGUgRmFybVN0YXR1cyA9XG4gIHwgXCJBQ1RJVkVcIlxuICB8IFwiUEVORElOR19WRVJJRklDQVRJT05cIlxuICB8IFwiU1VTUEVOREVEXCJcbiAgfCBcIklOQUNUSVZFXCI7XG5leHBvcnQgdHlwZSBWZXJpZmljYXRpb25TdGF0dXMgPVxuICB8IFwiVkVSSUZJRURcIlxuICB8IFwiUEVORElOR1wiXG4gIHwgXCJSRUpFQ1RFRFwiXG4gIHwgXCJOT1RfU1RBUlRFRFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1YW50dW1JZGVudGlmaWVyIHtcbiAgcmVhZG9ubHkgYnJhbmQ6IHVuaXF1ZSBzeW1ib2w7XG59XG5cbmV4cG9ydCB0eXBlIEZhcm1JZCA9IHN0cmluZyAmIFF1YW50dW1JZGVudGlmaWVyO1xuZXhwb3J0IHR5cGUgVXNlcklkID0gc3RyaW5nICYgUXVhbnR1bUlkZW50aWZpZXI7XG5leHBvcnQgdHlwZSBGYXJtU2x1ZyA9IHN0cmluZyAmIFF1YW50dW1JZGVudGlmaWVyO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGQVJNIENPTlNDSU9VU05FU1MgTEFZRVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtQ29uc2Npb3VzbmVzcyB7XG4gIHN0YXRlOiBGYXJtU3RhdGU7XG4gIGN1cnJlbnRTZWFzb246IFNlYXNvbjtcbiAgYWN0aXZlQ3JvcHM6IHN0cmluZ1tdO1xuICBzb2lsSGVhbHRoOiBudW1iZXI7XG4gIGJpb2RpdmVyc2l0eUluZGV4OiBudW1iZXI7XG4gIHN1c3RhaW5hYmlsaXR5U2NvcmU6IG51bWJlcjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR0VPR1JBUEhJQyAmIFRFTVBPUkFMIERBVEFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtTG9jYXRpb24ge1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICBsb25naXR1ZGU6IG51bWJlcjtcbiAgYWRkcmVzczogc3RyaW5nO1xuICBjaXR5OiBzdHJpbmc7XG4gIHN0YXRlOiBzdHJpbmc7XG4gIHppcENvZGU6IHN0cmluZztcbiAgY291bnRyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZhcm1UZW1wb3JhbCB7XG4gIGVzdGFibGlzaGVkOiBEYXRlO1xuICBjdXJyZW50U2Vhc29uOiBTZWFzb247XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEJVU0lORVNTICYgQ09OVEFDVCBJTkZPUk1BVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEZhcm1CdXNpbmVzcyB7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHN0b3J5OiBzdHJpbmc7XG4gIGJ1c2luZXNzTmFtZTogc3RyaW5nO1xuICB5ZWFyRXN0YWJsaXNoZWQ6IG51bWJlcjtcbiAgZmFybVNpemU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtQ29udGFjdCB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBob25lOiBzdHJpbmc7XG4gIHdlYnNpdGU/OiBzdHJpbmc7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFHUklDVUxUVVJBTCBQUkFDVElDRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtUHJhY3RpY2VzIHtcbiAgZmFybWluZ01ldGhvZHM6IHN0cmluZ1tdO1xuICBjZXJ0aWZpY2F0aW9uczogc3RyaW5nW107XG4gIHByb2R1Y3RDYXRlZ29yaWVzOiBzdHJpbmdbXTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gREVMSVZFUlkgJiBMT0dJU1RJQ1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtRGVsaXZlcnkge1xuICBwaWNrdXBFbmFibGVkOiBib29sZWFuO1xuICBkZWxpdmVyeUVuYWJsZWQ6IGJvb2xlYW47XG4gIGRlbGl2ZXJ5UmFkaXVzOiBudW1iZXI7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZJU1VBTCBNQU5JRkVTVEFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFybVZpc3VhbCB7XG4gIGxvZ28/OiBzdHJpbmc7XG4gIGNvdmVySW1hZ2U/OiBzdHJpbmc7XG4gIHBob3Rvczogc3RyaW5nW107XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBFUkZPUk1BTkNFIE1FVFJJQ1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtTWV0cmljcyB7XG4gIHRvdGFsUHJvZHVjdHM6IG51bWJlcjtcbiAgYXZnUmF0aW5nOiBudW1iZXI7XG4gIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICB0b3RhbE9yZGVyczogbnVtYmVyO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBPUEVSQVRJT05BTCBTVEFUVVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBGYXJtT3BlcmF0aW9uYWxTdGF0dXMge1xuICBmYXJtU3RhdHVzOiBGYXJtU3RhdHVzO1xuICB2ZXJpZmljYXRpb25TdGF0dXM6IFZlcmlmaWNhdGlvblN0YXR1cztcbiAgc3RyaXBlT25ib2FyZGVkOiBib29sZWFuO1xuICBwYXlvdXRzRW5hYmxlZDogYm9vbGVhbjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUVVBTlRVTSBGQVJNIEVOVElUWSAtIENPTVBMRVRFIFRZUEVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBRdWFudHVtRmFybSB7XG4gIGlkZW50aXR5OiB7XG4gICAgaWQ6IEZhcm1JZDtcbiAgICBzbHVnOiBGYXJtU2x1ZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgb3duZXJJZDogVXNlcklkO1xuICB9O1xuXG4gIGNvbnNjaW91c25lc3M6IEZhcm1Db25zY2lvdXNuZXNzO1xuICBsb2NhdGlvbjogRmFybUxvY2F0aW9uO1xuICB0ZW1wb3JhbDogRmFybVRlbXBvcmFsO1xuICBidXNpbmVzczogRmFybUJ1c2luZXNzO1xuICBjb250YWN0OiBGYXJtQ29udGFjdDtcbiAgcHJhY3RpY2VzOiBGYXJtUHJhY3RpY2VzO1xuICBkZWxpdmVyeTogRmFybURlbGl2ZXJ5O1xuICB2aXN1YWw6IEZhcm1WaXN1YWw7XG4gIG1ldHJpY3M6IEZhcm1NZXRyaWNzO1xuICBzdGF0dXM6IEZhcm1PcGVyYXRpb25hbFN0YXR1cztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVBJIFJFUVVFU1QvUkVTUE9OU0UgVFlQRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVGYXJtUmVxdWVzdCB7XG4gIC8vIElkZW50aXR5XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcblxuICAvLyBCdXNpbmVzc1xuICBzdG9yeT86IHN0cmluZztcbiAgYnVzaW5lc3NOYW1lPzogc3RyaW5nO1xuICB5ZWFyRXN0YWJsaXNoZWQ/OiBudW1iZXI7XG4gIGZhcm1TaXplPzogbnVtYmVyO1xuXG4gIC8vIExvY2F0aW9uXG4gIGFkZHJlc3M6IHN0cmluZztcbiAgY2l0eTogc3RyaW5nO1xuICBzdGF0ZTogc3RyaW5nO1xuICB6aXBDb2RlOiBzdHJpbmc7XG4gIGxhdGl0dWRlOiBudW1iZXI7XG4gIGxvbmdpdHVkZTogbnVtYmVyO1xuXG4gIC8vIENvbnRhY3RcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHBob25lPzogc3RyaW5nO1xuICB3ZWJzaXRlPzogc3RyaW5nO1xuXG4gIC8vIFByYWN0aWNlc1xuICBmYXJtaW5nTWV0aG9kcz86IHN0cmluZ1tdO1xuICBmYXJtaW5nUHJhY3RpY2VzPzogc3RyaW5nW107XG4gIGNlcnRpZmljYXRpb25zPzogc3RyaW5nW107XG4gIHByb2R1Y3RDYXRlZ29yaWVzPzogc3RyaW5nW107XG5cbiAgLy8gRGVsaXZlcnlcbiAgZGVsaXZlcnlSYWRpdXM/OiBudW1iZXI7XG5cbiAgLy8gTGVnYWN5IHN1cHBvcnQgKG9wdGlvbmFsIGNvb3JkaW5hdGVzIG9iamVjdClcbiAgY29vcmRpbmF0ZXM/OiB7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVGYXJtUmVxdWVzdCBleHRlbmRzIFBhcnRpYWw8Q3JlYXRlRmFybVJlcXVlc3Q+IHtcbiAgaWQ6IEZhcm1JZDtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVFlQRSBHVUFSRFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IGlzRmFybUlkID0gKHZhbHVlOiBzdHJpbmcpOiB2YWx1ZSBpcyBGYXJtSWQgPT4ge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59O1xuXG5leHBvcnQgY29uc3QgaXNRdWFudHVtRmFybSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFF1YW50dW1GYXJtID0+IHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHJldHVybiBmYWxzZTtcblxuICBjb25zdCBmYXJtID0gdmFsdWUgYXMgUXVhbnR1bUZhcm07XG5cbiAgcmV0dXJuIChcbiAgICBmYXJtLmlkZW50aXR5Py5pZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgZmFybS5pZGVudGl0eT8ubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgZmFybS5jb25zY2lvdXNuZXNzICE9PSB1bmRlZmluZWQgJiZcbiAgICBmYXJtLmxvY2F0aW9uICE9PSB1bmRlZmluZWRcbiAgKTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJVFkgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2VuZXJhdGUgYSB1bmlxdWUgZmFybSBzbHVnIGZyb20gbmFtZSBhbmQgY2l0eVxuICogRm9ybWF0OiBmYXJtLW5hbWUtY2l0eSAoZS5nLiwgXCJncmVlbi12YWxsZXktZmFybS1wb3J0bGFuZFwiKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVGYXJtU2x1ZyhuYW1lOiBzdHJpbmcsIGNpdHk/OiBzdHJpbmcpOiBGYXJtU2x1ZyB7XG4gIGNvbnN0IHNsdWdCYXNlID0gbmFtZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlQWxsKC9bXlxcd1xccy1dL2csIFwiXCIpIC8vIFJlbW92ZSBzcGVjaWFsIGNoYXJzXG4gICAgLnJlcGxhY2VBbGwoL1xccysvZywgXCItXCIpIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggaHlwaGVuc1xuICAgIC5yZXBsYWNlQWxsKC8tKy9nLCBcIi1cIik7IC8vIFJlbW92ZSBkdXBsaWNhdGUgaHlwaGVuc1xuXG4gIGNvbnN0IGNpdHlTbHVnID0gY2l0eVxuICAgID8gYC0ke2NpdHlcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAucmVwbGFjZUFsbCgvW15cXHdcXHMtXS9nLCBcIlwiKVxuICAgICAgICAucmVwbGFjZUFsbCgvXFxzKy9nLCBcIi1cIil9YFxuICAgIDogXCJcIjtcblxuICByZXR1cm4gYCR7c2x1Z0Jhc2V9JHtjaXR5U2x1Z31gIGFzIEZhcm1TbHVnO1xufVxuXG4vKipcbiAqIE1hbmlmZXN0IGEgcXVhbnR1bSBmYXJtIGVudGl0eSBmcm9tIGRhdGFiYXNlIGZhcm0gcmVjb3JkXG4gKiBUcmFuc2Zvcm1zIFByaXNtYSBmYXJtIGRhdGEgaW50byBRdWFudHVtRmFybSBzdHJ1Y3R1cmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hbmlmZXN0UXVhbnR1bUZhcm0oZmFybTogYW55KTogUXVhbnR1bUZhcm0ge1xuICByZXR1cm4ge1xuICAgIGlkZW50aXR5OiB7XG4gICAgICBpZDogZmFybS5pZCBhcyBGYXJtSWQsXG4gICAgICBuYW1lOiBmYXJtLm5hbWUsXG4gICAgICBzbHVnOiBmYXJtLnNsdWcgYXMgRmFybVNsdWcsXG4gICAgICBvd25lcklkOiBmYXJtLm93bmVySWQgYXMgVXNlcklkLFxuICAgIH0sXG4gICAgY29uc2Npb3VzbmVzczoge1xuICAgICAgc3RhdGU6IFwiR1JPV0lOR1wiIGFzIEZhcm1TdGF0ZSxcbiAgICAgIGN1cnJlbnRTZWFzb246IGdldEN1cnJlbnRTZWFzb24oKSxcbiAgICAgIGFjdGl2ZUNyb3BzOiBbXSxcbiAgICAgIHNvaWxIZWFsdGg6IDc1LFxuICAgICAgYmlvZGl2ZXJzaXR5SW5kZXg6IDcwLFxuICAgICAgc3VzdGFpbmFiaWxpdHlTY29yZTogODAsXG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgbGF0aXR1ZGU6IE51bWJlcihmYXJtLmxhdGl0dWRlKSB8fCAwLFxuICAgICAgbG9uZ2l0dWRlOiBOdW1iZXIoZmFybS5sb25naXR1ZGUpIHx8IDAsXG4gICAgICBhZGRyZXNzOiBmYXJtLmFkZHJlc3MsXG4gICAgICBjaXR5OiBmYXJtLmNpdHksXG4gICAgICBzdGF0ZTogZmFybS5zdGF0ZSxcbiAgICAgIHppcENvZGU6IGZhcm0uemlwQ29kZSxcbiAgICAgIGNvdW50cnk6IGZhcm0uY291bnRyeSB8fCBcIlVTXCIsXG4gICAgfSxcbiAgICB0ZW1wb3JhbDoge1xuICAgICAgZXN0YWJsaXNoZWQ6IGZhcm0uY3JlYXRlZEF0LFxuICAgICAgY3VycmVudFNlYXNvbjogZ2V0Q3VycmVudFNlYXNvbigpLFxuICAgIH0sXG4gICAgYnVzaW5lc3M6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiBmYXJtLmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgICBzdG9yeTogZmFybS5zdG9yeSB8fCBcIlwiLFxuICAgICAgYnVzaW5lc3NOYW1lOiBmYXJtLmJ1c2luZXNzTmFtZSB8fCBmYXJtLm5hbWUsXG4gICAgICB5ZWFyRXN0YWJsaXNoZWQ6IGZhcm0ueWVhckVzdGFibGlzaGVkIHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcbiAgICAgIGZhcm1TaXplOiBmYXJtLmZhcm1TaXplIHx8IDAsXG4gICAgfSxcbiAgICBjb250YWN0OiB7XG4gICAgICBlbWFpbDogZmFybS5lbWFpbCB8fCBcIlwiLFxuICAgICAgcGhvbmU6IGZhcm0ucGhvbmUgfHwgXCJcIixcbiAgICAgIHdlYnNpdGU6IGZhcm0ud2Vic2l0ZSxcbiAgICB9LFxuICAgIHByYWN0aWNlczoge1xuICAgICAgZmFybWluZ01ldGhvZHM6IGZhcm0uZmFybWluZ1ByYWN0aWNlcyB8fCBbXSxcbiAgICAgIGNlcnRpZmljYXRpb25zOiBmYXJtLmNlcnRpZmljYXRpb25zIHx8IFtdLFxuICAgICAgcHJvZHVjdENhdGVnb3JpZXM6IGZhcm0ucHJvZHVjdENhdGVnb3JpZXMgfHwgW10sXG4gICAgfSxcbiAgICBkZWxpdmVyeToge1xuICAgICAgcGlja3VwRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGRlbGl2ZXJ5RW5hYmxlZDogdHJ1ZSxcbiAgICAgIGRlbGl2ZXJ5UmFkaXVzOiBmYXJtLmRlbGl2ZXJ5UmFkaXVzIHx8IDAsXG4gICAgfSxcbiAgICB2aXN1YWw6IHtcbiAgICAgIGxvZ286IGZhcm0ubG9nb1VybCxcbiAgICAgIGNvdmVySW1hZ2U6IGZhcm0uY292ZXJJbWFnZVVybCxcbiAgICAgIHBob3RvczogZmFybS5pbWFnZXMgfHwgW10sXG4gICAgfSxcbiAgICBtZXRyaWNzOiB7XG4gICAgICB0b3RhbFByb2R1Y3RzOiBmYXJtLl9jb3VudD8ucHJvZHVjdHMgfHwgMCxcbiAgICAgIHRvdGFsT3JkZXJzOiAwLFxuICAgICAgYXZnUmF0aW5nOiAwLFxuICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgIH0sXG4gICAgc3RhdHVzOiB7XG4gICAgICBmYXJtU3RhdHVzOiBmYXJtLnN0YXR1cyBhcyBGYXJtU3RhdHVzLFxuICAgICAgdmVyaWZpY2F0aW9uU3RhdHVzOiBmYXJtLnZlcmlmaWNhdGlvblN0YXR1cyBhcyBWZXJpZmljYXRpb25TdGF0dXMsXG4gICAgICBzdHJpcGVPbmJvYXJkZWQ6IGZhcm0uc3RyaXBlT25ib2FyZGVkIHx8IGZhbHNlLFxuICAgICAgcGF5b3V0c0VuYWJsZWQ6IGZhcm0ucGF5b3V0c0VuYWJsZWQgfHwgZmFsc2UsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCBzZWFzb24gYmFzZWQgb24gZGF0ZVxuICovXG5mdW5jdGlvbiBnZXRDdXJyZW50U2Vhc29uKCk6IFNlYXNvbiB7XG4gIGNvbnN0IG1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpO1xuICBpZiAobW9udGggPj0gMiAmJiBtb250aCA8PSA0KSByZXR1cm4gXCJTUFJJTkdcIjtcbiAgaWYgKG1vbnRoID49IDUgJiYgbW9udGggPD0gNykgcmV0dXJuIFwiU1VNTUVSXCI7XG4gIGlmIChtb250aCA+PSA4ICYmIG1vbnRoIDw9IDEwKSByZXR1cm4gXCJGQUxMXCI7XG4gIHJldHVybiBcIldJTlRFUlwiO1xufVxuIl0sInZlcnNpb24iOjN9