7d04981c859eb643bb221070db66bbba
"use strict";
/**
 * AGRICULTURAL CACHE - Separate module for clean exports
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AgriculturalCache = void 0;
const index_1 = require("./index");
exports.AgriculturalCache = {
    /**
     * Cache farm data with seasonal awareness
     */
    async cacheFarm(farmId, data) {
        await index_1.cache.set(index_1.CacheKeys.farm(farmId), data);
    },
    /**
     * Get cached farm data
     */
    async getFarm(farmId) {
        return index_1.cache.get(index_1.CacheKeys.farm(farmId));
    },
    /**
     * Invalidate farm cache
     */
    async invalidateFarm(farmId) {
        await index_1.cache.del(index_1.CacheKeys.farm(farmId));
        await index_1.cache.delPattern(`farms:list:*`);
    },
    /**
     * Cache product data with seasonal TTL
     */
    async cacheProduct(productId, data) {
        await index_1.cache.set(index_1.CacheKeys.product(productId), data);
    },
    /**
     * Get cached product data
     */
    async getProduct(productId) {
        return index_1.cache.get(index_1.CacheKeys.product(productId));
    },
    /**
     * Invalidate product cache and related lists
     */
    async invalidateProduct(productId, farmId) {
        await index_1.cache.del(index_1.CacheKeys.product(productId));
        await index_1.cache.delPattern(`products:${farmId}:*`);
        await index_1.cache.delPattern(`farms:list:*`);
    },
    /**
     * Cache seasonal data (longer TTL)
     */
    async cacheSeasonalData(season, data) {
        const SEASONAL_TTL = {
            SPRING: 3600,
            SUMMER: 7200,
            FALL: 1800,
            WINTER: 14400,
        };
        await index_1.cache.set(index_1.CacheKeys.seasonalData(season), data, SEASONAL_TTL[season]);
    },
    /**
     * Get cached seasonal data
     */
    async getSeasonalData(season) {
        return index_1.cache.get(index_1.CacheKeys.seasonalData(season));
    },
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcY2FjaGVcXGFncmljdWx0dXJhbC1jYWNoZS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7OztBQUVILG1DQUEyQztBQUk5QixRQUFBLGlCQUFpQixHQUFHO0lBQy9COztPQUVHO0lBQ0gsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFjLEVBQUUsSUFBUztRQUN2QyxNQUFNLGFBQUssQ0FBQyxHQUFHLENBQUMsaUJBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFjO1FBQzFCLE9BQU8sYUFBSyxDQUFDLEdBQUcsQ0FBQyxpQkFBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBYztRQUNqQyxNQUFNLGFBQUssQ0FBQyxHQUFHLENBQUMsaUJBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN4QyxNQUFNLGFBQUssQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFpQixFQUFFLElBQVM7UUFDN0MsTUFBTSxhQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxVQUFVLENBQUMsU0FBaUI7UUFDaEMsT0FBTyxhQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFNBQWlCLEVBQUUsTUFBYztRQUN2RCxNQUFNLGFBQUssQ0FBQyxHQUFHLENBQUMsaUJBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5QyxNQUFNLGFBQUssQ0FBQyxVQUFVLENBQUMsWUFBWSxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQy9DLE1BQU0sYUFBSyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsaUJBQWlCLENBQUMsTUFBYyxFQUFFLElBQVM7UUFDL0MsTUFBTSxZQUFZLEdBQUc7WUFDbkIsTUFBTSxFQUFFLElBQUk7WUFDWixNQUFNLEVBQUUsSUFBSTtZQUNaLElBQUksRUFBRSxJQUFJO1lBQ1YsTUFBTSxFQUFFLEtBQUs7U0FDZCxDQUFDO1FBQ0YsTUFBTSxhQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFTLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM5RSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsZUFBZSxDQUFDLE1BQWM7UUFDbEMsT0FBTyxhQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFTLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztDQUNPLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcY2FjaGVcXGFncmljdWx0dXJhbC1jYWNoZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFHUklDVUxUVVJBTCBDQUNIRSAtIFNlcGFyYXRlIG1vZHVsZSBmb3IgY2xlYW4gZXhwb3J0c1xuICovXG5cbmltcG9ydCB7IGNhY2hlLCBDYWNoZUtleXMgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG50eXBlIFNlYXNvbiA9IFwiU1BSSU5HXCIgfCBcIlNVTU1FUlwiIHwgXCJGQUxMXCIgfCBcIldJTlRFUlwiO1xuXG5leHBvcnQgY29uc3QgQWdyaWN1bHR1cmFsQ2FjaGUgPSB7XG4gIC8qKlxuICAgKiBDYWNoZSBmYXJtIGRhdGEgd2l0aCBzZWFzb25hbCBhd2FyZW5lc3NcbiAgICovXG4gIGFzeW5jIGNhY2hlRmFybShmYXJtSWQ6IHN0cmluZywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgY2FjaGUuc2V0KENhY2hlS2V5cy5mYXJtKGZhcm1JZCksIGRhdGEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGVkIGZhcm0gZGF0YVxuICAgKi9cbiAgYXN5bmMgZ2V0RmFybShmYXJtSWQ6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICAgIHJldHVybiBjYWNoZS5nZXQoQ2FjaGVLZXlzLmZhcm0oZmFybUlkKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludmFsaWRhdGUgZmFybSBjYWNoZVxuICAgKi9cbiAgYXN5bmMgaW52YWxpZGF0ZUZhcm0oZmFybUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBjYWNoZS5kZWwoQ2FjaGVLZXlzLmZhcm0oZmFybUlkKSk7XG4gICAgYXdhaXQgY2FjaGUuZGVsUGF0dGVybihgZmFybXM6bGlzdDoqYCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhY2hlIHByb2R1Y3QgZGF0YSB3aXRoIHNlYXNvbmFsIFRUTFxuICAgKi9cbiAgYXN5bmMgY2FjaGVQcm9kdWN0KHByb2R1Y3RJZDogc3RyaW5nLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBjYWNoZS5zZXQoQ2FjaGVLZXlzLnByb2R1Y3QocHJvZHVjdElkKSwgZGF0YSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjYWNoZWQgcHJvZHVjdCBkYXRhXG4gICAqL1xuICBhc3luYyBnZXRQcm9kdWN0KHByb2R1Y3RJZDogc3RyaW5nKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgcmV0dXJuIGNhY2hlLmdldChDYWNoZUtleXMucHJvZHVjdChwcm9kdWN0SWQpKTtcbiAgfSxcblxuICAvKipcbiAgICogSW52YWxpZGF0ZSBwcm9kdWN0IGNhY2hlIGFuZCByZWxhdGVkIGxpc3RzXG4gICAqL1xuICBhc3luYyBpbnZhbGlkYXRlUHJvZHVjdChwcm9kdWN0SWQ6IHN0cmluZywgZmFybUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBjYWNoZS5kZWwoQ2FjaGVLZXlzLnByb2R1Y3QocHJvZHVjdElkKSk7XG4gICAgYXdhaXQgY2FjaGUuZGVsUGF0dGVybihgcHJvZHVjdHM6JHtmYXJtSWR9OipgKTtcbiAgICBhd2FpdCBjYWNoZS5kZWxQYXR0ZXJuKGBmYXJtczpsaXN0OipgKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgc2Vhc29uYWwgZGF0YSAobG9uZ2VyIFRUTClcbiAgICovXG4gIGFzeW5jIGNhY2hlU2Vhc29uYWxEYXRhKHNlYXNvbjogU2Vhc29uLCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBTRUFTT05BTF9UVEwgPSB7XG4gICAgICBTUFJJTkc6IDM2MDAsXG4gICAgICBTVU1NRVI6IDcyMDAsXG4gICAgICBGQUxMOiAxODAwLFxuICAgICAgV0lOVEVSOiAxNDQwMCxcbiAgICB9O1xuICAgIGF3YWl0IGNhY2hlLnNldChDYWNoZUtleXMuc2Vhc29uYWxEYXRhKHNlYXNvbiksIGRhdGEsIFNFQVNPTkFMX1RUTFtzZWFzb25dKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGNhY2hlZCBzZWFzb25hbCBkYXRhXG4gICAqL1xuICBhc3luYyBnZXRTZWFzb25hbERhdGEoc2Vhc29uOiBTZWFzb24pOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgICByZXR1cm4gY2FjaGUuZ2V0KENhY2hlS2V5cy5zZWFzb25hbERhdGEoc2Vhc29uKSk7XG4gIH0sXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBBZ3JpY3VsdHVyYWxDYWNoZVR5cGUgPSB0eXBlb2YgQWdyaWN1bHR1cmFsQ2FjaGU7XG4iXSwidmVyc2lvbiI6M30=