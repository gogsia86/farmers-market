4173f508818910c41ee38d68b88c04da
"use strict";
/**
 * ðŸ“¦ ORDER SERVICE
 * Handles order creation, management, and tracking
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.OrderService = void 0;
const database_1 = require("@/lib/database");
class OrderService {
    /**
     * Create new order
     */
    static async createOrder(input) {
        const { userId, farmId, items, shippingAddress, fulfillmentMethod, notes } = input;
        // Calculate totals
        const subtotal = items.reduce((sum, item) => sum + item.price * item.quantity, 0);
        const tax = subtotal * 0.08; // 8% tax
        const platformFee = subtotal * 0.15; // 15% platform commission
        const farmerAmount = subtotal - platformFee;
        const total = subtotal + tax;
        // Generate order number
        const orderNumber = `FM-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
        // Create order with items
        const order = await database_1.database.order.create({
            data: {
                orderNumber,
                customerId: userId,
                farmId,
                status: "PENDING",
                paymentStatus: "PENDING",
                subtotal,
                tax,
                platformFee,
                farmerAmount,
                total,
                deliveryFee: 0,
                discount: 0,
                fulfillmentMethod,
                shippingAddress: JSON.stringify(shippingAddress),
                specialInstructions: notes,
                items: {
                    create: items.map((item) => ({
                        productId: item.productId,
                        productName: item.productName,
                        quantity: item.quantity,
                        unit: item.unit,
                        unitPrice: item.price,
                        subtotal: item.price * item.quantity,
                    })),
                },
            },
            include: {
                items: true,
                farm: {
                    select: {
                        id: true,
                        name: true,
                    },
                },
            },
        });
        return order;
    }
    /**
     * Get order by ID
     */
    static async getOrderById(orderId) {
        const order = await database_1.database.order.findUnique({
            where: { id: orderId },
            include: {
                items: true,
                farm: {
                    select: {
                        id: true,
                        name: true,
                    },
                },
            },
        });
        return order;
    }
    /**
     * Update order status
     */
    static async updateOrderStatus(orderId, status) {
        return database_1.database.order.update({
            where: { id: orderId },
            data: { status },
        });
    }
    /**
     * Get orders for user
     */
    static async getUserOrders(userId) {
        const orders = await database_1.database.order.findMany({
            where: { customerId: userId },
            include: {
                items: true,
                farm: {
                    select: {
                        id: true,
                        name: true,
                    },
                },
            },
            orderBy: { createdAt: "desc" },
        });
        return orders;
    }
    /**
     * Get orders for farm
     */
    static async getFarmOrders(farmId) {
        const orders = await database_1.database.order.findMany({
            where: { farmId },
            include: {
                items: true,
                farm: {
                    select: {
                        id: true,
                        name: true,
                    },
                },
            },
            orderBy: { createdAt: "desc" },
        });
        return orders;
    }
}
exports.OrderService = OrderService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcc2VydmljZXNcXG9yZGVyLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgsNkNBQTBDO0FBZ0MxQyxNQUFhLFlBQVk7SUFDdkI7O09BRUc7SUFDSCxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUF1QjtRQUM5QyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxHQUN4RSxLQUFLLENBQUM7UUFFUixtQkFBbUI7UUFDbkIsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FDM0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUMvQyxDQUFDLENBQ0YsQ0FBQztRQUNGLE1BQU0sR0FBRyxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQyxTQUFTO1FBQ3RDLE1BQU0sV0FBVyxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQywwQkFBMEI7UUFDL0QsTUFBTSxZQUFZLEdBQUcsUUFBUSxHQUFHLFdBQVcsQ0FBQztRQUM1QyxNQUFNLEtBQUssR0FBRyxRQUFRLEdBQUcsR0FBRyxDQUFDO1FBRTdCLHdCQUF3QjtRQUN4QixNQUFNLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQztRQUVuRywwQkFBMEI7UUFDMUIsTUFBTSxLQUFLLEdBQUcsTUFBTSxtQkFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDeEMsSUFBSSxFQUFFO2dCQUNKLFdB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QUFFO2dCQUNQLEtBQUssRUFBRSxJQUFJO2dCQUNYLElBQUksRUFBRTtvQkFDSixNQUFNLEVBQUU7d0JBQ04sRUFBRSxFQUFFLElBQUk7d0JBQ1IsSUFBSSxFQUFFLElBQUk7cUJBQ1g7aUJBQ0Y7YUFDRjtZQUNELE9BQU8sRUFBRSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUU7U0FDL0IsQ0FBQyxDQUFDO1FBRUgsT0FBTyxNQUE0QixDQUFDO0lBQ3RDLENBQUM7Q0FDRjtBQWpKRCxvQ0FpSkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcc2VydmljZXNcXG9yZGVyLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDwn5OmIE9SREVSIFNFUlZJQ0VcbiAqIEhhbmRsZXMgb3JkZXIgY3JlYXRpb24sIG1hbmFnZW1lbnQsIGFuZCB0cmFja2luZ1xuICovXG5cbmltcG9ydCB7IGRhdGFiYXNlIH0gZnJvbSBcIkAvbGliL2RhdGFiYXNlXCI7XG5pbXBvcnQgdHlwZSB7IE9yZGVyLCBPcmRlckl0ZW0gfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVPcmRlcklucHV0IHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGZhcm1JZDogc3RyaW5nO1xuICBpdGVtczogQXJyYXk8e1xuICAgIHByb2R1Y3RJZDogc3RyaW5nO1xuICAgIHByb2R1Y3ROYW1lOiBzdHJpbmc7XG4gICAgcXVhbnRpdHk6IG51bWJlcjtcbiAgICBwcmljZTogbnVtYmVyO1xuICAgIHVuaXQ6IHN0cmluZztcbiAgfT47XG4gIHNoaXBwaW5nQWRkcmVzczoge1xuICAgIHN0cmVldDogc3RyaW5nO1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xuICAgIHppcENvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5Pzogc3RyaW5nO1xuICB9O1xuICBmdWxmaWxsbWVudE1ldGhvZDogXCJERUxJVkVSWVwiIHwgXCJGQVJNX1BJQ0tVUFwiIHwgXCJNQVJLRVRfUElDS1VQXCI7XG4gIG5vdGVzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yZGVyV2l0aERldGFpbHMgZXh0ZW5kcyBPcmRlciB7XG4gIGl0ZW1zOiBPcmRlckl0ZW1bXTtcbiAgZmFybToge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgT3JkZXJTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgb3JkZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVPcmRlcihpbnB1dDogQ3JlYXRlT3JkZXJJbnB1dCk6IFByb21pc2U8T3JkZXJXaXRoRGV0YWlscz4ge1xuICAgIGNvbnN0IHsgdXNlcklkLCBmYXJtSWQsIGl0ZW1zLCBzaGlwcGluZ0FkZHJlc3MsIGZ1bGZpbGxtZW50TWV0aG9kLCBub3RlcyB9ID1cbiAgICAgIGlucHV0O1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xuICAgIGNvbnN0IHN1YnRvdGFsID0gaXRlbXMucmVkdWNlKFxuICAgICAgKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHksXG4gICAgICAwXG4gICAgKTtcbiAgICBjb25zdCB0YXggPSBzdWJ0b3RhbCAqIDAuMDg7IC8vIDglIHRheFxuICAgIGNvbnN0IHBsYXRmb3JtRmVlID0gc3VidG90YWwgKiAwLjE1OyAvLyAxNSUgcGxhdGZvcm0gY29tbWlzc2lvblxuICAgIGNvbnN0IGZhcm1lckFtb3VudCA9IHN1YnRvdGFsIC0gcGxhdGZvcm1GZWU7XG4gICAgY29uc3QgdG90YWwgPSBzdWJ0b3RhbCArIHRheDtcblxuICAgIC8vIEdlbmVyYXRlIG9yZGVyIG51bWJlclxuICAgIGNvbnN0IG9yZGVyTnVtYmVyID0gYEZNLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCkudG9VcHBlckNhc2UoKX1gO1xuXG4gICAgLy8gQ3JlYXRlIG9yZGVyIHdpdGggaXRlbXNcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IGRhdGFiYXNlLm9yZGVyLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG9yZGVyTnVtYmVyLFxuICAgICAgICBjdXN0b21lcklkOiB1c2VySWQsXG4gICAgICAgIGZhcm1JZCxcbiAgICAgICAgc3RhdHVzOiBcIlBFTkRJTkdcIixcbiAgICAgICAgcGF5bWVudFN0YXR1czogXCJQRU5ESU5HXCIsXG4gICAgICAgIHN1YnRvdGFsLFxuICAgICAgICB0YXgsXG4gICAgICAgIHBsYXRmb3JtRmVlLFxuICAgICAgICBmYXJtZXJBbW91bnQsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBkZWxpdmVyeUZlZTogMCxcbiAgICAgICAgZGlzY291bnQ6IDAsXG4gICAgICAgIGZ1bGZpbGxtZW50TWV0aG9kLFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KHNoaXBwaW5nQWRkcmVzcyksXG4gICAgICAgIHNwZWNpYWxJbnN0cnVjdGlvbnM6IG5vdGVzLFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgIGNyZWF0ZTogaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgcHJvZHVjdElkOiBpdGVtLnByb2R1Y3RJZCxcbiAgICAgICAgICAgIHByb2R1Y3ROYW1lOiBpdGVtLnByb2R1Y3ROYW1lLFxuICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgICB1bml0OiBpdGVtLnVuaXQsXG4gICAgICAgICAgICB1bml0UHJpY2U6IGl0ZW0ucHJpY2UsXG4gICAgICAgICAgICBzdWJ0b3RhbDogaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgaXRlbXM6IHRydWUsXG4gICAgICAgIGZhcm06IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBvcmRlciBhcyBPcmRlcldpdGhEZXRhaWxzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBvcmRlciBieSBJRFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldE9yZGVyQnlJZChvcmRlcklkOiBzdHJpbmcpOiBQcm9taXNlPE9yZGVyV2l0aERldGFpbHMgfCBudWxsPiB7XG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBkYXRhYmFzZS5vcmRlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBvcmRlcklkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGl0ZW1zOiB0cnVlLFxuICAgICAgICBmYXJtOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3JkZXIgYXMgT3JkZXJXaXRoRGV0YWlscyB8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIG9yZGVyIHN0YXR1c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZU9yZGVyU3RhdHVzKFxuICAgIG9yZGVySWQ6IHN0cmluZyxcbiAgICBzdGF0dXM6XG4gICAgICB8IFwiUEVORElOR1wiXG4gICAgICB8IFwiQ09ORklSTUVEXCJcbiAgICAgIHwgXCJQUkVQQVJJTkdcIlxuICAgICAgfCBcIlJFQURZXCJcbiAgICAgIHwgXCJGVUxGSUxMRURcIlxuICAgICAgfCBcIkNPTVBMRVRFRFwiXG4gICAgICB8IFwiQ0FOQ0VMTEVEXCJcbiAgKTogUHJvbWlzZTxPcmRlcj4ge1xuICAgIHJldHVybiBkYXRhYmFzZS5vcmRlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG9yZGVySWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG9yZGVycyBmb3IgdXNlclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFVzZXJPcmRlcnModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPE9yZGVyV2l0aERldGFpbHNbXT4ge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGRhdGFiYXNlLm9yZGVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGN1c3RvbWVySWQ6IHVzZXJJZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBpdGVtczogdHJ1ZSxcbiAgICAgICAgZmFybToge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6IFwiZGVzY1wiIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3JkZXJzIGFzIE9yZGVyV2l0aERldGFpbHNbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgb3JkZXJzIGZvciBmYXJtXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0RmFybU9yZGVycyhmYXJtSWQ6IHN0cmluZyk6IFByb21pc2U8T3JkZXJXaXRoRGV0YWlsc1tdPiB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgZGF0YWJhc2Uub3JkZXIuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgZmFybUlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGl0ZW1zOiB0cnVlLFxuICAgICAgICBmYXJtOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogXCJkZXNjXCIgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBvcmRlcnMgYXMgT3JkZXJXaXRoRGV0YWlsc1tdO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=