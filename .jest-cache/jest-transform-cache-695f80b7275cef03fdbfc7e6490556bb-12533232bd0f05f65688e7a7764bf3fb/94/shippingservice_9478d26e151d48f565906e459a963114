51253a9732557f543b27a55382727807
"use strict";
/**
 * ðŸšš SHIPPING SERVICE
 * Handles shipping calculations and tracking
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ShippingService = void 0;
const database_1 = require("@/lib/database");
class ShippingService {
    /**
     * Calculate shipping rates
     */
    static async calculateShippingRates(_orderId, _destination) {
        // In production, integrate with shipping providers (FedEx, UPS, USPS)
        const rates = [
            { service: "STANDARD", cost: 5.99, estimatedDays: 5 },
            { service: "EXPRESS", cost: 12.99, estimatedDays: 2 },
            { service: "OVERNIGHT", cost: 24.99, estimatedDays: 1 },
        ];
        return rates;
    }
    /**
     * Create shipping label
     */
    static async createShippingLabel(orderId, service) {
        // In production, create label with shipping provider
        const trackingNumber = `TRK${Date.now()}`;
        const labelId = `LBL${Date.now()}`;
        // Store tracking number and shipping service
        await database_1.database.order.update({
            where: { id: orderId },
            data: {
                trackingNumber,
                shippingService: service,
                status: "PREPARING",
            },
        });
        return { labelId, trackingNumber };
    }
    /**
     * Get tracking information
     */
    static async getTrackingInfo(trackingNumber) {
        // In production, fetch from shipping provider API
        const order = await database_1.database.order.findFirst({
            where: { trackingNumber },
        });
        if (!order) {
            return [];
        }
        return [
            {
                orderId: order.id,
                status: order.status,
                location: "Distribution Center",
                timestamp: new Date(),
            },
        ];
    }
    /**
     * Update shipping status
     */
    static async updateShippingStatus(orderId, status) {
        // Cast to OrderStatus enum type
        const validStatuses = [
            "PENDING",
            "CONFIRMED",
            "PREPARING",
            "READY",
            "SHIPPED",
            "DELIVERED",
            "CANCELLED",
        ];
        const orderStatus = validStatuses.includes(status) ? status : "PREPARING";
        await database_1.database.order.update({
            where: { id: orderId },
            data: { status: orderStatus },
        });
    }
}
exports.ShippingService = ShippingService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcc2VydmljZXNcXHNoaXBwaW5nLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgsNkNBQTBDO0FBZTFDLE1BQWEsZUFBZTtJQUMxQjs7T0FFRztJQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQ2pDLFFBQWdCLEVBQ2hCLFlBQThEO1FBRTlELHNFQUFzRTtRQUN0RSxNQUFNLEtBQUssR0FBbUI7WUFDNUIsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLENBQUMsRUFBRTtZQUNyRCxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsQ0FBQyxFQUFFO1lBQ3JELEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxDQUFDLEVBQUU7U0FDeEQsQ0FBQztRQUVGLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FDOUIsT0FBZSxFQUNmLE9BQWU7UUFFZixxREFBcUQ7UUFDckQsTUFBTSxjQUFjLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztRQUMxQyxNQUFNLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDO1FBRW5DLDZDQUE2QztRQUM3QyxNQUFNLG1CQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztZQUMxQixLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFO1lBQ3RCLElBQUksRUFBRTtnQkFDSixjQUFjO2dCQUNkLGVBQWUsRUFBRSxPQUFPO2dCQUN4QixNQUFNLEVBQUUsV0FBa0I7YUFDM0I7U0FDRixDQUFDLENBQUM7UUFFSCxPQUFPLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUMxQixjQUFzQjtRQUV0QixrREFBa0Q7UUFDbEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxtQkFBUSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7WUFDM0MsS0FBSyxFQUFFLEVBQUUsY0FBYyxFQUFFO1NBQzFCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNYLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUVELE9BQU87WUFDTDtnQkFDRSxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTTtnQkFDcEIsUUFBUSxFQUFFLHFCQUFxQjtnQkFDL0IsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3RCO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQy9CLE9BQWUsRUFDZixNQUFjO1FBRWQsZ0NBQWdDO1FBQ2hDLE1BQU0sYUFBYSxHQUFHO1lBQ3BCLFNBQVM7WUFDVCxXQUFXO1lBQ1gsV0FBVztZQUNYLE9BQU87WUFDUCxTQUFTO1lBQ1QsV0FBVztZQUNYLFdBQVc7U0FDWixDQUFDO1FBQ0YsTUFBTSxXQUFXLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUM7UUFFMUUsTUFBTSxtQkFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDMUIsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRTtZQUN0QixJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsV0FBa0IsRUFBRTtTQUNyQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUEzRkQsMENBMkZDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIk06XFxSZXBvXFxGYXJtZXJzIE1hcmtldCBQbGF0Zm9ybSB3ZWIgYW5kIGFwcFxcc3JjXFxsaWJcXHNlcnZpY2VzXFxzaGlwcGluZy5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog8J+amiBTSElQUElORyBTRVJWSUNFXG4gKiBIYW5kbGVzIHNoaXBwaW5nIGNhbGN1bGF0aW9ucyBhbmQgdHJhY2tpbmdcbiAqL1xuXG5pbXBvcnQgeyBkYXRhYmFzZSB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNoaXBwaW5nUmF0ZSB7XG4gIHNlcnZpY2U6IHN0cmluZztcbiAgY29zdDogbnVtYmVyO1xuICBlc3RpbWF0ZWREYXlzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tpbmdJbmZvIHtcbiAgb3JkZXJJZDogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgbG9jYXRpb246IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5leHBvcnQgY2xhc3MgU2hpcHBpbmdTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBzaGlwcGluZyByYXRlc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgX29yZGVySWQ6IHN0cmluZyxcbiAgICBfZGVzdGluYXRpb246IHsgY2l0eTogc3RyaW5nOyBzdGF0ZTogc3RyaW5nOyB6aXBDb2RlOiBzdHJpbmcgfVxuICApOiBQcm9taXNlPFNoaXBwaW5nUmF0ZVtdPiB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgaW50ZWdyYXRlIHdpdGggc2hpcHBpbmcgcHJvdmlkZXJzIChGZWRFeCwgVVBTLCBVU1BTKVxuICAgIGNvbnN0IHJhdGVzOiBTaGlwcGluZ1JhdGVbXSA9IFtcbiAgICAgIHsgc2VydmljZTogXCJTVEFOREFSRFwiLCBjb3N0OiA1Ljk5LCBlc3RpbWF0ZWREYXlzOiA1IH0sXG4gICAgICB7IHNlcnZpY2U6IFwiRVhQUkVTU1wiLCBjb3N0OiAxMi45OSwgZXN0aW1hdGVkRGF5czogMiB9LFxuICAgICAgeyBzZXJ2aWNlOiBcIk9WRVJOSUdIVFwiLCBjb3N0OiAyNC45OSwgZXN0aW1hdGVkRGF5czogMSB9LFxuICAgIF07XG5cbiAgICByZXR1cm4gcmF0ZXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHNoaXBwaW5nIGxhYmVsXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICBvcmRlcklkOiBzdHJpbmcsXG4gICAgc2VydmljZTogc3RyaW5nXG4gICk6IFByb21pc2U8eyBsYWJlbElkOiBzdHJpbmc7IHRyYWNraW5nTnVtYmVyOiBzdHJpbmcgfT4ge1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIGNyZWF0ZSBsYWJlbCB3aXRoIHNoaXBwaW5nIHByb3ZpZGVyXG4gICAgY29uc3QgdHJhY2tpbmdOdW1iZXIgPSBgVFJLJHtEYXRlLm5vdygpfWA7XG4gICAgY29uc3QgbGFiZWxJZCA9IGBMQkwke0RhdGUubm93KCl9YDtcblxuICAgIC8vIFN0b3JlIHRyYWNraW5nIG51bWJlciBhbmQgc2hpcHBpbmcgc2VydmljZVxuICAgIGF3YWl0IGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogb3JkZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICB0cmFja2luZ051bWJlcixcbiAgICAgICAgc2hpcHBpbmdTZXJ2aWNlOiBzZXJ2aWNlLFxuICAgICAgICBzdGF0dXM6IFwiUFJFUEFSSU5HXCIgYXMgYW55LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IGxhYmVsSWQsIHRyYWNraW5nTnVtYmVyIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRyYWNraW5nIGluZm9ybWF0aW9uXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VHJhY2tpbmdJbmZvKFxuICAgIHRyYWNraW5nTnVtYmVyOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxUcmFja2luZ0luZm9bXT4ge1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIGZldGNoIGZyb20gc2hpcHBpbmcgcHJvdmlkZXIgQVBJXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBkYXRhYmFzZS5vcmRlci5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgdHJhY2tpbmdOdW1iZXIgfSxcbiAgICB9KTtcblxuICAgIGlmICghb3JkZXIpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBvcmRlcklkOiBvcmRlci5pZCxcbiAgICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gICAgICAgIGxvY2F0aW9uOiBcIkRpc3RyaWJ1dGlvbiBDZW50ZXJcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzaGlwcGluZyBzdGF0dXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTaGlwcGluZ1N0YXR1cyhcbiAgICBvcmRlcklkOiBzdHJpbmcsXG4gICAgc3RhdHVzOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2FzdCB0byBPcmRlclN0YXR1cyBlbnVtIHR5cGVcbiAgICBjb25zdCB2YWxpZFN0YXR1c2VzID0gW1xuICAgICAgXCJQRU5ESU5HXCIsXG4gICAgICBcIkNPTkZJUk1FRFwiLFxuICAgICAgXCJQUkVQQVJJTkdcIixcbiAgICAgIFwiUkVBRFlcIixcbiAgICAgIFwiU0hJUFBFRFwiLFxuICAgICAgXCJERUxJVkVSRURcIixcbiAgICAgIFwiQ0FOQ0VMTEVEXCIsXG4gICAgXTtcbiAgICBjb25zdCBvcmRlclN0YXR1cyA9IHZhbGlkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSA/IHN0YXR1cyA6IFwiUFJFUEFSSU5HXCI7XG5cbiAgICBhd2FpdCBkYXRhYmFzZS5vcmRlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG9yZGVySWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiBvcmRlclN0YXR1cyBhcyBhbnkgfSxcbiAgICB9KTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9