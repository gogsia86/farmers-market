f233a2fbed29fd49cf9384dd436969c6
"use strict";
/**
 * ðŸšš SHIPPING SERVICE TEST SUITE
 * Comprehensive tests for shipping calculations and tracking
 *
 * Coverage: 30+ tests for all shipping operations
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock the database
jest.mock("@/lib/database", () => ({
    database: {
        order: {
            update: jest.fn(),
            findFirst: jest.fn(),
        },
    },
}));
const database_1 = require("@/lib/database");
const shipping_service_1 = require("../shipping.service");
(0, globals_1.describe)("ðŸšš Shipping Service - Divine Shipping Operations", () => {
    const mockOrderId = "order-123";
    const mockDestination = {
        city: "Portland",
        state: "OR",
        zipCode: "97201",
    };
    (0, globals_1.beforeEach)(() => {
        jest.clearAllMocks();
    });
    (0, globals_1.describe)("ðŸ“¦ calculateShippingRates", () => {
        (0, globals_1.it)("should return shipping rates for valid destination", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            (0, globals_1.expect)(rates).toHaveLength(3);
            (0, globals_1.expect)(rates).toEqual(globals_1.expect.arrayContaining([
                globals_1.expect.objectContaining({ service: "STANDARD" }),
                globals_1.expect.objectContaining({ service: "EXPRESS" }),
                globals_1.expect.objectContaining({ service: "OVERNIGHT" }),
            ]));
        });
        (0, globals_1.it)("should return STANDARD shipping option", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            const standard = rates.find((r) => r.service === "STANDARD");
            (0, globals_1.expect)(standard).toMatchObject({
                service: "STANDARD",
                cost: 5.99,
                estimatedDays: 5,
            });
        });
        (0, globals_1.it)("should return EXPRESS shipping option", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            const express = rates.find((r) => r.service === "EXPRESS");
            (0, globals_1.expect)(express).toMatchObject({
                service: "EXPRESS",
                cost: 12.99,
                estimatedDays: 2,
            });
        });
        (0, globals_1.it)("should return OVERNIGHT shipping option", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            const overnight = rates.find((r) => r.service === "OVERNIGHT");
            (0, globals_1.expect)(overnight).toMatchObject({
                service: "OVERNIGHT",
                cost: 24.99,
                estimatedDays: 1,
            });
        });
        (0, globals_1.it)("should handle different cities", async () => {
            const destinations = [
                { city: "Seattle", state: "WA", zipCode: "98101" },
                { city: "Los Angeles", state: "CA", zipCode: "90001" },
                { city: "New York", state: "NY", zipCode: "10001" },
            ];
            for (const dest of destinations) {
                const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, dest);
                (0, globals_1.expect)(rates).toHaveLength(3);
            }
        });
        (0, globals_1.it)("should handle different states", async () => {
            const states = ["CA", "NY", "TX", "FL", "IL"];
            for (const state of states) {
                const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, {
                    city: "Test City",
                    state,
                    zipCode: "12345",
                });
                (0, globals_1.expect)(rates).toHaveLength(3);
            }
        });
        (0, globals_1.it)("should handle different zip codes", async () => {
            const zipCodes = ["10001", "90210", "60601", "33101", "02101"];
            for (const zipCode of zipCodes) {
                const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, {
                    city: "Test City",
                    state: "CA",
                    zipCode,
                });
                (0, globals_1.expect)(rates).toHaveLength(3);
            }
        });
        (0, globals_1.it)("should return rates in order of cost (cheapest first)", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            (0, globals_1.expect)(rates[0].cost).toBeLessThan(rates[1].cost);
            (0, globals_1.expect)(rates[1].cost).toBeLessThan(rates[2].cost);
        });
        (0, globals_1.it)("should return rates in reverse order of speed", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            (0, globals_1.expect)(rates[0].estimatedDays).toBeGreaterThan(rates[1].estimatedDays);
            (0, globals_1.expect)(rates[1].estimatedDays).toBeGreaterThan(rates[2].estimatedDays);
        });
        (0, globals_1.it)("should have consistent rate structure", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            rates.forEach((rate) => {
                (0, globals_1.expect)(rate).toHaveProperty("service");
                (0, globals_1.expect)(rate).toHaveProperty("cost");
                (0, globals_1.expect)(rate).toHaveProperty("estimatedDays");
                (0, globals_1.expect)(typeof rate.service).toBe("string");
                (0, globals_1.expect)(typeof rate.cost).toBe("number");
                (0, globals_1.expect)(typeof rate.estimatedDays).toBe("number");
            });
        });
        (0, globals_1.it)("should return positive costs", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            rates.forEach((rate) => {
                (0, globals_1.expect)(rate.cost).toBeGreaterThan(0);
            });
        });
        (0, globals_1.it)("should return positive estimated days", async () => {
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            rates.forEach((rate) => {
                (0, globals_1.expect)(rate.estimatedDays).toBeGreaterThan(0);
            });
        });
    });
    (0, globals_1.describe)("ðŸ·ï¸ createShippingLabel", () => {
        (0, globals_1.it)("should create shipping label successfully", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result = await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "STANDARD");
            (0, globals_1.expect)(result).toHaveProperty("labelId");
            (0, globals_1.expect)(result).toHaveProperty("trackingNumber");
            (0, globals_1.expect)(result.labelId).toMatch(/^LBL\d+$/);
            (0, globals_1.expect)(result.trackingNumber).toMatch(/^TRK\d+$/);
        });
        (0, globals_1.it)("should update order status to PREPARING with tracking", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "EXPRESS");
            (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalledWith({
                where: { id: mockOrderId },
                data: {
                    trackingNumber: globals_1.expect.stringMatching(/^TRK\d+$/),
                    shippingService: "EXPRESS",
                    status: "PREPARING",
                },
            });
        });
        (0, globals_1.it)("should update order with shipping service", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "OVERNIGHT");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "PREPARING" });
        });
        (0, globals_1.it)("should generate unique tracking numbers", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result1 = await shipping_service_1.ShippingService.createShippingLabel("order-1", "STANDARD");
            // Small delay to ensure different timestamp
            await new Promise((resolve) => setTimeout(resolve, 2));
            const result2 = await shipping_service_1.ShippingService.createShippingLabel("order-2", "STANDARD");
            (0, globals_1.expect)(result1.trackingNumber).not.toBe(result2.trackingNumber);
        });
        (0, globals_1.it)("should generate unique label IDs", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result1 = await shipping_service_1.ShippingService.createShippingLabel("order-1", "STANDARD");
            // Small delay to ensure different timestamp
            await new Promise((resolve) => setTimeout(resolve, 2));
            const result2 = await shipping_service_1.ShippingService.createShippingLabel("order-2", "STANDARD");
            (0, globals_1.expect)(result1.labelId).not.toBe(result2.labelId);
        });
        (0, globals_1.it)("should handle STANDARD service", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result = await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "STANDARD");
            (0, globals_1.expect)(result).toBeDefined();
            (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalled();
        });
        (0, globals_1.it)("should handle EXPRESS service", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result = await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "EXPRESS");
            (0, globals_1.expect)(result).toBeDefined();
            (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalled();
        });
        (0, globals_1.it)("should handle OVERNIGHT service", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const result = await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "OVERNIGHT");
            (0, globals_1.expect)(result).toBeDefined();
            (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalled();
        });
        (0, globals_1.it)("should propagate database errors", async () => {
            jest.mocked(database_1.database.order.update).mockRejectedValue(new Error("Database error"));
            await (0, globals_1.expect)(shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "STANDARD")).rejects.toThrow("Database error");
        });
    });
    (0, globals_1.describe)("ðŸ“ getTrackingInfo", () => {
        const mockTrackingNumber = "TRK1234567890";
        const mockOrder = {
            id: mockOrderId,
            status: "SHIPPED",
            trackingNumber: mockTrackingNumber,
        };
        (0, globals_1.it)("should return tracking info for valid tracking number", async () => {
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue(mockOrder);
            const info = await shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber);
            (0, globals_1.expect)(info).toHaveLength(1);
            (0, globals_1.expect)(info[0]).toMatchObject({
                orderId: mockOrderId,
                status: "SHIPPED",
                location: "Distribution Center",
            });
        });
        (0, globals_1.it)("should return empty array for invalid tracking number", async () => {
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue(null);
            const info = await shipping_service_1.ShippingService.getTrackingInfo("INVALID123");
            (0, globals_1.expect)(info).toEqual([]);
        });
        (0, globals_1.it)("should include timestamp in tracking info", async () => {
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue(mockOrder);
            const info = await shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber);
            (0, globals_1.expect)(info[0].timestamp).toBeInstanceOf(Date);
        });
        (0, globals_1.it)("should query database with tracking number", async () => {
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue(mockOrder);
            await shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber);
            (0, globals_1.expect)(database_1.database.order.findFirst).toHaveBeenCalledWith({
                where: { trackingNumber: mockTrackingNumber },
            });
        });
        (0, globals_1.it)("should handle different order statuses", async () => {
            const statuses = ["PENDING", "PROCESSING", "SHIPPED", "DELIVERED"];
            for (const status of statuses) {
                jest.mocked(database_1.database.order.findFirst).mockResolvedValue({
                    ...mockOrder,
                    status,
                });
                const info = await shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber);
                (0, globals_1.expect)(info[0].status).toBe(status);
            }
        });
        (0, globals_1.it)("should handle database errors", async () => {
            jest.mocked(database_1.database.order.findFirst).mockRejectedValue(new Error("Database error"));
            await (0, globals_1.expect)(shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber)).rejects.toThrow("Database error");
        });
        (0, globals_1.it)("should return tracking info with correct structure", async () => {
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue(mockOrder);
            const info = await shipping_service_1.ShippingService.getTrackingInfo(mockTrackingNumber);
            (0, globals_1.expect)(info[0]).toHaveProperty("orderId");
            (0, globals_1.expect)(info[0]).toHaveProperty("status");
            (0, globals_1.expect)(info[0]).toHaveProperty("location");
            (0, globals_1.expect)(info[0]).toHaveProperty("timestamp");
        });
    });
    (0, globals_1.describe)("ðŸ”„ updateShippingStatus", () => {
        (0, globals_1.it)("should update shipping status successfully", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "SHIPPED");
            (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalledWith({
                where: { id: mockOrderId },
                data: { status: "SHIPPED" },
            });
        });
        (0, globals_1.it)("should handle PENDING status", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "PENDING");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "PENDING" });
        });
        (0, globals_1.it)("should handle invalid status by defaulting to PREPARING", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            // "PROCESSING" is not in valid statuses, so it defaults to "PREPARING"
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "PROCESSING");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "PREPARING" });
        });
        (0, globals_1.it)("should handle SHIPPED status", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "SHIPPED");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "SHIPPED" });
        });
        (0, globals_1.it)("should handle DELIVERED status", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "DELIVERED");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "DELIVERED" });
        });
        (0, globals_1.it)("should handle CANCELLED status", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "CANCELLED");
            const updateCall = jest.mocked(database_1.database.order.update).mock.calls[0][0];
            (0, globals_1.expect)(updateCall.data).toMatchObject({ status: "CANCELLED" });
        });
        (0, globals_1.it)("should propagate database errors", async () => {
            jest.mocked(database_1.database.order.update).mockRejectedValue(new Error("Update failed"));
            await (0, globals_1.expect)(shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "SHIPPED")).rejects.toThrow("Update failed");
        });
        (0, globals_1.it)("should update status for different order IDs", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            const orderIds = ["order-1", "order-2", "order-3"];
            for (const orderId of orderIds) {
                await shipping_service_1.ShippingService.updateShippingStatus(orderId, "SHIPPED");
                (0, globals_1.expect)(database_1.database.order.update).toHaveBeenCalledWith({
                    where: { id: orderId },
                    data: { status: "SHIPPED" },
                });
            }
        });
    });
    (0, globals_1.describe)("ðŸ”„ Integration Scenarios", () => {
        (0, globals_1.it)("should handle complete shipping workflow", async () => {
            jest.mocked(database_1.database.order.update).mockResolvedValue({});
            jest.mocked(database_1.database.order.findFirst).mockResolvedValue({
                id: mockOrderId,
                status: "SHIPPED",
                trackingNumber: "TRK123",
            });
            // Step 1: Calculate rates
            const rates = await shipping_service_1.ShippingService.calculateShippingRates(mockOrderId, mockDestination);
            (0, globals_1.expect)(rates).toHaveLength(3);
            // Step 2: Create label
            const label = await shipping_service_1.ShippingService.createShippingLabel(mockOrderId, "EXPRESS");
            (0, globals_1.expect)(label.trackingNumber).toBeDefined();
            // Step 3: Update status
            await shipping_service_1.ShippingService.updateShippingStatus(mockOrderId, "SHIPPED");
            // Step 4: Get tracking
            const tracking = await shipping_service_1.ShippingService.getTrackingInfo(label.trackingNumber);
            (0, globals_1.expect)(tracking).toBeDefined();
        });
        (0, globals_1.it)("should handle rate calculation for multiple orders", async () => {
            const orderIds = ["order-1", "order-2", "order-3"];
            for (const orderId of orderIds) {
                const rates = await shipping_service_1.ShippingService.calculateShippingRates(orderId, mockDestination);
                (0, globals_1.expect)(rates).toHaveLength(3);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcc2VydmljZXNcXF9fdGVzdHNfX1xcc2hpcHBpbmcuc2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFHSCwyQ0FBaUU7QUFHakUsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNqQyxRQUFRLEVBQUU7UUFDUixLQUFLLEVBQUU7WUFDTCxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNyQjtLQUNGO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFaSiw2Q0FBMEM7QUFFMUMsMERBQXNEO0FBWXRELElBQUEsa0JBQVEsRUFBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7SUFDaEUsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2hDLE1BQU0sZUFBZSxHQUFHO1FBQ3RCLElBQUksRUFBRSxVQUFVO1FBQ2hCLEtBQUssRUFBRSxJQUFJO1FBQ1gsT0FBTyxFQUFFLE9BQU87S0FDakIsQ0FBQztJQUVGLElBQUEsb0JBQVUsRUFBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLElBQUEsWUFBRSxFQUFDLG9EQUFvRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2xFLE1BQU0sS0FBSyxHQUFHLE1BQU0sa0NBQWUsQ0FBQyxzQkFBc0IsQ0FDeEQsV0FBVyxFQUNYLGVBQWUsQ0FDaEIsQ0FBQztZQUVGLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDLE9B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LENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUUzQyx3QkFBd0I7WUFDeEIsTUFBTSxrQ0FBZSxDQUFDLG9CQUFvQixDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUVuRSx1QkFBdUI7WUFDdkIsTUFBTSxRQUFRLEdBQUcsTUFBTSxrQ0FBZSxDQUFDLGVBQWUsQ0FDcEQsS0FBSyxDQUFDLGNBQWMsQ0FDckIsQ0FBQztZQUNGLElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsWUFBRSxFQUFDLG9EQUFvRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2xFLE1BQU0sUUFBUSxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUVuRCxLQUFLLE1BQU0sT0FBTyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUMvQixNQUFNLEtBQUssR0FBRyxNQUFNLGtDQUFlLENBQUMsc0JBQXNCLENBQ3hELE9BQU8sRUFDUCxlQUFlLENBQ2hCLENBQUM7Z0JBQ0YsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoQyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIk06XFxSZXBvXFxGYXJtZXJzIE1hcmtldCBQbGF0Zm9ybSB3ZWIgYW5kIGFwcFxcc3JjXFxsaWJcXHNlcnZpY2VzXFxfX3Rlc3RzX19cXHNoaXBwaW5nLnNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIPCfmpogU0hJUFBJTkcgU0VSVklDRSBURVNUIFNVSVRFXG4gKiBDb21wcmVoZW5zaXZlIHRlc3RzIGZvciBzaGlwcGluZyBjYWxjdWxhdGlvbnMgYW5kIHRyYWNraW5nXG4gKlxuICogQ292ZXJhZ2U6IDMwKyB0ZXN0cyBmb3IgYWxsIHNoaXBwaW5nIG9wZXJhdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBkYXRhYmFzZSB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgYmVmb3JlRWFjaCwgZGVzY3JpYmUsIGV4cGVjdCwgaXQgfSBmcm9tIFwiQGplc3QvZ2xvYmFsc1wiO1xuaW1wb3J0IHsgU2hpcHBpbmdTZXJ2aWNlIH0gZnJvbSBcIi4uL3NoaXBwaW5nLnNlcnZpY2VcIjtcblxuLy8gTW9jayB0aGUgZGF0YWJhc2Vcbmplc3QubW9jayhcIkAvbGliL2RhdGFiYXNlXCIsICgpID0+ICh7XG4gIGRhdGFiYXNlOiB7XG4gICAgb3JkZXI6IHtcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgICAgZmluZEZpcnN0OiBqZXN0LmZuKCksXG4gICAgfSxcbiAgfSxcbn0pKTtcblxuZGVzY3JpYmUoXCLwn5qaIFNoaXBwaW5nIFNlcnZpY2UgLSBEaXZpbmUgU2hpcHBpbmcgT3BlcmF0aW9uc1wiLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tPcmRlcklkID0gXCJvcmRlci0xMjNcIjtcbiAgY29uc3QgbW9ja0Rlc3RpbmF0aW9uID0ge1xuICAgIGNpdHk6IFwiUG9ydGxhbmRcIixcbiAgICBzdGF0ZTogXCJPUlwiLFxuICAgIHppcENvZGU6IFwiOTcyMDFcIixcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLwn5OmIGNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXNcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIHJldHVybiBzaGlwcGluZyByYXRlcyBmb3IgdmFsaWQgZGVzdGluYXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY2FsY3VsYXRlU2hpcHBpbmdSYXRlcyhcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIG1vY2tEZXN0aW5hdGlvblxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJhdGVzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocmF0ZXMpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgc2VydmljZTogXCJTVEFOREFSRFwiIH0pLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgc2VydmljZTogXCJFWFBSRVNTXCIgfSksXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBzZXJ2aWNlOiBcIk9WRVJOSUdIVFwiIH0pLFxuICAgICAgICBdKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiBTVEFOREFSRCBzaGlwcGluZyBvcHRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY2FsY3VsYXRlU2hpcHBpbmdSYXRlcyhcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIG1vY2tEZXN0aW5hdGlvblxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3RhbmRhcmQgPSByYXRlcy5maW5kKChyKSA9PiByLnNlcnZpY2UgPT09IFwiU1RBTkRBUkRcIik7XG4gICAgICBleHBlY3Qoc3RhbmRhcmQpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzZXJ2aWNlOiBcIlNUQU5EQVJEXCIsXG4gICAgICAgIGNvc3Q6IDUuOTksXG4gICAgICAgIGVzdGltYXRlZERheXM6IDUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiBFWFBSRVNTIHNoaXBwaW5nIG9wdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByYXRlcyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jYWxjdWxhdGVTaGlwcGluZ1JhdGVzKFxuICAgICAgICBtb2NrT3JkZXJJZCxcbiAgICAgICAgbW9ja0Rlc3RpbmF0aW9uXG4gICAgICApO1xuXG4gICAgICBjb25zdCBleHByZXNzID0gcmF0ZXMuZmluZCgocikgPT4gci5zZXJ2aWNlID09PSBcIkVYUFJFU1NcIik7XG4gICAgICBleHBlY3QoZXhwcmVzcykudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHNlcnZpY2U6IFwiRVhQUkVTU1wiLFxuICAgICAgICBjb3N0OiAxMi45OSxcbiAgICAgICAgZXN0aW1hdGVkRGF5czogMixcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIE9WRVJOSUdIVCBzaGlwcGluZyBvcHRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY2FsY3VsYXRlU2hpcHBpbmdSYXRlcyhcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIG1vY2tEZXN0aW5hdGlvblxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3Zlcm5pZ2h0ID0gcmF0ZXMuZmluZCgocikgPT4gci5zZXJ2aWNlID09PSBcIk9WRVJOSUdIVFwiKTtcbiAgICAgIGV4cGVjdChvdmVybmlnaHQpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzZXJ2aWNlOiBcIk9WRVJOSUdIVFwiLFxuICAgICAgICBjb3N0OiAyNC45OSxcbiAgICAgICAgZXN0aW1hdGVkRGF5czogMSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBjaXRpZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVzdGluYXRpb25zID0gW1xuICAgICAgICB7IGNpdHk6IFwiU2VhdHRsZVwiLCBzdGF0ZTogXCJXQVwiLCB6aXBDb2RlOiBcIjk4MTAxXCIgfSxcbiAgICAgICAgeyBjaXR5OiBcIkxvcyBBbmdlbGVzXCIsIHN0YXRlOiBcIkNBXCIsIHppcENvZGU6IFwiOTAwMDFcIiB9LFxuICAgICAgICB7IGNpdHk6IFwiTmV3IFlvcmtcIiwgc3RhdGU6IFwiTllcIiwgemlwQ29kZTogXCIxMDAwMVwiIH0sXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGRlc3Qgb2YgZGVzdGluYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgICAgZGVzdFxuICAgICAgICApO1xuICAgICAgICBleHBlY3QocmF0ZXMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgc3RhdGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlcyA9IFtcIkNBXCIsIFwiTllcIiwgXCJUWFwiLCBcIkZMXCIsIFwiSUxcIl07XG5cbiAgICAgIGZvciAoY29uc3Qgc3RhdGUgb2Ygc3RhdGVzKSB7XG4gICAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2l0eTogXCJUZXN0IENpdHlcIixcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgemlwQ29kZTogXCIxMjM0NVwiLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KHJhdGVzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgZGlmZmVyZW50IHppcCBjb2Rlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB6aXBDb2RlcyA9IFtcIjEwMDAxXCIsIFwiOTAyMTBcIiwgXCI2MDYwMVwiLCBcIjMzMTAxXCIsIFwiMDIxMDFcIl07XG5cbiAgICAgIGZvciAoY29uc3QgemlwQ29kZSBvZiB6aXBDb2Rlcykge1xuICAgICAgICBjb25zdCByYXRlcyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jYWxjdWxhdGVTaGlwcGluZ1JhdGVzKFxuICAgICAgICAgIG1vY2tPcmRlcklkLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNpdHk6IFwiVGVzdCBDaXR5XCIsXG4gICAgICAgICAgICBzdGF0ZTogXCJDQVwiLFxuICAgICAgICAgICAgemlwQ29kZSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChyYXRlcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIHJhdGVzIGluIG9yZGVyIG9mIGNvc3QgKGNoZWFwZXN0IGZpcnN0KVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByYXRlcyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jYWxjdWxhdGVTaGlwcGluZ1JhdGVzKFxuICAgICAgICBtb2NrT3JkZXJJZCxcbiAgICAgICAgbW9ja0Rlc3RpbmF0aW9uXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmF0ZXNbMF0uY29zdCkudG9CZUxlc3NUaGFuKHJhdGVzWzFdLmNvc3QpO1xuICAgICAgZXhwZWN0KHJhdGVzWzFdLmNvc3QpLnRvQmVMZXNzVGhhbihyYXRlc1syXS5jb3N0KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiByYXRlcyBpbiByZXZlcnNlIG9yZGVyIG9mIHNwZWVkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgIG1vY2tPcmRlcklkLFxuICAgICAgICBtb2NrRGVzdGluYXRpb25cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyYXRlc1swXS5lc3RpbWF0ZWREYXlzKS50b0JlR3JlYXRlclRoYW4ocmF0ZXNbMV0uZXN0aW1hdGVkRGF5cyk7XG4gICAgICBleHBlY3QocmF0ZXNbMV0uZXN0aW1hdGVkRGF5cykudG9CZUdyZWF0ZXJUaGFuKHJhdGVzWzJdLmVzdGltYXRlZERheXMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGF2ZSBjb25zaXN0ZW50IHJhdGUgc3RydWN0dXJlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgIG1vY2tPcmRlcklkLFxuICAgICAgICBtb2NrRGVzdGluYXRpb25cbiAgICAgICk7XG5cbiAgICAgIHJhdGVzLmZvckVhY2goKHJhdGUpID0+IHtcbiAgICAgICAgZXhwZWN0KHJhdGUpLnRvSGF2ZVByb3BlcnR5KFwic2VydmljZVwiKTtcbiAgICAgICAgZXhwZWN0KHJhdGUpLnRvSGF2ZVByb3BlcnR5KFwiY29zdFwiKTtcbiAgICAgICAgZXhwZWN0KHJhdGUpLnRvSGF2ZVByb3BlcnR5KFwiZXN0aW1hdGVkRGF5c1wiKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByYXRlLnNlcnZpY2UpLnRvQmUoXCJzdHJpbmdcIik7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmF0ZS5jb3N0KS50b0JlKFwibnVtYmVyXCIpO1xuICAgICAgICBleHBlY3QodHlwZW9mIHJhdGUuZXN0aW1hdGVkRGF5cykudG9CZShcIm51bWJlclwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIHBvc2l0aXZlIGNvc3RzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgIG1vY2tPcmRlcklkLFxuICAgICAgICBtb2NrRGVzdGluYXRpb25cbiAgICAgICk7XG5cbiAgICAgIHJhdGVzLmZvckVhY2goKHJhdGUpID0+IHtcbiAgICAgICAgZXhwZWN0KHJhdGUuY29zdCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZXR1cm4gcG9zaXRpdmUgZXN0aW1hdGVkIGRheXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmF0ZXMgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY2FsY3VsYXRlU2hpcHBpbmdSYXRlcyhcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIG1vY2tEZXN0aW5hdGlvblxuICAgICAgKTtcblxuICAgICAgcmF0ZXMuZm9yRWFjaCgocmF0ZSkgPT4ge1xuICAgICAgICBleHBlY3QocmF0ZS5lc3RpbWF0ZWREYXlzKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLwn4+377iPIGNyZWF0ZVNoaXBwaW5nTGFiZWxcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGNyZWF0ZSBzaGlwcGluZyBsYWJlbCBzdWNjZXNzZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIFwiU1RBTkRBUkRcIlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJsYWJlbElkXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJ0cmFja2luZ051bWJlclwiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubGFiZWxJZCkudG9NYXRjaCgvXkxCTFxcZCskLyk7XG4gICAgICBleHBlY3QocmVzdWx0LnRyYWNraW5nTnVtYmVyKS50b01hdGNoKC9eVFJLXFxkKyQvKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHVwZGF0ZSBvcmRlciBzdGF0dXMgdG8gUFJFUEFSSU5HIHdpdGggdHJhY2tpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChtb2NrT3JkZXJJZCwgXCJFWFBSRVNTXCIpO1xuXG4gICAgICBleHBlY3QoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBtb2NrT3JkZXJJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXI6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvXlRSS1xcZCskLyksXG4gICAgICAgICAgc2hpcHBpbmdTZXJ2aWNlOiBcIkVYUFJFU1NcIixcbiAgICAgICAgICBzdGF0dXM6IFwiUFJFUEFSSU5HXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHVwZGF0ZSBvcmRlciB3aXRoIHNoaXBwaW5nIHNlcnZpY2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChtb2NrT3JkZXJJZCwgXCJPVkVSTklHSFRcIik7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUNhbGwgPSBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QodXBkYXRlQ2FsbC5kYXRhKS50b01hdGNoT2JqZWN0KHsgc3RhdHVzOiBcIlBSRVBBUklOR1wiIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZ2VuZXJhdGUgdW5pcXVlIHRyYWNraW5nIG51bWJlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQxID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZVNoaXBwaW5nTGFiZWwoXG4gICAgICAgIFwib3JkZXItMVwiLFxuICAgICAgICBcIlNUQU5EQVJEXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBkaWZmZXJlbnQgdGltZXN0YW1wXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICAgICAgXCJvcmRlci0yXCIsXG4gICAgICAgIFwiU1RBTkRBUkRcIlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdDEudHJhY2tpbmdOdW1iZXIpLm5vdC50b0JlKHJlc3VsdDIudHJhY2tpbmdOdW1iZXIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZ2VuZXJhdGUgdW5pcXVlIGxhYmVsIElEc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKHt9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICAgICAgXCJvcmRlci0xXCIsXG4gICAgICAgIFwiU1RBTkRBUkRcIlxuICAgICAgKTtcblxuICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIGRpZmZlcmVudCB0aW1lc3RhbXBcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIpKTtcblxuICAgICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jcmVhdGVTaGlwcGluZ0xhYmVsKFxuICAgICAgICBcIm9yZGVyLTJcIixcbiAgICAgICAgXCJTVEFOREFSRFwiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0MS5sYWJlbElkKS5ub3QudG9CZShyZXN1bHQyLmxhYmVsSWQpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIFNUQU5EQVJEIHNlcnZpY2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIFwiU1RBTkRBUkRcIlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5vcmRlci51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBFWFBSRVNTIHNlcnZpY2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChcbiAgICAgICAgbW9ja09yZGVySWQsXG4gICAgICAgIFwiRVhQUkVTU1wiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIE9WRVJOSUdIVCBzZXJ2aWNlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSkubW9ja1Jlc29sdmVkVmFsdWUoe30gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZVNoaXBwaW5nTGFiZWwoXG4gICAgICAgIG1vY2tPcmRlcklkLFxuICAgICAgICBcIk9WRVJOSUdIVFwiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcHJvcGFnYXRlIGRhdGFiYXNlIGVycm9yc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvclwiKVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBTaGlwcGluZ1NlcnZpY2UuY3JlYXRlU2hpcHBpbmdMYWJlbChtb2NrT3JkZXJJZCwgXCJTVEFOREFSRFwiKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coXCJEYXRhYmFzZSBlcnJvclwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLwn5ONIGdldFRyYWNraW5nSW5mb1wiLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1RyYWNraW5nTnVtYmVyID0gXCJUUksxMjM0NTY3ODkwXCI7XG4gICAgY29uc3QgbW9ja09yZGVyID0ge1xuICAgICAgaWQ6IG1vY2tPcmRlcklkLFxuICAgICAgc3RhdHVzOiBcIlNISVBQRURcIixcbiAgICAgIHRyYWNraW5nTnVtYmVyOiBtb2NrVHJhY2tpbmdOdW1iZXIsXG4gICAgfTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiB0cmFja2luZyBpbmZvIGZvciB2YWxpZCB0cmFja2luZyBudW1iZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIuZmluZEZpcnN0KS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3JkZXIgYXMgYW55KTtcblxuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5nZXRUcmFja2luZ0luZm8obW9ja1RyYWNraW5nTnVtYmVyKTtcblxuICAgICAgZXhwZWN0KGluZm8pLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChpbmZvWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgb3JkZXJJZDogbW9ja09yZGVySWQsXG4gICAgICAgIHN0YXR1czogXCJTSElQUEVEXCIsXG4gICAgICAgIGxvY2F0aW9uOiBcIkRpc3RyaWJ1dGlvbiBDZW50ZXJcIixcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciBpbnZhbGlkIHRyYWNraW5nIG51bWJlclwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci5maW5kRmlyc3QpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCBpbmZvID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmdldFRyYWNraW5nSW5mbyhcIklOVkFMSUQxMjNcIik7XG5cbiAgICAgIGV4cGVjdChpbmZvKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGluY2x1ZGUgdGltZXN0YW1wIGluIHRyYWNraW5nIGluZm9cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIuZmluZEZpcnN0KS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3JkZXIgYXMgYW55KTtcblxuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5nZXRUcmFja2luZ0luZm8obW9ja1RyYWNraW5nTnVtYmVyKTtcblxuICAgICAgZXhwZWN0KGluZm9bMF0udGltZXN0YW1wKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHF1ZXJ5IGRhdGFiYXNlIHdpdGggdHJhY2tpbmcgbnVtYmVyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLm9yZGVyLmZpbmRGaXJzdCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja09yZGVyIGFzIGFueSk7XG5cbiAgICAgIGF3YWl0IFNoaXBwaW5nU2VydmljZS5nZXRUcmFja2luZ0luZm8obW9ja1RyYWNraW5nTnVtYmVyKTtcblxuICAgICAgZXhwZWN0KGRhdGFiYXNlLm9yZGVyLmZpbmRGaXJzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyB0cmFja2luZ051bWJlcjogbW9ja1RyYWNraW5nTnVtYmVyIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgb3JkZXIgc3RhdHVzZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzZXMgPSBbXCJQRU5ESU5HXCIsIFwiUFJPQ0VTU0lOR1wiLCBcIlNISVBQRURcIiwgXCJERUxJVkVSRURcIl07XG5cbiAgICAgIGZvciAoY29uc3Qgc3RhdHVzIG9mIHN0YXR1c2VzKSB7XG4gICAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLm9yZGVyLmZpbmRGaXJzdCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIC4uLm1vY2tPcmRlcixcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmdldFRyYWNraW5nSW5mbyhtb2NrVHJhY2tpbmdOdW1iZXIpO1xuICAgICAgICBleHBlY3QoaW5mb1swXS5zdGF0dXMpLnRvQmUoc3RhdHVzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIuZmluZEZpcnN0KS5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3JcIilcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgU2hpcHBpbmdTZXJ2aWNlLmdldFRyYWNraW5nSW5mbyhtb2NrVHJhY2tpbmdOdW1iZXIpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhcIkRhdGFiYXNlIGVycm9yXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIHRyYWNraW5nIGluZm8gd2l0aCBjb3JyZWN0IHN0cnVjdHVyZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci5maW5kRmlyc3QpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPcmRlciBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBpbmZvID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmdldFRyYWNraW5nSW5mbyhtb2NrVHJhY2tpbmdOdW1iZXIpO1xuXG4gICAgICBleHBlY3QoaW5mb1swXSkudG9IYXZlUHJvcGVydHkoXCJvcmRlcklkXCIpO1xuICAgICAgZXhwZWN0KGluZm9bMF0pLnRvSGF2ZVByb3BlcnR5KFwic3RhdHVzXCIpO1xuICAgICAgZXhwZWN0KGluZm9bMF0pLnRvSGF2ZVByb3BlcnR5KFwibG9jYXRpb25cIik7XG4gICAgICBleHBlY3QoaW5mb1swXSkudG9IYXZlUHJvcGVydHkoXCJ0aW1lc3RhbXBcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwi8J+UhCB1cGRhdGVTaGlwcGluZ1N0YXR1c1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgdXBkYXRlIHNoaXBwaW5nIHN0YXR1cyBzdWNjZXNzZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBhd2FpdCBTaGlwcGluZ1NlcnZpY2UudXBkYXRlU2hpcHBpbmdTdGF0dXMobW9ja09yZGVySWQsIFwiU0hJUFBFRFwiKTtcblxuICAgICAgZXhwZWN0KGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogbW9ja09yZGVySWQgfSxcbiAgICAgICAgZGF0YTogeyBzdGF0dXM6IFwiU0hJUFBFRFwiIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBQRU5ESU5HIHN0YXR1c1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKHt9IGFzIGFueSk7XG5cbiAgICAgIGF3YWl0IFNoaXBwaW5nU2VydmljZS51cGRhdGVTaGlwcGluZ1N0YXR1cyhtb2NrT3JkZXJJZCwgXCJQRU5ESU5HXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVDYWxsID0gamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwuZGF0YSkudG9NYXRjaE9iamVjdCh7IHN0YXR1czogXCJQRU5ESU5HXCIgfSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgaW52YWxpZCBzdGF0dXMgYnkgZGVmYXVsdGluZyB0byBQUkVQQVJJTkdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICAvLyBcIlBST0NFU1NJTkdcIiBpcyBub3QgaW4gdmFsaWQgc3RhdHVzZXMsIHNvIGl0IGRlZmF1bHRzIHRvIFwiUFJFUEFSSU5HXCJcbiAgICAgIGF3YWl0IFNoaXBwaW5nU2VydmljZS51cGRhdGVTaGlwcGluZ1N0YXR1cyhtb2NrT3JkZXJJZCwgXCJQUk9DRVNTSU5HXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVDYWxsID0gamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwuZGF0YSkudG9NYXRjaE9iamVjdCh7IHN0YXR1czogXCJQUkVQQVJJTkdcIiB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBTSElQUEVEIHN0YXR1c1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKHt9IGFzIGFueSk7XG5cbiAgICAgIGF3YWl0IFNoaXBwaW5nU2VydmljZS51cGRhdGVTaGlwcGluZ1N0YXR1cyhtb2NrT3JkZXJJZCwgXCJTSElQUEVEXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVDYWxsID0gamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwuZGF0YSkudG9NYXRjaE9iamVjdCh7IHN0YXR1czogXCJTSElQUEVEXCIgfSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgREVMSVZFUkVEIHN0YXR1c1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKHt9IGFzIGFueSk7XG5cbiAgICAgIGF3YWl0IFNoaXBwaW5nU2VydmljZS51cGRhdGVTaGlwcGluZ1N0YXR1cyhtb2NrT3JkZXJJZCwgXCJERUxJVkVSRURcIik7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUNhbGwgPSBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QodXBkYXRlQ2FsbC5kYXRhKS50b01hdGNoT2JqZWN0KHsgc3RhdHVzOiBcIkRFTElWRVJFRFwiIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIENBTkNFTExFRCBzdGF0dXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuXG4gICAgICBhd2FpdCBTaGlwcGluZ1NlcnZpY2UudXBkYXRlU2hpcHBpbmdTdGF0dXMobW9ja09yZGVySWQsIFwiQ0FOQ0VMTEVEXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVDYWxsID0gamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwuZGF0YSkudG9NYXRjaE9iamVjdCh7IHN0YXR1czogXCJDQU5DRUxMRURcIiB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHByb3BhZ2F0ZSBkYXRhYmFzZSBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKFwiVXBkYXRlIGZhaWxlZFwiKVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBTaGlwcGluZ1NlcnZpY2UudXBkYXRlU2hpcHBpbmdTdGF0dXMobW9ja09yZGVySWQsIFwiU0hJUFBFRFwiKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coXCJVcGRhdGUgZmFpbGVkXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdXBkYXRlIHN0YXR1cyBmb3IgZGlmZmVyZW50IG9yZGVyIElEc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5vcmRlci51cGRhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKHt9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IG9yZGVySWRzID0gW1wib3JkZXItMVwiLCBcIm9yZGVyLTJcIiwgXCJvcmRlci0zXCJdO1xuXG4gICAgICBmb3IgKGNvbnN0IG9yZGVySWQgb2Ygb3JkZXJJZHMpIHtcbiAgICAgICAgYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nU3RhdHVzKG9yZGVySWQsIFwiU0hJUFBFRFwiKTtcbiAgICAgICAgZXhwZWN0KGRhdGFiYXNlLm9yZGVyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBvcmRlcklkIH0sXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6IFwiU0hJUFBFRFwiIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIvCflIQgSW50ZWdyYXRpb24gU2NlbmFyaW9zXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBoYW5kbGUgY29tcGxldGUgc2hpcHBpbmcgd29ya2Zsb3dcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIudXBkYXRlKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSBhcyBhbnkpO1xuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2Uub3JkZXIuZmluZEZpcnN0KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlkOiBtb2NrT3JkZXJJZCxcbiAgICAgICAgc3RhdHVzOiBcIlNISVBQRURcIixcbiAgICAgICAgdHJhY2tpbmdOdW1iZXI6IFwiVFJLMTIzXCIsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIFN0ZXAgMTogQ2FsY3VsYXRlIHJhdGVzXG4gICAgICBjb25zdCByYXRlcyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jYWxjdWxhdGVTaGlwcGluZ1JhdGVzKFxuICAgICAgICBtb2NrT3JkZXJJZCxcbiAgICAgICAgbW9ja0Rlc3RpbmF0aW9uXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJhdGVzKS50b0hhdmVMZW5ndGgoMyk7XG5cbiAgICAgIC8vIFN0ZXAgMjogQ3JlYXRlIGxhYmVsXG4gICAgICBjb25zdCBsYWJlbCA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5jcmVhdGVTaGlwcGluZ0xhYmVsKFxuICAgICAgICBtb2NrT3JkZXJJZCxcbiAgICAgICAgXCJFWFBSRVNTXCJcbiAgICAgICk7XG4gICAgICBleHBlY3QobGFiZWwudHJhY2tpbmdOdW1iZXIpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIC8vIFN0ZXAgMzogVXBkYXRlIHN0YXR1c1xuICAgICAgYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nU3RhdHVzKG1vY2tPcmRlcklkLCBcIlNISVBQRURcIik7XG5cbiAgICAgIC8vIFN0ZXAgNDogR2V0IHRyYWNraW5nXG4gICAgICBjb25zdCB0cmFja2luZyA9IGF3YWl0IFNoaXBwaW5nU2VydmljZS5nZXRUcmFja2luZ0luZm8oXG4gICAgICAgIGxhYmVsLnRyYWNraW5nTnVtYmVyXG4gICAgICApO1xuICAgICAgZXhwZWN0KHRyYWNraW5nKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIHJhdGUgY2FsY3VsYXRpb24gZm9yIG11bHRpcGxlIG9yZGVyc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvcmRlcklkcyA9IFtcIm9yZGVyLTFcIiwgXCJvcmRlci0yXCIsIFwib3JkZXItM1wiXTtcblxuICAgICAgZm9yIChjb25zdCBvcmRlcklkIG9mIG9yZGVySWRzKSB7XG4gICAgICAgIGNvbnN0IHJhdGVzID0gYXdhaXQgU2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZVNoaXBwaW5nUmF0ZXMoXG4gICAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgICBtb2NrRGVzdGluYXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KHJhdGVzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cclxuIl0sInZlcnNpb24iOjN9