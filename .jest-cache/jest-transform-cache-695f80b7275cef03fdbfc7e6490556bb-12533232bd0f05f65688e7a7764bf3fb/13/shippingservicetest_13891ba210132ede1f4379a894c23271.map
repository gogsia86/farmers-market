{"file":"M:\\Repo\\Farmers Market Platform web and app\\src\\lib\\services\\__tests__\\shipping.service.test.ts","mappings":"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","names":[],"sources":["M:\\Repo\\Farmers Market Platform web and app\\src\\lib\\services\\__tests__\\shipping.service.test.ts"],"sourcesContent":["/**\n * ðŸšš SHIPPING SERVICE TEST SUITE\n * Comprehensive tests for shipping calculations and tracking\n *\n * Coverage: 30+ tests for all shipping operations\n */\n\nimport { database } from \"@/lib/database\";\nimport { beforeEach, describe, expect, it } from \"@jest/globals\";\nimport { ShippingService } from \"../shipping.service\";\n\n// Mock the database\njest.mock(\"@/lib/database\", () => ({\n  database: {\n    order: {\n      update: jest.fn(),\n      findFirst: jest.fn(),\n    },\n  },\n}));\n\ndescribe(\"ðŸšš Shipping Service - Divine Shipping Operations\", () => {\n  const mockOrderId = \"order-123\";\n  const mockDestination = {\n    city: \"Portland\",\n    state: \"OR\",\n    zipCode: \"97201\",\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"ðŸ“¦ calculateShippingRates\", () => {\n    it(\"should return shipping rates for valid destination\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      expect(rates).toHaveLength(3);\n      expect(rates).toEqual(\n        expect.arrayContaining([\n          expect.objectContaining({ service: \"STANDARD\" }),\n          expect.objectContaining({ service: \"EXPRESS\" }),\n          expect.objectContaining({ service: \"OVERNIGHT\" }),\n        ])\n      );\n    });\n\n    it(\"should return STANDARD shipping option\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      const standard = rates.find((r) => r.service === \"STANDARD\");\n      expect(standard).toMatchObject({\n        service: \"STANDARD\",\n        cost: 5.99,\n        estimatedDays: 5,\n      });\n    });\n\n    it(\"should return EXPRESS shipping option\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      const express = rates.find((r) => r.service === \"EXPRESS\");\n      expect(express).toMatchObject({\n        service: \"EXPRESS\",\n        cost: 12.99,\n        estimatedDays: 2,\n      });\n    });\n\n    it(\"should return OVERNIGHT shipping option\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      const overnight = rates.find((r) => r.service === \"OVERNIGHT\");\n      expect(overnight).toMatchObject({\n        service: \"OVERNIGHT\",\n        cost: 24.99,\n        estimatedDays: 1,\n      });\n    });\n\n    it(\"should handle different cities\", async () => {\n      const destinations = [\n        { city: \"Seattle\", state: \"WA\", zipCode: \"98101\" },\n        { city: \"Los Angeles\", state: \"CA\", zipCode: \"90001\" },\n        { city: \"New York\", state: \"NY\", zipCode: \"10001\" },\n      ];\n\n      for (const dest of destinations) {\n        const rates = await ShippingService.calculateShippingRates(\n          mockOrderId,\n          dest\n        );\n        expect(rates).toHaveLength(3);\n      }\n    });\n\n    it(\"should handle different states\", async () => {\n      const states = [\"CA\", \"NY\", \"TX\", \"FL\", \"IL\"];\n\n      for (const state of states) {\n        const rates = await ShippingService.calculateShippingRates(\n          mockOrderId,\n          {\n            city: \"Test City\",\n            state,\n            zipCode: \"12345\",\n          }\n        );\n        expect(rates).toHaveLength(3);\n      }\n    });\n\n    it(\"should handle different zip codes\", async () => {\n      const zipCodes = [\"10001\", \"90210\", \"60601\", \"33101\", \"02101\"];\n\n      for (const zipCode of zipCodes) {\n        const rates = await ShippingService.calculateShippingRates(\n          mockOrderId,\n          {\n            city: \"Test City\",\n            state: \"CA\",\n            zipCode,\n          }\n        );\n        expect(rates).toHaveLength(3);\n      }\n    });\n\n    it(\"should return rates in order of cost (cheapest first)\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      expect(rates[0].cost).toBeLessThan(rates[1].cost);\n      expect(rates[1].cost).toBeLessThan(rates[2].cost);\n    });\n\n    it(\"should return rates in reverse order of speed\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      expect(rates[0].estimatedDays).toBeGreaterThan(rates[1].estimatedDays);\n      expect(rates[1].estimatedDays).toBeGreaterThan(rates[2].estimatedDays);\n    });\n\n    it(\"should have consistent rate structure\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      rates.forEach((rate) => {\n        expect(rate).toHaveProperty(\"service\");\n        expect(rate).toHaveProperty(\"cost\");\n        expect(rate).toHaveProperty(\"estimatedDays\");\n        expect(typeof rate.service).toBe(\"string\");\n        expect(typeof rate.cost).toBe(\"number\");\n        expect(typeof rate.estimatedDays).toBe(\"number\");\n      });\n    });\n\n    it(\"should return positive costs\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      rates.forEach((rate) => {\n        expect(rate.cost).toBeGreaterThan(0);\n      });\n    });\n\n    it(\"should return positive estimated days\", async () => {\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n\n      rates.forEach((rate) => {\n        expect(rate.estimatedDays).toBeGreaterThan(0);\n      });\n    });\n  });\n\n  describe(\"ðŸ·ï¸ createShippingLabel\", () => {\n    it(\"should create shipping label successfully\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result = await ShippingService.createShippingLabel(\n        mockOrderId,\n        \"STANDARD\"\n      );\n\n      expect(result).toHaveProperty(\"labelId\");\n      expect(result).toHaveProperty(\"trackingNumber\");\n      expect(result.labelId).toMatch(/^LBL\\d+$/);\n      expect(result.trackingNumber).toMatch(/^TRK\\d+$/);\n    });\n\n    it(\"should update order status to PREPARING with tracking\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.createShippingLabel(mockOrderId, \"EXPRESS\");\n\n      expect(database.order.update).toHaveBeenCalledWith({\n        where: { id: mockOrderId },\n        data: {\n          trackingNumber: expect.stringMatching(/^TRK\\d+$/),\n          shippingService: \"EXPRESS\",\n          status: \"PREPARING\",\n        },\n      });\n    });\n\n    it(\"should update order with shipping service\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.createShippingLabel(mockOrderId, \"OVERNIGHT\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"PREPARING\" });\n    });\n\n    it(\"should generate unique tracking numbers\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result1 = await ShippingService.createShippingLabel(\n        \"order-1\",\n        \"STANDARD\"\n      );\n\n      // Small delay to ensure different timestamp\n      await new Promise((resolve) => setTimeout(resolve, 2));\n\n      const result2 = await ShippingService.createShippingLabel(\n        \"order-2\",\n        \"STANDARD\"\n      );\n\n      expect(result1.trackingNumber).not.toBe(result2.trackingNumber);\n    });\n\n    it(\"should generate unique label IDs\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result1 = await ShippingService.createShippingLabel(\n        \"order-1\",\n        \"STANDARD\"\n      );\n\n      // Small delay to ensure different timestamp\n      await new Promise((resolve) => setTimeout(resolve, 2));\n\n      const result2 = await ShippingService.createShippingLabel(\n        \"order-2\",\n        \"STANDARD\"\n      );\n\n      expect(result1.labelId).not.toBe(result2.labelId);\n    });\n\n    it(\"should handle STANDARD service\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result = await ShippingService.createShippingLabel(\n        mockOrderId,\n        \"STANDARD\"\n      );\n\n      expect(result).toBeDefined();\n      expect(database.order.update).toHaveBeenCalled();\n    });\n\n    it(\"should handle EXPRESS service\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result = await ShippingService.createShippingLabel(\n        mockOrderId,\n        \"EXPRESS\"\n      );\n\n      expect(result).toBeDefined();\n      expect(database.order.update).toHaveBeenCalled();\n    });\n\n    it(\"should handle OVERNIGHT service\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const result = await ShippingService.createShippingLabel(\n        mockOrderId,\n        \"OVERNIGHT\"\n      );\n\n      expect(result).toBeDefined();\n      expect(database.order.update).toHaveBeenCalled();\n    });\n\n    it(\"should propagate database errors\", async () => {\n      jest.mocked(database.order.update).mockRejectedValue(\n        new Error(\"Database error\")\n      );\n\n      await expect(\n        ShippingService.createShippingLabel(mockOrderId, \"STANDARD\")\n      ).rejects.toThrow(\"Database error\");\n    });\n  });\n\n  describe(\"ðŸ“ getTrackingInfo\", () => {\n    const mockTrackingNumber = \"TRK1234567890\";\n    const mockOrder = {\n      id: mockOrderId,\n      status: \"SHIPPED\",\n      trackingNumber: mockTrackingNumber,\n    };\n\n    it(\"should return tracking info for valid tracking number\", async () => {\n      jest.mocked(database.order.findFirst).mockResolvedValue(mockOrder as any);\n\n      const info = await ShippingService.getTrackingInfo(mockTrackingNumber);\n\n      expect(info).toHaveLength(1);\n      expect(info[0]).toMatchObject({\n        orderId: mockOrderId,\n        status: \"SHIPPED\",\n        location: \"Distribution Center\",\n      });\n    });\n\n    it(\"should return empty array for invalid tracking number\", async () => {\n      jest.mocked(database.order.findFirst).mockResolvedValue(null);\n\n      const info = await ShippingService.getTrackingInfo(\"INVALID123\");\n\n      expect(info).toEqual([]);\n    });\n\n    it(\"should include timestamp in tracking info\", async () => {\n      jest.mocked(database.order.findFirst).mockResolvedValue(mockOrder as any);\n\n      const info = await ShippingService.getTrackingInfo(mockTrackingNumber);\n\n      expect(info[0].timestamp).toBeInstanceOf(Date);\n    });\n\n    it(\"should query database with tracking number\", async () => {\n      jest.mocked(database.order.findFirst).mockResolvedValue(mockOrder as any);\n\n      await ShippingService.getTrackingInfo(mockTrackingNumber);\n\n      expect(database.order.findFirst).toHaveBeenCalledWith({\n        where: { trackingNumber: mockTrackingNumber },\n      });\n    });\n\n    it(\"should handle different order statuses\", async () => {\n      const statuses = [\"PENDING\", \"PROCESSING\", \"SHIPPED\", \"DELIVERED\"];\n\n      for (const status of statuses) {\n        jest.mocked(database.order.findFirst).mockResolvedValue({\n          ...mockOrder,\n          status,\n        } as any);\n\n        const info = await ShippingService.getTrackingInfo(mockTrackingNumber);\n        expect(info[0].status).toBe(status);\n      }\n    });\n\n    it(\"should handle database errors\", async () => {\n      jest.mocked(database.order.findFirst).mockRejectedValue(\n        new Error(\"Database error\")\n      );\n\n      await expect(\n        ShippingService.getTrackingInfo(mockTrackingNumber)\n      ).rejects.toThrow(\"Database error\");\n    });\n\n    it(\"should return tracking info with correct structure\", async () => {\n      jest.mocked(database.order.findFirst).mockResolvedValue(mockOrder as any);\n\n      const info = await ShippingService.getTrackingInfo(mockTrackingNumber);\n\n      expect(info[0]).toHaveProperty(\"orderId\");\n      expect(info[0]).toHaveProperty(\"status\");\n      expect(info[0]).toHaveProperty(\"location\");\n      expect(info[0]).toHaveProperty(\"timestamp\");\n    });\n  });\n\n  describe(\"ðŸ”„ updateShippingStatus\", () => {\n    it(\"should update shipping status successfully\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.updateShippingStatus(mockOrderId, \"SHIPPED\");\n\n      expect(database.order.update).toHaveBeenCalledWith({\n        where: { id: mockOrderId },\n        data: { status: \"SHIPPED\" },\n      });\n    });\n\n    it(\"should handle PENDING status\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.updateShippingStatus(mockOrderId, \"PENDING\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"PENDING\" });\n    });\n\n    it(\"should handle invalid status by defaulting to PREPARING\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      // \"PROCESSING\" is not in valid statuses, so it defaults to \"PREPARING\"\n      await ShippingService.updateShippingStatus(mockOrderId, \"PROCESSING\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"PREPARING\" });\n    });\n\n    it(\"should handle SHIPPED status\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.updateShippingStatus(mockOrderId, \"SHIPPED\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"SHIPPED\" });\n    });\n\n    it(\"should handle DELIVERED status\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.updateShippingStatus(mockOrderId, \"DELIVERED\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"DELIVERED\" });\n    });\n\n    it(\"should handle CANCELLED status\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      await ShippingService.updateShippingStatus(mockOrderId, \"CANCELLED\");\n\n      const updateCall = jest.mocked(database.order.update).mock.calls[0][0];\n      expect(updateCall.data).toMatchObject({ status: \"CANCELLED\" });\n    });\n\n    it(\"should propagate database errors\", async () => {\n      jest.mocked(database.order.update).mockRejectedValue(\n        new Error(\"Update failed\")\n      );\n\n      await expect(\n        ShippingService.updateShippingStatus(mockOrderId, \"SHIPPED\")\n      ).rejects.toThrow(\"Update failed\");\n    });\n\n    it(\"should update status for different order IDs\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n\n      const orderIds = [\"order-1\", \"order-2\", \"order-3\"];\n\n      for (const orderId of orderIds) {\n        await ShippingService.updateShippingStatus(orderId, \"SHIPPED\");\n        expect(database.order.update).toHaveBeenCalledWith({\n          where: { id: orderId },\n          data: { status: \"SHIPPED\" },\n        });\n      }\n    });\n  });\n\n  describe(\"ðŸ”„ Integration Scenarios\", () => {\n    it(\"should handle complete shipping workflow\", async () => {\n      jest.mocked(database.order.update).mockResolvedValue({} as any);\n      jest.mocked(database.order.findFirst).mockResolvedValue({\n        id: mockOrderId,\n        status: \"SHIPPED\",\n        trackingNumber: \"TRK123\",\n      } as any);\n\n      // Step 1: Calculate rates\n      const rates = await ShippingService.calculateShippingRates(\n        mockOrderId,\n        mockDestination\n      );\n      expect(rates).toHaveLength(3);\n\n      // Step 2: Create label\n      const label = await ShippingService.createShippingLabel(\n        mockOrderId,\n        \"EXPRESS\"\n      );\n      expect(label.trackingNumber).toBeDefined();\n\n      // Step 3: Update status\n      await ShippingService.updateShippingStatus(mockOrderId, \"SHIPPED\");\n\n      // Step 4: Get tracking\n      const tracking = await ShippingService.getTrackingInfo(\n        label.trackingNumber\n      );\n      expect(tracking).toBeDefined();\n    });\n\n    it(\"should handle rate calculation for multiple orders\", async () => {\n      const orderIds = [\"order-1\", \"order-2\", \"order-3\"];\n\n      for (const orderId of orderIds) {\n        const rates = await ShippingService.calculateShippingRates(\n          orderId,\n          mockDestination\n        );\n        expect(rates).toHaveLength(3);\n      }\n    });\n  });\n});\n\r\n"],"version":3}