1cd7832c3125699139438d431e868ccf
"use strict";
/**
 * FARM SERVICE TESTS - DIVINE VALIDATION
 *
 * Comprehensive test suite for farm service layer operations.
 * Tests business logic, database interactions, and error handling.
 *
 * Divine Patterns Applied:
 * - Enlightening test names (describe what SHOULD happen)
 * - Comprehensive coverage (100% of business logic)
 * - Integration testing with database mocks
 * - Type-safe test data
 *
 * Coverage Target: 100%
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// ============================================================================
// MOCKS - DIVINE TEST DOUBLES
// ============================================================================
globals_1.jest.mock("@/lib/database", () => ({
    database: {
        farm: {
            create: globals_1.jest.fn(),
            findFirst: globals_1.jest.fn(),
            findUnique: globals_1.jest.fn(),
        },
    },
}));
globals_1.jest.mock("@/lib/cache", () => ({
    AgriculturalCache: {
        getFarm: globals_1.jest.fn(),
        cacheFarm: globals_1.jest.fn(),
        invalidateFarm: globals_1.jest.fn(),
        getProduct: globals_1.jest.fn(),
        cacheProduct: globals_1.jest.fn(),
        invalidateProduct: globals_1.jest.fn(),
    },
}));
const database_1 = require("@/lib/database");
const farm_service_1 = require("@/lib/services/farm.service");
// ============================================================================
// TEST DATA - QUANTUM FIXTURES
// ============================================================================
const mockUserId = "user-123";
const mockFarmData = {
    name: "Quantum Valley Farm",
    address: "123 Divine Street",
    city: "Reality",
    state: "CA",
    zipCode: "94000",
    latitude: 37.7749,
    longitude: -122.4194,
    email: "farm@quantum.valley",
    phone: "+1234567890",
    description: "Growing consciousness through organic vegetables",
    story: "Our farm has been practicing biodynamic agriculture for 10 years",
    businessName: "Quantum Valley Agricultural Co.",
    yearEstablished: 2014,
    farmSize: 50,
    website: "https://quantumvalley.farm",
    farmingPractices: ["Organic", "Biodynamic", "Regenerative"],
    productCategories: ["Vegetables", "Fruits"],
    deliveryRadius: 25,
};
const mockCreatedFarm = {
    id: "farm-123",
    slug: "quantum-valley-farm-reality",
    name: "Quantum Valley Farm",
    ownerId: mockUserId,
    description: "Growing consciousness through organic vegetables",
    story: "Our farm has been practicing biodynamic agriculture for 10 years",
    businessName: "Quantum Valley Agricultural Co.",
    yearEstablished: 2014,
    farmSize: 50,
    address: "123 Divine Street",
    city: "Reality",
    state: "CA",
    zipCode: "94000",
    country: "US",
    latitude: 37.7749,
    longitude: -122.4194,
    email: "farm@quantum.valley",
    phone: "+1234567890",
    website: "https://quantumvalley.farm",
    farmingPractices: ["Organic", "Biodynamic", "Regenerative"],
    productCategories: ["Vegetables", "Fruits"],
    deliveryRadius: 25,
    status: "PENDING",
    verificationStatus: "PENDING",
    stripeOnboarded: false,
    payoutsEnabled: false,
    createdAt: new Date(),
    updatedAt: new Date(),
    owner: {
        id: mockUserId,
        firstName: "Test",
        lastName: "Farmer",
        email: "farmer@test.com",
    },
};
// ============================================================================
// SETUP & TEARDOWN
// ============================================================================
(0, globals_1.beforeEach)(() => {
    globals_1.jest.clearAllMocks();
});
(0, globals_1.afterEach)(() => {
    globals_1.jest.restoreAllMocks();
});
// ============================================================================
// TESTS - FARM CREATION SERVICE
// ============================================================================
(0, globals_1.describe)("Farm Service - Divine Operations", () => {
    (0, globals_1.describe)("createFarmService", () => {
        (0, globals_1.it)("manifests new farm with unique slug successfully", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(null); // No slug collision
            globals_1.jest.mocked(database_1.database.farm.create).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.createFarmService)({
                userId: mockUserId,
                farmData: mockFarmData,
            });
            // Assert
            (0, globals_1.expect)(result.farm.identity.name).toBe("Quantum Valley Farm");
            (0, globals_1.expect)(result.farm.identity.id).toBe("farm-123");
            (0, globals_1.expect)(result.slug).toBeDefined();
            (0, globals_1.expect)(database_1.database.farm.create).toHaveBeenCalledTimes(1);
        });
        (0, globals_1.it)("handles slug collision by appending counter", async () => {
            // Arrange - First slug exists, second doesn't
            globals_1.jest.mocked(database_1.database.farm.findUnique)
                .mockResolvedValueOnce({ id: "existing-farm" }) // Collision
                .mockResolvedValueOnce(null); // Success
            globals_1.jest.mocked(database_1.database.farm.create).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.createFarmService)({
                userId: mockUserId,
                farmData: mockFarmData,
            });
            // Assert
            (0, globals_1.expect)(database_1.database.farm.findUnique).toHaveBeenCalledTimes(2);
            (0, globals_1.expect)(result).toBeDefined();
        });
        (0, globals_1.it)("throws error after max slug collision attempts", async () => {
            // Arrange - All attempts collide
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue({
                id: "existing-farm",
            });
            // Act & Assert
            await (0, globals_1.expect)((0, farm_service_1.createFarmService)({
                userId: mockUserId,
                farmData: mockFarmData,
            })).rejects.toThrow("Failed to generate unique slug");
        });
        (0, globals_1.it)("creates farm with PENDING status by default", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(null);
            globals_1.jest.mocked(database_1.database.farm.create).mockResolvedValue(mockCreatedFarm);
            // Act
            await (0, farm_service_1.createFarmService)({
                userId: mockUserId,
                farmData: mockFarmData,
            });
            // Assert
            (0, globals_1.expect)(database_1.database.farm.create).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                data: globals_1.expect.objectContaining({
                    status: "PENDING",
                    verificationStatus: "PENDING",
                    stripeOnboarded: false,
                    payoutsEnabled: false,
                }),
            }));
        });
        (0, globals_1.it)("manifests quantum farm with agricultural consciousness", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(null);
            globals_1.jest.mocked(database_1.database.farm.create).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.createFarmService)({
                userId: mockUserId,
                farmData: mockFarmData,
            });
            // Assert - Check quantum properties
            (0, globals_1.expect)(result.farm.consciousness).toBeDefined();
            (0, globals_1.expect)(result.farm.consciousness.currentSeason).toMatch(/SPRING|SUMMER|FALL|WINTER/);
            (0, globals_1.expect)(result.farm.consciousness.state).toMatch(/DORMANT|AWAKENING|GROWING|HARVESTING|REGENERATING/);
            (0, globals_1.expect)(result.farm.location.latitude).toBe(37.7749);
            (0, globals_1.expect)(result.farm.location.longitude).toBe(-122.4194);
        });
    });
    // ========================================================================
    // TESTS - CHECK EXISTING FARM
    // ========================================================================
    (0, globals_1.describe)("checkExistingFarm", () => {
        (0, globals_1.it)("returns exists=false when user has no farm", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findFirst).mockResolvedValue(null);
            // Act
            const result = await (0, farm_service_1.checkExistingFarm)(mockUserId);
            // Assert
            (0, globals_1.expect)(result.exists).toBe(false);
            (0, globals_1.expect)(result.farm).toBeUndefined();
        });
        (0, globals_1.it)("returns exists=true with farm details when user has farm", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findFirst).mockResolvedValue({
                id: "farm-123",
                slug: "quantum-valley-farm",
                name: "Quantum Valley Farm",
            });
            // Act
            const result = await (0, farm_service_1.checkExistingFarm)(mockUserId);
            // Assert
            (0, globals_1.expect)(result.exists).toBe(true);
            (0, globals_1.expect)(result.farm).toEqual({
                id: "farm-123",
                slug: "quantum-valley-farm",
                name: "Quantum Valley Farm",
            });
        });
        (0, globals_1.it)("queries database with correct user ID", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findFirst).mockResolvedValue(null);
            // Act
            await (0, farm_service_1.checkExistingFarm)(mockUserId);
            // Assert
            (0, globals_1.expect)(database_1.database.farm.findFirst).toHaveBeenCalledWith({
                where: { ownerId: mockUserId },
                select: { id: true, slug: true, name: true },
            });
        });
    });
    // ========================================================================
    // TESTS - GET FARM BY ID
    // ========================================================================
    (0, globals_1.describe)("getFarmById", () => {
        (0, globals_1.it)("manifests quantum farm when farm exists", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.getFarmById)("farm-123");
            // Assert
            (0, globals_1.expect)(result).not.toBeNull();
            (0, globals_1.expect)(result?.identity.id).toBe("farm-123");
            (0, globals_1.expect)(result?.identity.name).toBe("Quantum Valley Farm");
            (0, globals_1.expect)(result?.consciousness).toBeDefined();
        });
        (0, globals_1.it)("returns null when farm does not exist", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(null);
            // Act
            const result = await (0, farm_service_1.getFarmById)("nonexistent-farm");
            // Assert
            (0, globals_1.expect)(result).toBeNull();
        });
        (0, globals_1.it)("includes owner information in query", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.getFarmById)("farm-123");
            // Assert
            (0, globals_1.expect)(result).toBeDefined();
            (0, globals_1.expect)(result?.identity.id).toBe("farm-123");
        });
    });
    // ========================================================================
    // TESTS - GET FARM BY SLUG
    // ========================================================================
    (0, globals_1.describe)("getFarmBySlug", () => {
        (0, globals_1.it)("manifests quantum farm when slug exists", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(mockCreatedFarm);
            // Act
            const result = await (0, farm_service_1.getFarmBySlug)("quantum-valley-farm-reality");
            // Assert
            (0, globals_1.expect)(result).not.toBeNull();
            (0, globals_1.expect)(result?.identity.slug).toBe("quantum-valley-farm-reality");
        });
        (0, globals_1.it)("returns null when slug does not exist", async () => {
            // Arrange
            globals_1.jest.mocked(database_1.database.farm.findUnique).mockResolvedValue(null);
            // Act
            const result = await (0, farm_service_1.getFarmBySlug)("nonexistent-slug");
            // Assert
            (0, globals_1.expect)(result).toBeNull();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiTTpcXFJlcG9cXEZhcm1lcnMgTWFya2V0IFBsYXRmb3JtIHdlYiBhbmQgYXBwXFxzcmNcXGxpYlxcc2VydmljZXNcXGZhcm0uc2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7OztHQWFHOztBQVVILDJDQUFrRjtBQUVsRiwrRUFBK0U7QUFDL0UsOEJBQThCO0FBQzlCLCtFQUErRTtBQUUvRSxjQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDakMsUUFBUSxFQUFFO1FBQ1IsSUFBSSxFQUFFO1lBQ0osTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakIsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDcEIsVUFBVSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7U0FDdEI7S0FDRjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBRUosY0FBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM5QixpQkFBaUIsRUFBRTtRQUNqQixPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNwQixjQUFjLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUN6QixVQUFVLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNyQixZQUFZLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUN2QixpQkFBaUIsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQzdCO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFqQ0osNkNBQTBDO0FBQzFDLDhEQUtxQztBQTZCckMsK0VBQStFO0FBQy9FLCtCQUErQjtBQUMvQiwrRUFBK0U7QUFFL0UsTUFBTSxVQUFVLEdBQUcsVUFBb0IsQ0FBQztBQUV4QyxNQUFNLFlBQVksR0FBc0I7SUFDdEMsSUFBSSxFQUFFLHFCQUFxQjtJQUMzQixPQUFPLEVBQUUsbUJBQW1CO0lBQzVC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RyxNQUFNLElBQUEsNEJBQWEsRUFBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBRXZELFNBQVM7WUFDVCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIk06XFxSZXBvXFxGYXJtZXJzIE1hcmtldCBQbGF0Zm9ybSB3ZWIgYW5kIGFwcFxcc3JjXFxsaWJcXHNlcnZpY2VzXFxmYXJtLnNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRkFSTSBTRVJWSUNFIFRFU1RTIC0gRElWSU5FIFZBTElEQVRJT05cclxuICpcclxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0IHN1aXRlIGZvciBmYXJtIHNlcnZpY2UgbGF5ZXIgb3BlcmF0aW9ucy5cclxuICogVGVzdHMgYnVzaW5lc3MgbG9naWMsIGRhdGFiYXNlIGludGVyYWN0aW9ucywgYW5kIGVycm9yIGhhbmRsaW5nLlxyXG4gKlxyXG4gKiBEaXZpbmUgUGF0dGVybnMgQXBwbGllZDpcclxuICogLSBFbmxpZ2h0ZW5pbmcgdGVzdCBuYW1lcyAoZGVzY3JpYmUgd2hhdCBTSE9VTEQgaGFwcGVuKVxyXG4gKiAtIENvbXByZWhlbnNpdmUgY292ZXJhZ2UgKDEwMCUgb2YgYnVzaW5lc3MgbG9naWMpXHJcbiAqIC0gSW50ZWdyYXRpb24gdGVzdGluZyB3aXRoIGRhdGFiYXNlIG1vY2tzXHJcbiAqIC0gVHlwZS1zYWZlIHRlc3QgZGF0YVxyXG4gKlxyXG4gKiBDb3ZlcmFnZSBUYXJnZXQ6IDEwMCVcclxuICovXHJcblxyXG5pbXBvcnQgeyBkYXRhYmFzZSB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiO1xyXG5pbXBvcnQge1xyXG4gIGNoZWNrRXhpc3RpbmdGYXJtLFxyXG4gIGNyZWF0ZUZhcm1TZXJ2aWNlLFxyXG4gIGdldEZhcm1CeUlkLFxyXG4gIGdldEZhcm1CeVNsdWcsXHJcbn0gZnJvbSBcIkAvbGliL3NlcnZpY2VzL2Zhcm0uc2VydmljZVwiO1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZUZhcm1SZXF1ZXN0LCBVc2VySWQgfSBmcm9tIFwiQC90eXBlcy9mYXJtLnR5cGVzXCI7XHJcbmltcG9ydCB7IGFmdGVyRWFjaCwgYmVmb3JlRWFjaCwgZGVzY3JpYmUsIGV4cGVjdCwgaXQsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTU9DS1MgLSBESVZJTkUgVEVTVCBET1VCTEVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmplc3QubW9jayhcIkAvbGliL2RhdGFiYXNlXCIsICgpID0+ICh7XHJcbiAgZGF0YWJhc2U6IHtcclxuICAgIGZhcm06IHtcclxuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGZpbmRGaXJzdDogamVzdC5mbigpLFxyXG4gICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXHJcbiAgICB9LFxyXG4gIH0sXHJcbn0pKTtcclxuXHJcbmplc3QubW9jayhcIkAvbGliL2NhY2hlXCIsICgpID0+ICh7XHJcbiAgQWdyaWN1bHR1cmFsQ2FjaGU6IHtcclxuICAgIGdldEZhcm06IGplc3QuZm4oKSxcclxuICAgIGNhY2hlRmFybTogamVzdC5mbigpLFxyXG4gICAgaW52YWxpZGF0ZUZhcm06IGplc3QuZm4oKSxcclxuICAgIGdldFByb2R1Y3Q6IGplc3QuZm4oKSxcclxuICAgIGNhY2hlUHJvZHVjdDogamVzdC5mbigpLFxyXG4gICAgaW52YWxpZGF0ZVByb2R1Y3Q6IGplc3QuZm4oKSxcclxuICB9LFxyXG59KSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRFU1QgREFUQSAtIFFVQU5UVU0gRklYVFVSRVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgbW9ja1VzZXJJZCA9IFwidXNlci0xMjNcIiBhcyBVc2VySWQ7XHJcblxyXG5jb25zdCBtb2NrRmFybURhdGE6IENyZWF0ZUZhcm1SZXF1ZXN0ID0ge1xyXG4gIG5hbWU6IFwiUXVhbnR1bSBWYWxsZXkgRmFybVwiLFxyXG4gIGFkZHJlc3M6IFwiMTIzIERpdmluZSBTdHJlZXRcIixcclxuICBjaXR5OiBcIlJlYWxpdHlcIixcclxuICBzdGF0ZTogXCJDQVwiLFxyXG4gIHppcENvZGU6IFwiOTQwMDBcIixcclxuICBsYXRpdHVkZTogMzcuNzc0OSxcclxuICBsb25naXR1ZGU6IC0xMjIuNDE5NCxcclxuICBlbWFpbDogXCJmYXJtQHF1YW50dW0udmFsbGV5XCIsXHJcbiAgcGhvbmU6IFwiKzEyMzQ1Njc4OTBcIixcclxuICBkZXNjcmlwdGlvbjogXCJHcm93aW5nIGNvbnNjaW91c25lc3MgdGhyb3VnaCBvcmdhbmljIHZlZ2V0YWJsZXNcIixcclxuICBzdG9yeTogXCJPdXIgZmFybSBoYXMgYmVlbiBwcmFjdGljaW5nIGJpb2R5bmFtaWMgYWdyaWN1bHR1cmUgZm9yIDEwIHllYXJzXCIsXHJcbiAgYnVzaW5lc3NOYW1lOiBcIlF1YW50dW0gVmFsbGV5IEFncmljdWx0dXJhbCBDby5cIixcclxuICB5ZWFyRXN0YWJsaXNoZWQ6IDIwMTQsXHJcbiAgZmFybVNpemU6IDUwLFxyXG4gIHdlYnNpdGU6IFwiaHR0cHM6Ly9xdWFudHVtdmFsbGV5LmZhcm1cIixcclxuICBmYXJtaW5nUHJhY3RpY2VzOiBbXCJPcmdhbmljXCIsIFwiQmlvZHluYW1pY1wiLCBcIlJlZ2VuZXJhdGl2ZVwiXSxcclxuICBwcm9kdWN0Q2F0ZWdvcmllczogW1wiVmVnZXRhYmxlc1wiLCBcIkZydWl0c1wiXSxcclxuICBkZWxpdmVyeVJhZGl1czogMjUsXHJcbn07XHJcblxyXG5jb25zdCBtb2NrQ3JlYXRlZEZhcm0gPSB7XHJcbiAgaWQ6IFwiZmFybS0xMjNcIixcclxuICBzbHVnOiBcInF1YW50dW0tdmFsbGV5LWZhcm0tcmVhbGl0eVwiLFxyXG4gIG5hbWU6IFwiUXVhbnR1bSBWYWxsZXkgRmFybVwiLFxyXG4gIG93bmVySWQ6IG1vY2tVc2VySWQsXHJcbiAgZGVzY3JpcHRpb246IFwiR3Jvd2luZyBjb25zY2lvdXNuZXNzIHRocm91Z2ggb3JnYW5pYyB2ZWdldGFibGVzXCIsXHJcbiAgc3Rvcnk6IFwiT3VyIGZhcm0gaGFzIGJlZW4gcHJhY3RpY2luZyBiaW9keW5hbWljIGFncmljdWx0dXJlIGZvciAxMCB5ZWFyc1wiLFxyXG4gIGJ1c2luZXNzTmFtZTogXCJRdWFudHVtIFZhbGxleSBBZ3JpY3VsdHVyYWwgQ28uXCIsXHJcbiAgeWVhckVzdGFibGlzaGVkOiAyMDE0LFxyXG4gIGZhcm1TaXplOiA1MCxcclxuICBhZGRyZXNzOiBcIjEyMyBEaXZpbmUgU3RyZWV0XCIsXHJcbiAgY2l0eTogXCJSZWFsaXR5XCIsXHJcbiAgc3RhdGU6IFwiQ0FcIixcclxuICB6aXBDb2RlOiBcIjk0MDAwXCIsXHJcbiAgY291bnRyeTogXCJVU1wiLFxyXG4gIGxhdGl0dWRlOiAzNy43NzQ5LFxyXG4gIGxvbmdpdHVkZTogLTEyMi40MTk0LFxyXG4gIGVtYWlsOiBcImZhcm1AcXVhbnR1bS52YWxsZXlcIixcclxuICBwaG9uZTogXCIrMTIzNDU2Nzg5MFwiLFxyXG4gIHdlYnNpdGU6IFwiaHR0cHM6Ly9xdWFudHVtdmFsbGV5LmZhcm1cIixcclxuICBmYXJtaW5nUHJhY3RpY2VzOiBbXCJPcmdhbmljXCIsIFwiQmlvZHluYW1pY1wiLCBcIlJlZ2VuZXJhdGl2ZVwiXSxcclxuICBwcm9kdWN0Q2F0ZWdvcmllczogW1wiVmVnZXRhYmxlc1wiLCBcIkZydWl0c1wiXSxcclxuICBkZWxpdmVyeVJhZGl1czogMjUsXHJcbiAgc3RhdHVzOiBcIlBFTkRJTkdcIixcclxuICB2ZXJpZmljYXRpb25TdGF0dXM6IFwiUEVORElOR1wiLFxyXG4gIHN0cmlwZU9uYm9hcmRlZDogZmFsc2UsXHJcbiAgcGF5b3V0c0VuYWJsZWQ6IGZhbHNlLFxyXG4gIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgb3duZXI6IHtcclxuICAgIGlkOiBtb2NrVXNlcklkLFxyXG4gICAgZmlyc3ROYW1lOiBcIlRlc3RcIixcclxuICAgIGxhc3ROYW1lOiBcIkZhcm1lclwiLFxyXG4gICAgZW1haWw6IFwiZmFybWVyQHRlc3QuY29tXCIsXHJcbiAgfSxcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0VUVVAgJiBURUFSRE9XTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5iZWZvcmVFYWNoKCgpID0+IHtcclxuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxufSk7XHJcblxyXG5hZnRlckVhY2goKCkgPT4ge1xyXG4gIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBURVNUUyAtIEZBUk0gQ1JFQVRJT04gU0VSVklDRVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5kZXNjcmliZShcIkZhcm0gU2VydmljZSAtIERpdmluZSBPcGVyYXRpb25zXCIsICgpID0+IHtcclxuICBkZXNjcmliZShcImNyZWF0ZUZhcm1TZXJ2aWNlXCIsICgpID0+IHtcclxuICAgIGl0KFwibWFuaWZlc3RzIG5ldyBmYXJtIHdpdGggdW5pcXVlIHNsdWcgc3VjY2Vzc2Z1bGx5XCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRVbmlxdWUpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpOyAvLyBObyBzbHVnIGNvbGxpc2lvblxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmNyZWF0ZSkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NyZWF0ZWRGYXJtIGFzIGFueSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlRmFybVNlcnZpY2Uoe1xyXG4gICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcclxuICAgICAgICBmYXJtRGF0YTogbW9ja0Zhcm1EYXRhLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LmZhcm0uaWRlbnRpdHkubmFtZSkudG9CZShcIlF1YW50dW0gVmFsbGV5IEZhcm1cIik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmFybS5pZGVudGl0eS5pZCkudG9CZShcImZhcm0tMTIzXCIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNsdWcpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5mYXJtLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJoYW5kbGVzIHNsdWcgY29sbGlzaW9uIGJ5IGFwcGVuZGluZyBjb3VudGVyXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZSAtIEZpcnN0IHNsdWcgZXhpc3RzLCBzZWNvbmQgZG9lc24ndFxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRVbmlxdWUpXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGlkOiBcImV4aXN0aW5nLWZhcm1cIiB9IGFzIGFueSkgLy8gQ29sbGlzaW9uXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShudWxsKTsgLy8gU3VjY2Vzc1xyXG5cclxuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2UuZmFybS5jcmVhdGUpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDcmVhdGVkRmFybSBhcyBhbnkpO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZUZhcm1TZXJ2aWNlKHtcclxuICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXHJcbiAgICAgICAgZmFybURhdGE6IG1vY2tGYXJtRGF0YSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KGRhdGFiYXNlLmZhcm0uZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJ0aHJvd3MgZXJyb3IgYWZ0ZXIgbWF4IHNsdWcgY29sbGlzaW9uIGF0dGVtcHRzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZSAtIEFsbCBhdHRlbXB0cyBjb2xsaWRlXHJcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLmZhcm0uZmluZFVuaXF1ZSkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGlkOiBcImV4aXN0aW5nLWZhcm1cIixcclxuICAgICAgfSBhcyBhbnkpO1xyXG5cclxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBjcmVhdGVGYXJtU2VydmljZSh7XHJcbiAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXHJcbiAgICAgICAgICBmYXJtRGF0YTogbW9ja0Zhcm1EYXRhLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KFwiRmFpbGVkIHRvIGdlbmVyYXRlIHVuaXF1ZSBzbHVnXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJjcmVhdGVzIGZhcm0gd2l0aCBQRU5ESU5HIHN0YXR1cyBieSBkZWZhdWx0XCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRVbmlxdWUpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmNyZWF0ZSkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NyZWF0ZWRGYXJtIGFzIGFueSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRmFybVNlcnZpY2Uoe1xyXG4gICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcclxuICAgICAgICBmYXJtRGF0YTogbW9ja0Zhcm1EYXRhLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QoZGF0YWJhc2UuZmFybS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIGRhdGE6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcIlBFTkRJTkdcIixcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uU3RhdHVzOiBcIlBFTkRJTkdcIixcclxuICAgICAgICAgICAgc3RyaXBlT25ib2FyZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgcGF5b3V0c0VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwibWFuaWZlc3RzIHF1YW50dW0gZmFybSB3aXRoIGFncmljdWx0dXJhbCBjb25zY2lvdXNuZXNzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRVbmlxdWUpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmNyZWF0ZSkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NyZWF0ZWRGYXJtIGFzIGFueSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlRmFybVNlcnZpY2Uoe1xyXG4gICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcclxuICAgICAgICBmYXJtRGF0YTogbW9ja0Zhcm1EYXRhLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydCAtIENoZWNrIHF1YW50dW0gcHJvcGVydGllc1xyXG4gICAgICBleHBlY3QocmVzdWx0LmZhcm0uY29uc2Npb3VzbmVzcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5mYXJtLmNvbnNjaW91c25lc3MuY3VycmVudFNlYXNvbikudG9NYXRjaChcclxuICAgICAgICAvU1BSSU5HfFNVTU1FUnxGQUxMfFdJTlRFUi9cclxuICAgICAgKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5mYXJtLmNvbnNjaW91c25lc3Muc3RhdGUpLnRvTWF0Y2goXHJcbiAgICAgICAgL0RPUk1BTlR8QVdBS0VOSU5HfEdST1dJTkd8SEFSVkVTVElOR3xSRUdFTkVSQVRJTkcvXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmFybS5sb2NhdGlvbi5sYXRpdHVkZSkudG9CZSgzNy43NzQ5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5mYXJtLmxvY2F0aW9uLmxvbmdpdHVkZSkudG9CZSgtMTIyLjQxOTQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFRFU1RTIC0gQ0hFQ0sgRVhJU1RJTkcgRkFSTVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZShcImNoZWNrRXhpc3RpbmdGYXJtXCIsICgpID0+IHtcclxuICAgIGl0KFwicmV0dXJucyBleGlzdHM9ZmFsc2Ugd2hlbiB1c2VyIGhhcyBubyBmYXJtXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRGaXJzdCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tFeGlzdGluZ0Zhcm0obW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5leGlzdHMpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmZhcm0pLnRvQmVVbmRlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwicmV0dXJucyBleGlzdHM9dHJ1ZSB3aXRoIGZhcm0gZGV0YWlscyB3aGVuIHVzZXIgaGFzIGZhcm1cIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLmZhcm0uZmluZEZpcnN0KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6IFwiZmFybS0xMjNcIixcclxuICAgICAgICBzbHVnOiBcInF1YW50dW0tdmFsbGV5LWZhcm1cIixcclxuICAgICAgICBuYW1lOiBcIlF1YW50dW0gVmFsbGV5IEZhcm1cIixcclxuICAgICAgfSBhcyBhbnkpO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrRXhpc3RpbmdGYXJtKG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXhpc3RzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmZhcm0pLnRvRXF1YWwoe1xyXG4gICAgICAgIGlkOiBcImZhcm0tMTIzXCIsXHJcbiAgICAgICAgc2x1ZzogXCJxdWFudHVtLXZhbGxleS1mYXJtXCIsXHJcbiAgICAgICAgbmFtZTogXCJRdWFudHVtIFZhbGxleSBGYXJtXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJxdWVyaWVzIGRhdGFiYXNlIHdpdGggY29ycmVjdCB1c2VyIElEXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRGaXJzdCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY2hlY2tFeGlzdGluZ0Zhcm0obW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KGRhdGFiYXNlLmZhcm0uZmluZEZpcnN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHsgb3duZXJJZDogbW9ja1VzZXJJZCB9LFxyXG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgc2x1ZzogdHJ1ZSwgbmFtZTogdHJ1ZSB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBURVNUUyAtIEdFVCBGQVJNIEJZIElEXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKFwiZ2V0RmFybUJ5SWRcIiwgKCkgPT4ge1xyXG4gICAgaXQoXCJtYW5pZmVzdHMgcXVhbnR1bSBmYXJtIHdoZW4gZmFybSBleGlzdHNcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLmZhcm0uZmluZFVuaXF1ZSkubW9ja1Jlc29sdmVkVmFsdWUoXHJcbiAgICAgICAgbW9ja0NyZWF0ZWRGYXJtIGFzIGFueVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZhcm1CeUlkKFwiZmFybS0xMjNcIik7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/LmlkZW50aXR5LmlkKS50b0JlKFwiZmFybS0xMjNcIik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/LmlkZW50aXR5Lm5hbWUpLnRvQmUoXCJRdWFudHVtIFZhbGxleSBGYXJtXCIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5jb25zY2lvdXNuZXNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJyZXR1cm5zIG51bGwgd2hlbiBmYXJtIGRvZXMgbm90IGV4aXN0XCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBqZXN0Lm1vY2tlZChkYXRhYmFzZS5mYXJtLmZpbmRVbmlxdWUpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZhcm1CeUlkKFwibm9uZXhpc3RlbnQtZmFybVwiKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJpbmNsdWRlcyBvd25lciBpbmZvcm1hdGlvbiBpbiBxdWVyeVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgamVzdC5tb2NrZWQoZGF0YWJhc2UuZmFybS5maW5kVW5pcXVlKS5tb2NrUmVzb2x2ZWRWYWx1ZShcclxuICAgICAgICBtb2NrQ3JlYXRlZEZhcm0gYXMgYW55XHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmFybUJ5SWQoXCJmYXJtLTEyM1wiKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5pZGVudGl0eS5pZCkudG9CZShcImZhcm0tMTIzXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFRFU1RTIC0gR0VUIEZBUk0gQlkgU0xVR1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZShcImdldEZhcm1CeVNsdWdcIiwgKCkgPT4ge1xyXG4gICAgaXQoXCJtYW5pZmVzdHMgcXVhbnR1bSBmYXJtIHdoZW4gc2x1ZyBleGlzdHNcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLmZhcm0uZmluZFVuaXF1ZSkubW9ja1Jlc29sdmVkVmFsdWUoXHJcbiAgICAgICAgbW9ja0NyZWF0ZWRGYXJtIGFzIGFueVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZhcm1CeVNsdWcoXCJxdWFudHVtLXZhbGxleS1mYXJtLXJlYWxpdHlcIik7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/LmlkZW50aXR5LnNsdWcpLnRvQmUoXCJxdWFudHVtLXZhbGxleS1mYXJtLXJlYWxpdHlcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcInJldHVybnMgbnVsbCB3aGVuIHNsdWcgZG9lcyBub3QgZXhpc3RcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGplc3QubW9ja2VkKGRhdGFiYXNlLmZhcm0uZmluZFVuaXF1ZSkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmFybUJ5U2x1ZyhcIm5vbmV4aXN0ZW50LXNsdWdcIik7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcblxyXG4iXSwidmVyc2lvbiI6M30=