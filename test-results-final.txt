npm info using npm@10.9.4
npm info using node@v22.21.0

> farmers-market@1.0.0 test
> cross-env NODE_OPTIONS=--max-old-space-size=8192 jest --maxWorkers=6

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in M:/Repo/Farmers Market Platform web and app/tsconfig.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
  console.log
    âœ… Database connection established successfully

      at connectWithRetry (src/lib/database/index.ts:41:15)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/__tests__/product.service.test.ts
  ğŸ›’ Product Service - Divine Product Operations
    ğŸ¯ createProduct
      âˆš should create product with valid data (7 ms)
      âˆš should throw error if farm not found (28 ms)
      âˆš should throw error for unauthorized user (7 ms)
      âˆš should throw error for inactive farm (2 ms)
      âˆš should validate product name length (too short) (5 ms)
      âˆš should validate product name length (too long) (4 ms)
      âˆš should validate price is positive (3 ms)
      âˆš should validate inventory quantity is non-negative (2 ms)
      âˆš should validate reserved quantity does not exceed total (3 ms)
      âˆš should generate unique slug when duplicate exists (2 ms)
      âˆš should calculate available quantity correctly (1 ms)
      âˆš should set isLowStock correctly (1 ms)
      âˆš should extract primary photo URL (5 ms)
    ğŸ“– getProductById
      âˆš should get product by ID with farm (2 ms)
      âˆš should get product by ID without farm (2 ms)
      âˆš should return null if product not found (2 ms)
    ğŸ”— getProductBySlug
      âˆš should get product by farm and product slug (3 ms)
      âˆš should return null if product not found by slug (1 ms)
    ğŸ“‹ listProducts
      âˆš should list products with default pagination (3 ms)
      âˆš should filter products by farm ID (2 ms)
      âˆš should filter products by category (2 ms)
      âˆš should filter products by status (2 ms)
      âˆš should filter products in stock (5 ms)
      âˆš should filter featured products (1 ms)
      âˆš should search products by name (1 ms)
      âˆš should handle pagination correctly (1 ms)
    âœï¸ updateProduct
      âˆš should update product successfully (2 ms)
      âˆš should throw error if product not found (2 ms)
      âˆš should throw error for unauthorized user (2 ms)
      âˆš should regenerate slug if name changes (3 ms)
      âˆš should recalculate inventory when updated (1 ms)
      âˆš should update primary photo URL if images change (2 ms)
    ğŸ—‘ï¸ deleteProduct
      âˆš should soft delete product successfully (5 ms)
      âˆš should throw error if product not found (1 ms)
      âˆš should throw error for unauthorized user (1 ms)
    ğŸ“¦ updateInventory
      âˆš should update inventory successfully (2 ms)
      âˆš should calculate available quantity (2 ms)
      âˆš should set status to OUT_OF_STOCK when quantity is zero (1 ms)
      âˆš should set status to AVAILABLE when quantity is positive (2 ms)
      âˆš should update lastRestocked timestamp (2 ms)
    ğŸ” searchProducts
      âˆš should search products by name (2 ms)
      âˆš should limit search results (1 ms)
      âˆš should only return available products (2 ms)
    ğŸ”„ batchUpdateProducts
      âˆš should update multiple products successfully (4 ms)
      âˆš should handle partial failures (2 ms)
      âˆš should return total count (2 ms)
    ğŸ“Š getProductStats
      âˆš should return product statistics (1 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/__tests__/rate-limit.test.ts
  ğŸ›¡ï¸ Rate Limiting
    Basic Rate Limiting
      âˆš should allow requests within limit (3 ms)
      âˆš should block requests exceeding limit (3 ms)
      âˆš should reset after time window expires (152 ms)
      âˆš should handle different identifiers separately (2 ms)
      âˆš should return correct remaining count (5 ms)
    Pre-configured Rate Limits
      âˆš LOGIN_RATE_LIMIT should have correct configuration (2 ms)
      âˆš API_RATE_LIMIT should have correct configuration (2 ms)
      âˆš SENSITIVE_RATE_LIMIT should have correct configuration (2 ms)
      âˆš should enforce LOGIN_RATE_LIMIT correctly (4 ms)
    Rate Limit Status
      âˆš should return null for non-existent identifier (4 ms)
      âˆš should return current status without incrementing (3 ms)
    Rate Limit Reset
      âˆš should reset rate limit for specific identifier (3 ms)
      âˆš should clear all rate limits (3 ms)
    Reset Time Calculation
      âˆš should calculate reset time correctly (4 ms)
      âˆš should decrease reset time with subsequent calls (508 ms)
    Client IP Extraction
      âˆš should extract IP from x-forwarded-for header (3 ms)
      âˆš should extract IP from x-real-ip header (2 ms)
      âˆš should extract IP from cf-connecting-ip header (Cloudflare) (2 ms)
      âˆš should return 'unknown' if no IP headers present (2 ms)
      âˆš should prioritize x-forwarded-for over other headers (2 ms)
    Edge Cases
      âˆš should handle concurrent requests correctly (1 ms)
      âˆš should handle zero max requests (1 ms)
      âˆš should handle very large window (2 ms)
      âˆš should handle rapid successive requests (10 ms)
    Rate Limit Response Headers
      âˆš should include correct limit information (3 ms)
      âˆš should provide retry-after information when blocked (1 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/components/__tests__/ErrorBoundary.test.tsx
  ErrorBoundary Divine Consciousness
    Basic Error Catching
      âˆš renders children when no error occurs (42 ms)
      âˆš catches and displays errors (84 ms)
      âˆš allows custom fallback UI (13 ms)
    Error Categorization System
      âˆš categorizes errors correctly (16 ms)
      âˆš categorizes authentication errors correctly (13 ms)
      âˆš categorizes authorization errors correctly (14 ms)
      âˆš categorizes validation errors correctly (9 ms)
      âˆš categorizes server errors correctly (9 ms)
      âˆš categorizes not found errors correctly (13 ms)
      âˆš categorizes unknown errors with generic message (10 ms)
    Structured Logging
      âˆš logs errors with structured format (9 ms)
      âˆš includes categorization metadata in logs (14 ms)
    Retry Mechanism
      âˆš automatically retries recoverable errors (13 ms)
      âˆš uses exponential backoff for retries (15 ms)
      âˆš respects maxRetries limit (14 ms)
      âˆš does not retry non-recoverable errors (12 ms)
    Reset Functionality
      âˆš resets error state when reset button clicked (47 ms)
      âˆš logs reset action (45 ms)
    Development Mode Features
      âˆš shows error details in development mode (12 ms)
      âˆš hides error details in production mode (11 ms)
    UI Rendering
      âˆš displays appropriate button for recoverable errors (11 ms)
      âˆš displays homepage button for non-recoverable errors (11 ms)
      â—‹ skipped shows retry count when retries have occurred

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

  console.log
    âœ¨ Divine Performance Tracking initialized

      at initializeDivinePerformanceTracking (src/hooks/useComponentConsciousness.ts:355:11)

PASS FARMERS MARKET DIVINE TESTS src/hooks/__tests__/useComponentConsciousness.test.ts
  useComponentConsciousness Hook
    Basic Initialization
      âˆš should initialize with component name (12 ms)
      âˆš should return consistent consciousness object (6 ms)
      âˆš should accept optional context (4 ms)
    Metrics Tracking
      âˆš should initialize metrics with zero values (8 ms)
      âˆš should track render count (30 ms)
      âˆš should record render times (32 ms)
    Performance Measurement
      âˆš should start and complete measurement successfully (64 ms)
      âˆš should handle measurement failure with Error object (10 ms)
      âˆš should handle measurement failure with string error (10 ms)
      âˆš should handle measurement failure with unknown error type (9 ms)
      âˆš should increment error count on failure (6 ms)
    Event Tracking
      âˆš should track custom events (4 ms)
      âˆš should provide component metrics (4 ms)
      âˆš should work without global tracker initialized (4 ms)
      âˆš should track events without metadata (4 ms)
      âˆš should track events with metadata (4 ms)
      âˆš should track multiple events (5 ms)
      âˆš should send events to analytics tracker if available (4 ms)
      âˆš should work without analytics tracker (3 ms)
    Global Performance Tracking Initialization
      âˆš should initialize global trackers (3 ms)
      âˆš should record metrics globally (3 ms)
      âˆš should get component-specific metrics (4 ms)
      âˆš should clear metrics (3 ms)
      âˆš should limit metrics to 1000 entries (5 ms)
    Integration with React Lifecycle
      âˆš should track component unmount (5 ms)
      âˆš should handle multiple component instances (5 ms)
    TypeScript Type Safety
      âˆš should have properly typed return object (4 ms)
      âˆš should have properly typed metrics (4 ms)
    Edge Cases
      âˆš should handle empty component name (3 ms)
      âˆš should handle very long component names (5 ms)
      âˆš should handle special characters in component name (3 ms)
      âˆš should handle rapid-fire events (4 ms)
      âˆš should handle measurements with zero duration (6 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

  console.log
    Payment confirmed for intent: pi_123456789

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_test_completed

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_test_confirmed

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_multi_order

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_nonexistent

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_123

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_abc123def

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: payment_intent_xyz

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: custom-id-format-999

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_error

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_1763806361826

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent: pi_1763806361828

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

  console.log
    Payment confirmed for intent:

      at Function.confirmPayment (src/lib/services/payment.service.ts:49:13)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/__tests__/payment.service.test.ts
  ğŸ’³ Payment Service - Divine Payment Operations
    ğŸ¯ createPaymentIntent
      âˆš should create payment intent with valid order ID and amount (3 ms)
      âˆš should use USD as default currency when not specified (1 ms)
      âˆš should generate unique payment intent IDs (8 ms)
      âˆš should handle different currencies (EUR) (1 ms)
      âˆš should handle different currencies (GBP) (2 ms)
      âˆš should create payment intent with zero amount (free order) (1 ms)
      âˆš should handle large payment amounts (1 ms)
      âˆš should handle small payment amounts (1 cent) (2 ms)
      âˆš should set initial status as pending (1 ms)
      âˆš should propagate database errors (12 ms)
    âœ… confirmPayment
      âˆš should confirm payment with valid payment intent ID (3 ms)
      âˆš should update payment status to COMPLETED (5 ms)
      âˆš should update order status to CONFIRMED (3 ms)
      âˆš should handle confirmation of multiple orders with same payment intent (2 ms)
      âˆš should return true even if no orders found (idempotent) (3 ms)
      âˆš should handle different payment intent ID formats (4 ms)
      âˆš should not throw errors on confirmation (3 ms)
    ğŸ’° refundPayment
      âˆš should refund payment for valid order (2 ms)
      âˆš should throw error if order not found (2 ms)
      âˆš should update payment status to REFUNDED (1 ms)
      âˆš should update order status to CANCELLED (2 ms)
      âˆš should handle partial refund with specified amount (2 ms)
      âˆš should handle full refund when amount not specified (1 ms)
      âˆš should refund already refunded orders (idempotent) (4 ms)
      âˆš should handle refund for order with zero amount (1 ms)
      âˆš should propagate database errors on refund (2 ms)
      âˆš should handle refund with various order statuses (1 ms)
    ğŸ”„ Payment Workflow Integration
      âˆš should handle complete payment flow: create -> confirm (2 ms)
      âˆš should handle complete refund flow: create -> confirm -> refund (2 ms)
    âš¡ Edge Cases & Error Handling
      âˆš should handle concurrent payment intent creation (121 ms)
      âˆš should handle payment intent creation with special characters in order ID (2 ms)
      âˆš should handle empty string payment intent ID gracefully (2 ms)
      âˆš should handle database timeout during payment creation (103 ms)
      âˆš should validate payment intent structure (2 ms)
    ğŸ¨ Payment Intent ID Format
      âˆš should generate payment intent IDs with pi_ prefix (1 ms)
      âˆš should use timestamp in payment intent ID for uniqueness (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/components/__tests__/SeasonalProductCatalog.test.tsx
  SeasonalProductCatalog
    Product Manifestation Reality
      âˆš manifests seasonal products with agricultural consciousness (11 ms)
      âˆš respects seasonal boundaries and filters appropriately (5 ms)
      âˆš handles empty product catalog with divine grace (14 ms)
    Product Interaction Quantum Mechanics
      âˆš allows users to view product details (78 ms)
      âˆš supports adding products to cart with agricultural intent (46 ms)
    Agricultural Consciousness Preservation
      âˆš maintains biodynamic awareness during rendering (16 ms)
      âˆš displays seasonal consciousness indicators (33 ms)
    Performance Quantum Optimization
      âˆš efficiently renders large product catalogs (53 ms)
      âˆš implements virtualization for optimal performance (13 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/cache/__tests__/index.test.ts
  ğŸ—„ï¸ Cache Index - Multi-Layer Caching
    ğŸ“‹ Cache Keys
      âˆš should generate farm cache key (2 ms)
      âˆš should generate farm list cache key (2 ms)
      âˆš should generate product cache key (2 ms)
      âˆš should generate product list cache key (2 ms)
      âˆš should generate user profile cache key (5 ms)
      âˆš should generate seasonal data cache key for SPRING (2 ms)
      âˆš should generate seasonal data cache key for SUMMER (2 ms)
      âˆš should generate seasonal data cache key for FALL (2 ms)
      âˆš should generate seasonal data cache key for WINTER (2 ms)
    ğŸ’¾ Memory Cache Operations
      âˆš should set and get value from memory cache (2 ms)
      âˆš should return null for non-existent key (1 ms)
      âˆš should delete key from cache (1 ms)
      âˆš should handle custom TTL (1 ms)
      âˆš should cache complex objects (1 ms)
      âˆš should cache arrays (3 ms)
      âˆš should cache strings (2 ms)
      âˆš should cache numbers (2 ms)
      âˆš should cache booleans (2 ms)
      âˆš should cache null values (2 ms)
    ğŸ”„ Pattern Deletion
      âˆš should delete keys matching pattern (3 ms)
      âˆš should handle pattern with no matches (2 ms)
      âˆš should delete multiple patterns (2 ms)
    ğŸ§¹ Clear Operations
      âˆš should clear all cache (3 ms)
      âˆš should handle clearing empty cache (2 ms)
    ğŸ Cache Wrap Pattern
      âˆš should return cached value if exists (2 ms)
      âˆš should compute and cache if not exists (4 ms)
      âˆš should use custom TTL in wrap (2 ms)
      âˆš should handle factory errors (14 ms)
      âˆš should cache factory result on success (2 ms)
    ğŸŒ¸ Seasonal TTL
      âˆš should use seasonal TTL when not specified (3 ms)
      âˆš should handle SPRING season (Mar-May) (4 ms)
      âˆš should handle SUMMER season (Jun-Aug) (4 ms)
      âˆš should handle FALL season (Sep-Nov) (2 ms)
      âˆš should handle WINTER season (Dec-Feb) (3 ms)
    ğŸ”¥ Cache Warming
      âˆš should warm cache successfully (2 ms)
      âˆš should handle cache warming errors gracefully (2 ms)
    âš¡ Performance & Edge Cases
      âˆš should handle rapid successive sets (4 ms)
      âˆš should handle rapid successive gets (10 ms)
      âˆš should handle very large objects (2 ms)
      âˆš should handle empty objects (4 ms)
      âˆš should handle empty arrays (2 ms)
      âˆš should handle keys with special characters (2 ms)
      âˆš should handle concurrent operations (2 ms)
    ğŸ”„ Integration Scenarios
      âˆš should handle complete cache lifecycle (2 ms)
      âˆš should handle multiple related keys (2 ms)
      âˆš should invalidate related caches (2 ms)
    ğŸ¯ Type Safety
      âˆš should maintain type safety with generics (2 ms)
      âˆš should handle union types (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/__tests__/farm.service.test.ts
  Farm Service - CRUD Operations
    createFarmService
      âˆš should create a farm successfully (4 ms)
      âˆš should throw error if user not found (18 ms)
      âˆš should generate unique slug from farm name (4 ms)
    getFarmById
      âˆš should return farm from cache if available (2 ms)
      âˆš should fetch from database if not in cache (2 ms)
      âˆš should return null for non-existent farm (1 ms)
    getFarmBySlug
      âˆš should return farm by slug from cache (2 ms)
      âˆš should fetch from database by slug if not cached (2 ms)
    updateFarmService
      âˆš should update farm with valid ownership (3 ms)
      âˆš should throw error if farm not found (8 ms)
      âˆš should throw error if user is not owner (2 ms)
      âˆš should handle partial updates (2 ms)
      âˆš should invalidate cache after update (2 ms)
    deleteFarmService
      âˆš should soft delete farm (set status to INACTIVE) (2 ms)
      âˆš should throw error if farm not found (2 ms)
      âˆš should throw error if user is not owner (2 ms)
      âˆš should invalidate cache after deletion (2 ms)
    listFarmsService
      âˆš should return paginated farms with default options (3 ms)
      âˆš should filter by status (2 ms)
      âˆš should filter by state (2 ms)
      âˆš should handle pagination correctly (4 ms)
      âˆš should filter by farming practices (2 ms)
    searchFarmsService
      âˆš should search farms by text query (2 ms)
      âˆš should search with case-insensitive matching (2 ms)
      âˆš should search across multiple fields (2 ms)
      âˆš should limit results to 10 by default (1 ms)
      âˆš should return empty array for no matches (2 ms)
    Edge Cases and Error Handling
      âˆš should handle database errors gracefully in getFarmById (2 ms)
      âˆš should handle empty search query (2 ms)
      âˆš should handle very large pagination requests (2 ms)
      âˆš should handle updates with no changes (3 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

  console.log
    ğŸ¨ Processed 4 images in 0.79ms

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:280:15)

  console.log
    ğŸ“· Processed 10 product images in 19.87ms

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:464:15)

  console.log
       Average: 1.99ms per image

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:465:15)

  console.log
    ğŸ–¼ï¸  High-res (4000x3000) processed in 0.06ms

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:484:15)

  console.log
    
    ğŸ“Š Image Processing Benchmark:

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:515:15)

  console.log
       Batch 1: 0.10ms (10101.0 img/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:517:17
          at Array.forEach (<anonymous>)

  console.log
       Batch 4: 0.03ms (156250.0 img/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:517:17
          at Array.forEach (<anonymous>)

  console.log
       Batch 8: 0.02ms (402010.1 img/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:517:17
          at Array.forEach (<anonymous>)

  console.log
       Batch 16: 0.04ms (380952.4 img/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:517:17
          at Array.forEach (<anonymous>)

  console.log
    
    ğŸ”¢ Matrix Multiplication Benchmark:

      at Object.<anonymous> (src/lib/performance/__tests__/gpu-processor.test.ts:551:15)

  console.log
       10x10: 0.17ms (5.80M ops/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:553:17
          at Array.forEach (<anonymous>)

  console.log
       50x50: 7.33ms (17.05M ops/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:553:17
          at Array.forEach (<anonymous>)

  console.log
       100x100: 2.57ms (388.61M ops/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:553:17
          at Array.forEach (<anonymous>)

  console.log
       200x200: 26.21ms (305.27M ops/sec)

      at src/lib/performance/__tests__/gpu-processor.test.ts:553:17
          at Array.forEach (<anonymous>)

PASS FARMERS MARKET DIVINE TESTS src/lib/performance/__tests__/gpu-processor.test.ts
  GPUProcessor Divine Tests
    GPU Initialization
      âˆš initializes GPU successfully (2 ms)
      âˆš reports GPU backend availability (2 ms)
      âˆš initializes metrics correctly (1 ms)
    Image Processing Pipeline
      âˆš processes single image with GPU acceleration (7 ms)
      âˆš processes batch of images in parallel (22 ms)
      âˆš applies image enhancement correctly (4 ms)
      âˆš resizes images correctly (2 ms)
    Basic GPU Operations
      âˆš reports GPU status correctly (4 ms)
      âˆš tracks metrics correctly (2 ms)
      âˆš handles image processing (2 ms)
    Performance Metrics
      âˆš tracks kernel execution count (1 ms)
      âˆš reports VRAM usage (2 ms)
      âˆš tracks metrics correctly after processing (1 ms)
    Error Handling
      âˆš handles invalid image data gracefully (2 ms)
      âˆš handles processing errors gracefully (1 ms)
    Resource Management
      âˆš provides disposal method (2 ms)
      âˆš reports accurate status after operations (2 ms)
      â—‹ skipped cleans up TensorFlow memory
    Agricultural Use Cases
      âˆš processes farm product images efficiently (26 ms)
      âˆš handles high-resolution farm photos (4 ms)
    Performance Benchmarks
      âˆš benchmarks image processing throughput (11 ms)
      âˆš benchmarks matrix multiplication performance (84 ms)
  GPU Singleton Pattern
    âˆš returns same instance on multiple calls (2 ms)
    âˆš maintains state across calls (4 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/__tests__/shipping.service.test.ts
  ğŸšš Shipping Service - Divine Shipping Operations
    ğŸ“¦ calculateShippingRates
      âˆš should return shipping rates for valid destination (2 ms)
      âˆš should return STANDARD shipping option (2 ms)
      âˆš should return EXPRESS shipping option (5 ms)
      âˆš should return OVERNIGHT shipping option (2 ms)
      âˆš should handle different cities (2 ms)
      âˆš should handle different states (2 ms)
      âˆš should handle different zip codes (3 ms)
      âˆš should return rates in order of cost (cheapest first) (1 ms)
      âˆš should return rates in reverse order of speed (2 ms)
      âˆš should have consistent rate structure (7 ms)
      âˆš should return positive costs (2 ms)
      âˆš should return positive estimated days (1 ms)
    ğŸ·ï¸ createShippingLabel
      âˆš should create shipping label successfully (2 ms)
      âˆš should update order status to PREPARING with tracking (2 ms)
      âˆš should update order with shipping service (2 ms)
      âˆš should generate unique tracking numbers (12 ms)
      âˆš should generate unique label IDs (15 ms)
      âˆš should handle STANDARD service (2 ms)
      âˆš should handle EXPRESS service (2 ms)
      âˆš should handle OVERNIGHT service (3 ms)
      âˆš should propagate database errors (16 ms)
    ğŸ“ getTrackingInfo
      âˆš should return tracking info for valid tracking number (2 ms)
      âˆš should return empty array for invalid tracking number (2 ms)
      âˆš should include timestamp in tracking info (2 ms)
      âˆš should query database with tracking number (3 ms)
      âˆš should handle different order statuses (4 ms)
      âˆš should handle database errors (2 ms)
      âˆš should return tracking info with correct structure (2 ms)
    ğŸ”„ updateShippingStatus
      âˆš should update shipping status successfully (1 ms)
      âˆš should handle PENDING status (1 ms)
      âˆš should handle invalid status by defaulting to PREPARING (2 ms)
      âˆš should handle SHIPPED status (4 ms)
      âˆš should handle DELIVERED status (2 ms)
      âˆš should handle CANCELLED status (2 ms)
      âˆš should propagate database errors (2 ms)
      âˆš should update status for different order IDs (2 ms)
    ğŸ”„ Integration Scenarios
      âˆš should handle complete shipping workflow (2 ms)
      âˆš should handle rate calculation for multiple orders (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/__tests__/concurrent/race-conditions.test.ts
  ğŸ”„ Concurrent Operations: Inventory Management
    âš¡ Race Condition: Multiple Purchases of Same Product
      âˆš should handle concurrent product purchases correctly (2 ms)
      âˆš should prevent negative inventory through concurrent updates (1 ms)
    âš¡ Race Condition: Concurrent Order Updates
      âˆš should handle multiple order status updates correctly (1 ms)
    âš¡ Race Condition: Payment Confirmation
      âˆš should handle duplicate payment confirmations idempotently (1 ms)
      âˆš should prevent double charging through concurrent payments (1 ms)
    âš¡ High Concurrency: Bulk Operations
      âˆš should handle 100 concurrent product fetches efficiently (2 ms)
      âˆš should handle 50 concurrent batch updates (8 ms)
    âš¡ Deadlock Prevention
      âˆš should avoid deadlocks in cross-service operations (107 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

  console.log
    Cache miss { key: 'farm:farm-123' }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

  console.log
    Cache set { key: 'farm:farm-123', ttl: 1800 }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

  console.log
    Cache miss { key: 'farm:nonexistent-farm' }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

  console.log
    Cache hit (memory) { key: 'farm:farm-123' }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

  console.log
    Cache miss { key: 'farm:farm:slug:quantum-valley-farm-reality' }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

  console.log
    Cache set { key: 'farm:farm-123', ttl: 1800 }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)
          at async Promise.all (index 0)

  console.log
    Cache set { key: 'farm:farm:slug:quantum-valley-farm-reality', ttl: 1800 }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)
          at async Promise.all (index 1)

  console.log
    Cache miss { key: 'farm:farm:slug:nonexistent-slug' }

      at Object.debug (src/lib/monitoring/logger.ts:6:38)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/farm.service.test.ts
  Farm Service - Divine Operations
    createFarmService
      âˆš manifests new farm with unique slug successfully (7 ms)
      âˆš handles slug collision by appending counter (2 ms)
      âˆš throws error after max slug collision attempts (13 ms)
      âˆš creates farm with PENDING status by default (2 ms)
      âˆš manifests quantum farm with agricultural consciousness (4 ms)
    checkExistingFarm
      âˆš returns exists=false when user has no farm (2 ms)
      âˆš returns exists=true with farm details when user has farm (3 ms)
      âˆš queries database with correct user ID (2 ms)
    getFarmById
      âˆš manifests quantum farm when farm exists (4 ms)
      âˆš returns null when farm does not exist (2 ms)
      âˆš includes owner information in query (2 ms)
    getFarmBySlug
      âˆš manifests quantum farm when slug exists (4 ms)
      âˆš returns null when slug does not exist (3 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/hooks/__tests__/useSeasonalConsciousness.test.ts
  useSeasonalConsciousness
    Hook Initialization
      âˆš should initialize with default seasonal awareness (13 ms)
      âˆš should detect current season (4 ms)
      âˆš should detect lunar phase (4 ms)
    Seasonal Patterns
      âˆš should provide optimal activities (4 ms)
      âˆš should calculate planting windows (8 ms)
      âˆš should calculate harvest windows (4 ms)
    Agricultural Consciousness
      âˆš should provide consistent seasonal data (4 ms)
      âˆš should return valid season for current date (4 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/__tests__/cache.memory.test.ts
  cache (memory fallback)
    âˆš getOrSet caches computed value (28 ms)
    âˆš invalidatePattern removes matching keys (22 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/cache/__tests__/agricultural-cache.test.ts
  ğŸŒ¾ Agricultural Cache - Seasonal Awareness
    ğŸ¡ Farm Caching
      âˆš should cache farm data (3 ms)
      âˆš should get cached farm data (2 ms)
      âˆš should return null for cache miss (5 ms)
      âˆš should invalidate farm cache (2 ms)
      âˆš should cache multiple farms (2 ms)
    ğŸ›’ Product Caching
      âˆš should cache product data (1 ms)
      âˆš should get cached product data (2 ms)
      âˆš should return null for product cache miss (2 ms)
      âˆš should invalidate product cache and related lists (2 ms)
      âˆš should cache multiple products (2 ms)
    ğŸŒ¸ Seasonal Caching
      âˆš should cache SPRING data with correct TTL (2 ms)
      âˆš should cache SUMMER data with correct TTL (4 ms)
      âˆš should cache FALL data with correct TTL (2 ms)
      âˆš should cache WINTER data with correct TTL (2 ms)
      âˆš should get cached seasonal data (2 ms)
      âˆš should return null for seasonal cache miss (2 ms)
      âˆš should cache all seasons (2 ms)
    ğŸ”„ Integration Scenarios
      âˆš should handle complete farm workflow (2 ms)
      âˆš should handle complete product workflow (2 ms)
      âˆš should cache farm with products (2 ms)
      âˆš should cache seasonal data for all seasons (2 ms)
    ğŸ¯ Edge Cases
      âˆš should handle empty farm data (2 ms)
      âˆš should handle empty product data (4 ms)
      âˆš should handle null returns gracefully (2 ms)
      âˆš should handle complex nested data (3 ms)
      âˆš should handle arrays (3 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS tests/example.test.ts
  Test Infrastructure Validation
    Test Helpers
      âˆš creates valid test user data (2 ms)
      âˆš creates valid test farm data (2 ms)
      âˆš creates valid test product data (2 ms)
    Mock Infrastructure
      âˆš provides mocked database client (3 ms)
      âˆš provides mocked authentication (1 ms)
    Environment Configuration
      âˆš sets test environment variables (1 ms)
  Divine Naming Patterns
    âˆš manifests test data with quantum awareness (1 ms)
    âˆš validates biodynamic compliance in agricultural operations (1 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/__tests__/setup.test.ts
  Test Environment Setup
    âˆš should have Jest configured (3 ms)
    âˆš should have global test utilities available (4 ms)
    âˆš should support async/await in tests (3 ms)
    âˆš should have beforeEach and afterEach available (4 ms)
    âˆš should have mocking capabilities (1 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/lib/services/security/__tests__/security.service.test.ts
  SecurityService
    sanitizeInput
      âˆš should sanitize HTML tags (2 ms)
      âˆš should sanitize quotes (1 ms)
    isValidEmail
      âˆš should validate correct email (1 ms)
      âˆš should reject invalid email (2 ms)
    isValidPhone
      âˆš should validate correct phone numbers (2 ms)
      âˆš should reject invalid phone numbers (1 ms)
    isStrongPassword
      âˆš should validate strong password (4 ms)
      âˆš should reject weak passwords (2 ms)
      âˆš should require minimum length (2 ms)
    validateFileUpload
      âˆš should validate correct file (2 ms)
      âˆš should reject file that is too large (2 ms)
      âˆš should reject invalid file type (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/__tests__/services/order.service.test.ts
  OrderService - Divine Order Management
    createOrder
      âˆš creates order with items (3 ms)
    getOrderById
      âˆš retrieves order by ID (2 ms)
      âˆš returns null for non-existent order (3 ms)
    updateOrderStatus
      âˆš updates order status (5 ms)
    getUserOrders
      âˆš retrieves all orders for user (3 ms)
    getFarmOrders
      âˆš retrieves all orders for farm (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/__tests__/setup-verification.test.ts
  Testing Infrastructure Verification
    âˆš should have Jest configured correctly (2 ms)
    âˆš should support TypeScript (2 ms)
    âˆš should have proper module resolution (2 ms)
    âˆš should support async/await (2 ms)
    âˆš should support ES6 features (2 ms)

  console.log
    ğŸŒ¾ Divine Test Environment Initialized

      at Object.<anonymous> (jest.setup.js:470:9)

  console.log
    âš¡ Agricultural Consciousness: ACTIVE

      at Object.<anonymous> (jest.setup.js:471:9)

  console.log
    ğŸ¯ HP OMEN Optimization: ENABLED

      at Object.<anonymous> (jest.setup.js:472:9)

PASS FARMERS MARKET DIVINE TESTS src/tests/security/input-validation.test.ts
  Input Validation
    String Validation
      âˆš should validate non-empty strings (3 ms)
      âˆš should reject empty strings (2 ms)
      âˆš should validate string length (4 ms)
    Number Validation
      âˆš should validate positive numbers (2 ms)
      âˆš should validate integer numbers (2 ms)
      âˆš should validate number ranges (2 ms)
    XSS Prevention
      âˆš should detect potential XSS in input (3 ms)
      âˆš should allow safe HTML entities (3 ms)

Test Suites: 2 skipped, 21 passed, 21 of 23 total
Tests:       16 skipped, 414 passed, 430 total
Snapshots:   0 total
Time:        8.029 s
Ran all test suites.
npm info ok
